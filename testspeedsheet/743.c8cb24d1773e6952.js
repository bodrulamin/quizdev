"use strict";(self.webpackChunktestspeedsheet=self.webpackChunktestspeedsheet||[]).push([[743],{6792:(j,p,i)=>{i.d(p,{l:()=>e});var d=i(3792);const b=i(1108)._+"/get-configuration-data";var v=i(9291);let e=(()=>{class l extends d.b{constructor(){super()}fetchConfiguration(){return this.http.get(b)}static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},8743:(j,p,i)=>{i.r(p),i.d(p,{SubjectConfigModule:()=>_});var d=i(28),c=i(95),b=i(6097);class v{}var e=i(9291),l=i(895),y=i(3792),o=i(1108);const s=o._+"/add-exam-level-subject",a=o._+"/delete-exam-level-subject";let m=(()=>{class n extends y.b{constructor(){super()}addSubject(t){return this.http.post(s,t)}deleteSubject(t){return this.http.post(a,t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Z=i(6792),C=i(5219),S=i(2352),g=i(707),x=i(5431),T=i(3714);function L(n,A){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Subject Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Subject Code"),e.qZA(),e.TgZ(5,"th",19),e._uU(6,"Edit"),e.qZA(),e.TgZ(7,"th",19),e._uU(8,"Delete"),e.qZA()())}function E(n,A){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"p-button",20),e.NdJ("onClick",function(){const h=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.editSubject(h))}),e.qZA()(),e.TgZ(7,"td")(8,"p-button",21),e.NdJ("onClick",function(){const h=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.deleteSubject(h))}),e.qZA()()()}if(2&n){const t=A.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Q6J("text",!0),e.xp6(2),e.Q6J("text",!0)}}const F=function(){return{"min-width":"50rem"}},U=[{path:"",component:(()=>{class n extends b.H{constructor(t,r,u,h,f,N,M,I){super(),this.router=t,this.activatedRoute=r,this.layoutService=u,this.subjectCofigService=h,this.adminService=f,this.messageService=N,this.confirmationService=M,this.formBuilder=I,this.examLevelOptions=[],this.sessionOptions=[],this.required_field={examLevelCode:"Exam Level",subjectName:"Subject Name",subjectCode:"Subject Code"},this.editMode=!1,this.selectedExamLevel="",this.prepareCreateSubjectForm(),this.fetchConfiguration()}prepareCreateSubjectForm(){this.createSubjectForm=this.formBuilder.group({id:[0],examLevelCode:[null,c.kI.required],subjectName:[null,[c.kI.required]],subjectCode:[null,c.kI.required]})}createSubject(){this.formInvalid()||(this.editMode?this.subjectCofigService.addSubject(this.createSubjectForm.value).subscribe(t=>{t.result&&(this.messageService.add({summary:"Successful",severity:"success",detail:"Subject Edited Successfully"}),this.fetchConfiguration())}):(delete this.createSubjectForm.value.id,this.subjectCofigService.addSubject(this.createSubjectForm.value).subscribe(t=>{t.result&&(this.fetchConfiguration(),this.messageService.add({summary:"Successful",severity:"success",detail:"Subject Added Successfully"}))})),this.editMode=!1,this.clearInput(),this.markFormGroupAsUnTouched(this.createSubjectForm))}formInvalid(){return this.markFormGroupAsTouched(this.createSubjectForm),this.showRequiredErrorMessage(this.createSubjectForm,this.required_field),this.createSubjectForm.invalid}fetchConfiguration(){this.subscribers.confSubs=this.adminService.fetchConfiguration().subscribe(t=>{t.result&&(this.examLevelOptions=t.data.examLevelList,this.selectedExamLevel&&this.onExamLevelChange(this.selectedExamLevel))})}onExamLevelChange(t){this.selectedExamLevel=t,this.subjectList=t?this.examLevelOptions.find(r=>r.code===t).subList:[]}onExamLevelClear(){}editSubject(t){this.editMode=!0,this.createSubjectForm.controls.id.setValue(t.id),this.createSubjectForm.controls.subjectName.setValue(t.name),this.createSubjectForm.controls.subjectCode.setValue(t.code)}clearInput(){this.createSubjectForm.controls.subjectName.setValue(null),this.createSubjectForm.controls.subjectCode.setValue(null)}deleteSubject(t){this.confirmationService.confirm({message:"Are you sure that you want to delete this subject configuration? this can not be undone!",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{let r=new v;r.id=t.id,r.subjectCode=t.code,r.subjectName=t.name,r.examLevelCode=this.selectedExamLevel,this.subjectCofigService.deleteSubject(r).subscribe(u=>{u.result&&(this.fetchConfiguration(),this.messageService.add({summary:"Successful",severity:"success",detail:"Subject Deleted Successfully"}))})},reject:r=>{}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(l.P),e.Y36(m),e.Y36(Z.l),e.Y36(C.ez),e.Y36(C.YP),e.Y36(c.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-subject-configuration"]],features:[e.qOj],decls:28,vars:8,consts:[[1,"grid"],[1,"col-12","md:col-12"],[1,"card","p-fluid"],[1,"p-5",3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","exam-level"],["id","exam-level","formControlName","examLevelCode","placeholder","Select Exam Level","optionLabel","name","optionValue","code",3,"showClear","options","onChange","onClear"],["for","sub-name"],["pInputText","","id","sub-name","formControlName","subjectName","type","text"],["for","sub-code"],["pInputText","","id","sub-code","formControlName","subjectCode","type","text"],[1,"flex","justify-content-end"],["icon","pi pi-save",3,"label","onClick"],[1,"mt-5"],[1,"flex","align-items-center","justify-content-between"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"justify-content-center"],["type","button","icon","pi pi-pencil",3,"text","onClick"],["type","button","icon","pi pi-times",3,"text","onClick"]],template:function(r,u){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4,"Subject Configuration"),e.qZA(),e.TgZ(5,"form",3)(6,"div",4)(7,"div",5)(8,"label",6),e._uU(9,"Exam Level"),e.qZA(),e.TgZ(10,"p-dropdown",7),e.NdJ("onChange",function(f){return u.onExamLevelChange(f.value)})("onClear",function(){return u.onExamLevelClear()}),e.qZA()(),e.TgZ(11,"div",5)(12,"label",8),e._uU(13,"Subject Name"),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",5)(16,"label",10),e._uU(17,"Subject Code"),e.qZA(),e._UZ(18,"input",11),e.qZA()(),e.TgZ(19,"div",12)(20,"p-button",13),e.NdJ("onClick",function(){return u.createSubject()}),e.qZA()(),e.TgZ(21,"div",14)(22,"div",15)(23,"h5"),e._uU(24),e.qZA()(),e.TgZ(25,"p-table",16),e.YNc(26,L,9,0,"ng-template",17),e.YNc(27,E,9,4,"ng-template",18),e.qZA()()()()()()),2&r&&(e.xp6(5),e.Q6J("formGroup",u.createSubjectForm),e.xp6(5),e.Q6J("showClear",!0)("options",u.examLevelOptions),e.xp6(10),e.s9C("label",u.editMode?"Edit Subject":"Add Subject"),e.xp6(4),e.hij("Exam Level: ",u.selectedExamLevel,""),e.xp6(1),e.Q6J("value",u.subjectList)("tableStyle",e.DdM(7,F)))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,S.Lt,C.jx,g.zx,x.iA,T.o]})}return n})()}];let _=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(U),c.UX,S.kW,g.hJ,x.U$,T.j]})}return n})()},6097:(j,p,i)=>{i.d(p,{H:()=>e});var d=i(9291),c=i(305),b=i(95),v=i(5219);let e=(()=>{class l{constructor(){this.subscribers={},this.msgService=(0,d.f3M)(v.ez)}ngOnDestroy(){for(let o in this.subscribers){let s=this.subscribers[o];s instanceof c.Lv&&s.unsubscribe()}}markFormGroupAsTouched(o){o.markAsTouched(),o.markAsDirty();for(const s in o.controls)o.controls[s]instanceof b.NI?(o.controls[s].markAsTouched(),o.controls[s].markAsDirty()):this.markFormGroupAsTouched(o.controls[s])}markFormGroupAsUnTouched(o){o.markAsUntouched(),o.markAsPristine();for(const s in o.controls)o.controls[s]instanceof b.NI?(o.controls[s].markAsUntouched(),o.controls[s].markAsPristine()):this.markFormGroupAsUnTouched(o.controls[s])}showRequiredErrorMessage(o,s){let a=null;return a=this.getRequiredMsg(o.controls,s,a),a&&this.msgService.add({summary:"Fill up mandatory field.",detail:a,severity:"error"}),a}getRequiredMsg(o,s,a){for(const m in o)"INVALID"===o[m].status&&(o[m].hasOwnProperty("controls")?a=this.getRequiredMsg(o[m].controls,s,a):s[m]&&(a?a+=", \n"+s[m]:a=s[m]));return a}static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275cmp=d.Xpm({type:l,selectors:[["app-base-component"]],decls:2,vars:0,template:function(s,a){1&s&&(d.TgZ(0,"p"),d._uU(1,"base-component works!"),d.qZA())}})}return l})()}}]);