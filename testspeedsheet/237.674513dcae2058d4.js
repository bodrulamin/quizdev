"use strict";(self.webpackChunktestspeedsheet=self.webpackChunktestspeedsheet||[]).push([[237],{3237:(g,h,o)=>{o.r(h),o.d(h,{CreateQuestionModule:()=>A});var l=o(28),p=o(6097),n=o(95),e=o(9291),v=o(895),a=o(5219),b=o(647),t=o(6792),s=o(2352),r=o(707);const y=[{path:"",component:(()=>{class m extends p.H{constructor(i,u,c,f,C,L,F){super(),this.router=i,this.activatedRoute=u,this.layoutService=c,this.messageService=f,this.createQuestionService=C,this.adminService=L,this.formBuilder=F,this.examLevelOptions=[],this.sessionOptions=[],this.subjectOptions=[],this.yearOptions=[],this.required_field={examLevel:"Exam Level",session:"Session",year:"Year",subjectCode:"Subject"},this.generateMinMaxYear(),this.prepareCreateQuestionForm(),this.fetchConfiguration()}generateMinMaxYear(){let i=new Date;this.minDate=i,this.minDate.setFullYear(i.getFullYear()-1),this.maxDate=new Date,this.maxDate.setFullYear(i.getFullYear()+5)}prepareCreateQuestionForm(){this.createQuestionForm=this.formBuilder.group({examLevel:[null,n.kI.required],session:[null,n.kI.required],year:[null,[n.kI.required]],subjectCode:[null,n.kI.required]})}searchQuestion(){this.formInvalid()||this.createQuestionService.searchQuestion(this.createQuestionForm.value).subscribe(i=>{i.result&&(i.data.isNew?(this.messageService.add({summary:"Creating new question",detail:"",severity:"success"}),this.router.navigate(["../edit-question"],{state:{data:this.createQuestionForm.value},relativeTo:this.activatedRoute})):(this.messageService.add({summary:"Editing existing question",detail:"",severity:"success"}),this.router.navigate(["../edit-question"],{queryParams:{id:i.data.existingQues.id},relativeTo:this.activatedRoute})))})}formInvalid(){return this.markFormGroupAsTouched(this.createQuestionForm),this.showRequiredErrorMessage(this.createQuestionForm,this.required_field),this.createQuestionForm.invalid}fetchConfiguration(){this.subscribers.confSubs=this.adminService.fetchConfiguration().subscribe(i=>{i.result&&(this.examLevelOptions=i.data.examLevelList,this.sessionOptions=i.data.examSessionList,this.yearOptions=i.data.examYearList)})}onExamLevelChange(i){this.createQuestionForm.controls.subjectCode.setValue(null),this.subjectOptions=i?this.examLevelOptions.find(u=>u.code===i).subList:[]}onExamLevelClear(){this.createQuestionForm.controls.subjectCode.setValue(null),this.subjectOptions=[]}static#e=this.\u0275fac=function(u){return new(u||m)(e.Y36(l.F0),e.Y36(l.gz),e.Y36(v.P),e.Y36(a.ez),e.Y36(b.q),e.Y36(t.l),e.Y36(n.qu))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-create-question"]],features:[e.qOj],decls:26,vars:9,consts:[[1,"grid"],[1,"col-12","md:col-12"],[1,"card","p-fluid"],[1,"p-5",3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","exam-level"],["id","exam-level","formControlName","examLevel","placeholder","Select Exam Level","optionLabel","name","optionValue","code",3,"showClear","options","onChange","onClear"],["for","session"],["id","session","placeholder","Select Session","formControlName","session","optionLabel","name","optionValue","code",3,"showClear","options"],["for","year"],["id","year","placeholder","Select Year","formControlName","year","optionLabel","name","optionValue","code",3,"showClear","options"],["for","subject"],["id","subject","placeholder","Select Subject","formControlName","subjectCode","optionLabel","name","optionValue","code",3,"showClear","options"],[1,"flex","justify-content-end"],["icon","pi pi-search","label","Find",3,"onClick"]],template:function(u,c){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4,"Create Question"),e.qZA(),e.TgZ(5,"form",3)(6,"div",4)(7,"div",5)(8,"label",6),e._uU(9,"Exam Level"),e.qZA(),e.TgZ(10,"p-dropdown",7),e.NdJ("onChange",function(C){return c.onExamLevelChange(C.value)})("onClear",function(){return c.onExamLevelClear()}),e.qZA()(),e.TgZ(11,"div",5)(12,"label",8),e._uU(13,"Session"),e.qZA(),e._UZ(14,"p-dropdown",9),e.qZA()(),e.TgZ(15,"div",4)(16,"div",5)(17,"label",10),e._uU(18,"Year"),e.qZA(),e._UZ(19,"p-dropdown",11),e.qZA(),e.TgZ(20,"div",5)(21,"label",12),e._uU(22,"Subject"),e.qZA(),e._UZ(23,"p-dropdown",13),e.qZA()(),e.TgZ(24,"div",14)(25,"p-button",15),e.NdJ("onClick",function(){return c.searchQuestion()}),e.qZA()()()()()()),2&u&&(e.xp6(5),e.Q6J("formGroup",c.createQuestionForm),e.xp6(5),e.Q6J("showClear",!0)("options",c.examLevelOptions),e.xp6(4),e.Q6J("showClear",!0)("options",c.sessionOptions),e.xp6(5),e.Q6J("showClear",!0)("options",c.yearOptions),e.xp6(4),e.Q6J("showClear",!0)("options",c.subjectOptions))},dependencies:[n._Y,n.JJ,n.JL,n.sg,n.u,s.Lt,r.zx]})}return m})()}];var Q=o(6814);let A=(()=>{class m{static#e=this.\u0275fac=function(u){return new(u||m)};static#t=this.\u0275mod=e.oAB({type:m});static#s=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(y),n.UX,Q.ez,s.kW,r.hJ]})}return m})()},6792:(g,h,o)=>{o.d(h,{l:()=>v});var l=o(3792);const n=o(1108)._+"/get-configuration-data";var e=o(9291);let v=(()=>{class a extends l.b{constructor(){super()}fetchConfiguration(){return this.http.get(n)}static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},6097:(g,h,o)=>{o.d(h,{H:()=>v});var l=o(9291),p=o(305),n=o(95),e=o(5219);let v=(()=>{class a{constructor(){this.subscribers={},this.msgService=(0,l.f3M)(e.ez)}ngOnDestroy(){for(let t in this.subscribers){let s=this.subscribers[t];s instanceof p.Lv&&s.unsubscribe()}}markFormGroupAsTouched(t){t.markAsTouched(),t.markAsDirty();for(const s in t.controls)t.controls[s]instanceof n.NI?(t.controls[s].markAsTouched(),t.controls[s].markAsDirty()):this.markFormGroupAsTouched(t.controls[s])}markFormGroupAsUnTouched(t){t.markAsUntouched(),t.markAsPristine();for(const s in t.controls)t.controls[s]instanceof n.NI?(t.controls[s].markAsUntouched(),t.controls[s].markAsPristine()):this.markFormGroupAsUnTouched(t.controls[s])}showRequiredErrorMessage(t,s){let r=null;return r=this.getRequiredMsg(t.controls,s,r),r&&this.msgService.add({summary:"Fill up mandatory field.",detail:r,severity:"error"}),r}getRequiredMsg(t,s,r){for(const d in t)"INVALID"===t[d].status&&(t[d].hasOwnProperty("controls")?r=this.getRequiredMsg(t[d].controls,s,r):s[d]&&(r?r+=", \n"+s[d]:r=s[d]));return r}static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275cmp=l.Xpm({type:a,selectors:[["app-base-component"]],decls:2,vars:0,template:function(s,r){1&s&&(l.TgZ(0,"p"),l._uU(1,"base-component works!"),l.qZA())}})}return a})()}}]);