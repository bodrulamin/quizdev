(self.webpackChunktestspeedsheet=self.webpackChunktestspeedsheet||[]).push([[81],{3081:(Ee,ee,w)=>{"use strict";w.r(ee),w.d(ee,{EditQuestionModule:()=>Lm});var Y={};w.r(Y),w.d(Y,{Attributor:()=>At,AttributorStore:()=>Ks,BlockBlot:()=>Ds,ClassAttributor:()=>mt,ContainerBlot:()=>Ys,EmbedBlot:()=>Xe,InlineBlot:()=>qi,LeafBlot:()=>je,ParentBlot:()=>_t,Registry:()=>Bs,Scope:()=>j,ScrollBlot:()=>Mi,StyleAttributor:()=>Xt,TextBlot:()=>Vs});var xe=w(28),he=w(5861),$=w(6097);class H{constructor(){this.id=0,this.seqNo=0,this.marks=0,this.quesDesc="",this.isFile=!1}}class D{constructor(){this.id=0,this.examLevel="",this.session="",this.year="",this.subjectCode=""}}class Z{constructor(){this.quesDetailsId=0,this.quesId=0}}class S{}var T=w(4456),M=w.n(T),m=w(1300),_=w.n(m),i=w(9291),v=w(5219),J=w(3792),Q=w(213);let k=(()=>{class s extends J.b{constructor(){super()}addQuestion(e){return this.http.post(Q._R,e)}deleteQuetion(e){return this.http.post(Q.kQ,e)}fetchExistingQuestion(e){return this.http.get(Q.Tl+this.getHttpParams(e))}fetchByFileUrl(e){return this.http.get(Q.Ip+this.getHttpParams(e))}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var le=w(647),ie=w(6792),oe=w(895),pe=w(95),B=w(6814),Ne=w(707),X=w(2076);const He=["container"];function f(s,t){1&s&&i.GkF(0)}function E(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",6),i.NdJ("mousedown",function(r){i.CHM(e);const l=i.oxw().index,o=i.oxw();return i.KtG(o.onGutterMouseDown(r,l))})("touchstart",function(r){i.CHM(e);const l=i.oxw().index,o=i.oxw();return i.KtG(o.onGutterTouchStart(r,l))})("touchmove",function(r){i.CHM(e);const l=i.oxw(2);return i.KtG(l.onGutterTouchMove(r))})("touchend",function(r){i.CHM(e);const l=i.oxw().index,o=i.oxw();return i.KtG(o.onGutterTouchEnd(r,l))}),i.TgZ(1,"div",7),i.NdJ("keyup",function(r){i.CHM(e);const l=i.oxw(2);return i.KtG(l.onGutterKeyUp(r))})("keydown",function(r){i.CHM(e);const l=i.oxw().index,o=i.oxw();return i.KtG(o.onGutterKeyDown(r,l))}),i.qZA()()}if(2&s){const e=i.oxw(2);i.uIk("data-p-gutter-resizing",!1)("data-pc-section","gutter"),i.xp6(1),i.Q6J("ngStyle",e.gutterStyle()),i.uIk("aria-orientation",e.layout)("aria-valuenow",e.prevSize)("data-pc-section","gutterhandle")}}function g(s,t){if(1&s&&(i.TgZ(0,"div",3),i.YNc(1,f,1,0,"ng-container",4),i.qZA(),i.YNc(2,E,2,6,"div",5)),2&s){const e=t.$implicit,n=t.index,r=i.oxw();i.Tol(r.panelStyleClass),i.Q6J("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),i.uIk("data-pc-name","splitter")("data-pc-section","root"),i.xp6(1),i.Q6J("ngTemplateOutlet",e),i.xp6(1),i.Q6J("ngIf",n!==r.panels.length-1)}}let I=(()=>{class s{document;platformId;renderer;cd;el;styleClass;panelStyleClass;style;panelStyle;stateStorage="session";stateKey=null;layout="horizontal";gutterSize=4;step=5;minSizes=[];get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(l=>X.p.hasClass(l,"p-splitter-panel")),r=[];this.panels.map((l,o)=>{let h=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=h,n[o].style.flexBasis="calc("+h+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}onResizeEnd=new i.vpe;onResizeStart=new i.vpe;templates;containerViewChild;nested=!1;panels=[];dragging=!1;mouseMoveListener;mouseUpListener;touchMoveListener;touchEndListener;size;gutterElement;startPos;prevPanelElement;nextPanelElement;nextPanelSize;prevPanelSize;_panelSizes=[];prevPanelIndex;timer;prevSize;window;constructor(e,n,r,l,o){this.document=e,this.platformId=n,this.renderer=r,this.cd=l,this.el=o,this.window=this.document.defaultView}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(0,B.NF)(this.platformId)&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(l=>X.p.hasClass(l,"p-splitter-panel")),r=[];this.panels.map((l,o)=>{let h=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=h,n[o].style.flexBasis="calc("+h+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r,this.prevSize=parseFloat(r[0]).toFixed(4)}}}resizeStart(e,n,r){this.gutterElement=e.currentTarget||e.target.parentElement,this.size=this.horizontal()?X.p.getWidth(this.containerViewChild.nativeElement):X.p.getHeight(this.containerViewChild.nativeElement),r||(this.dragging=!0,this.startPos=this.horizontal()?e instanceof MouseEvent?e.pageX:e.changedTouches[0].pageX:e instanceof MouseEvent?e.pageY:e.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,r?(this.prevPanelSize=this.horizontal()?X.p.getOuterWidth(this.prevPanelElement,!0):X.p.getOuterHeight(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal()?X.p.getOuterWidth(this.nextPanelElement,!0):X.p.getOuterHeight(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal()?X.p.getOuterWidth(this.prevPanelElement,!0):X.p.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?X.p.getOuterWidth(this.nextPanelElement,!0):X.p.getOuterHeight(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=n,X.p.addClass(this.gutterElement,"p-splitter-gutter-resizing"),this.gutterElement.setAttribute("data-p-gutter-resizing","true"),X.p.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.containerViewChild.nativeElement.setAttribute("data-p-resizing","true"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e,n,r){let l,o,c;r?this.horizontal()?(o=100*(this.prevPanelSize+n)/this.size,c=100*(this.nextPanelSize-n)/this.size):(o=100*(this.prevPanelSize-n)/this.size,c=100*(this.nextPanelSize+n)/this.size):(l=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size,o=this.prevPanelSize+l,c=this.nextPanelSize-l),this.prevSize=parseFloat(o).toFixed(4),this.validateResize(o,c)&&(this.prevPanelElement.style.flexBasis="calc("+o+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+c+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=o,this._panelSizes[this.prevPanelIndex+1]=c)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),X.p.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),X.p.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchMove(e){this.onResize(e),e.preventDefault()}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}repeat(e,n,r){this.resizeStart(e,n,!0),this.onResize(e,r,!0)}setTimer(e,n,r){this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,n,r)},40)}clearTimer(){this.timer&&clearTimeout(this.timer)}onGutterKeyUp(e){this.clearTimer(),this.resizeEnd(e)}onGutterKeyDown(e,n){switch(e.code){case"ArrowLeft":"horizontal"===this.layout&&this.setTimer(e,n,-1*this.step),e.preventDefault();break;case"ArrowRight":"horizontal"===this.layout&&this.setTimer(e,n,this.step),e.preventDefault();break;case"ArrowDown":"vertical"===this.layout&&this.setTimer(e,n,-1*this.step),e.preventDefault();break;case"ArrowUp":"vertical"===this.layout&&this.setTimer(e,n,this.step),e.preventDefault()}}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=this.renderer.listen(this.document,"mousemove",e=>{this.onResize(e)})),this.mouseUpListener||(this.mouseUpListener=this.renderer.listen(this.document,"mouseup",e=>{this.resizeEnd(e),this.unbindMouseListeners()}))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=this.renderer.listen(this.document,"touchmove",e=>{this.onResize(e.changedTouches[0])})),this.touchEndListener||(this.touchEndListener=this.renderer.listen(this.document,"touchend",e=>{this.resizeEnd(e),this.unbindTouchListeners()}))}unbindMouseListeners(){this.mouseMoveListener&&(this.mouseMoveListener(),this.mouseMoveListener=null),this.mouseUpListener&&(this.mouseUpListener(),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(this.touchMoveListener(),this.touchMoveListener=null),this.touchEndListener&&(this.touchEndListener(),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!X.p.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){if(!(0,B.NF)(this.platformId))throw new Error("Storage is not a available by default on the server.");switch(this.stateStorage){case"local":return this.window.localStorage;case"session":return this.window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(l=>X.p.hasClass(l,"p-splitter-panel")).forEach((l,o)=>{l.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}static \u0275fac=function(n){return new(n||s)(i.Y36(B.K0),i.Y36(i.Lbi),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(i.SBq))};static \u0275cmp=i.Xpm({type:s,selectors:[["p-splitter"]],contentQueries:function(n,r,l){if(1&n&&i.Suo(l,v.jx,4),2&n){let o;i.iGM(o=i.CRH())&&(r.templates=o)}},viewQuery:function(n,r){if(1&n&&i.Gf(He,5),2&n){let l;i.iGM(l=i.CRH())&&(r.containerViewChild=l.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(n,r){2&n&&i.ekj("p-splitter-panel-nested",r.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",step:"step",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:8,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],["tabindex","-1",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter","role","separator","tabindex","-1",3,"mousedown","touchstart","touchmove","touchend",4,"ngIf"],["role","separator","tabindex","-1",1,"p-splitter-gutter",3,"mousedown","touchstart","touchmove","touchend"],["tabindex","0",1,"p-splitter-gutter-handle",3,"ngStyle","keyup","keydown"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0,1),i.YNc(2,g,3,8,"ng-template",2),i.qZA()),2&n&&(i.Tol(r.styleClass),i.Q6J("ngClass",r.containerClass())("ngStyle",r.style),i.uIk("data-pc-name","splitter")("data-p-gutter-resizing",!1)("data-pc-section","root"),i.xp6(2),i.Q6J("ngForOf",r.panels))},dependencies:[B.mk,B.sg,B.O5,B.tP,B.PC],styles:["@layer primeng{.p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex;min-width:0}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}}\n"],encapsulation:2,changeDetection:0})}return s})(),A=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez,v.m8]})}return s})();const F=function R(s,t){return s===t||s!=s&&t!=t},te=function q(s,t){for(var e=s.length;e--;)if(F(s[e][0],t))return e;return-1};var ae=Array.prototype.splice;function de(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}de.prototype.clear=function C(){this.__data__=[],this.size=0},de.prototype.delete=function ce(s){var t=this.__data__,e=te(t,s);return!(e<0||(e==t.length-1?t.pop():ae.call(t,e,1),--this.size,0))},de.prototype.get=function Te(s){var t=this.__data__,e=te(t,s);return e<0?void 0:t[e][1]},de.prototype.has=function re(s){return te(this.__data__,s)>-1},de.prototype.set=function ge(s,t){var e=this.__data__,n=te(e,s);return n<0?(++this.size,e.push([s,t])):e[n][1]=t,this};const me=de,on="object"==typeof global&&global&&global.Object===Object&&global;var tt="object"==typeof self&&self&&self.Object===Object&&self;const Je=on||tt||Function("return this")(),Qe=Je.Symbol;var jt=Object.prototype,Ke=jt.hasOwnProperty,kn=jt.toString,xt=Qe?Qe.toStringTag:void 0;var Bn=Object.prototype.toString;var Gt=Qe?Qe.toStringTag:void 0;const nt=function qt(s){return null==s?void 0===s?"[object Undefined]":"[object Null]":Gt&&Gt in Object(s)?function Xn(s){var t=Ke.call(s,xt),e=s[xt];try{s[xt]=void 0;var n=!0}catch{}var r=kn.call(s);return n&&(t?s[xt]=e:delete s[xt]),r}(s):function Qt(s){return Bn.call(s)}(s)},Ye=function Ot(s){var t=typeof s;return null!=s&&("object"==t||"function"==t)},hn=function ut(s){if(!Ye(s))return!1;var t=nt(s);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var s,es=Je["__core-js_shared__"],fn=(s=/[^.]+$/.exec(es&&es.keys&&es.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";var ns=Function.prototype.toString;const ht=function ss(s){if(null!=s){try{return ns.call(s)}catch{}try{return s+""}catch{}}return""};var De=/^\[object .+?Constructor\]$/,cs=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const us=function Pe(s){return!(!Ye(s)||function pn(s){return!!fn&&fn in s}(s))&&(hn(s)?cs:De).test(ht(s))},dt=function fs(s,t){var e=function hs(s,t){return s?.[t]}(s,t);return us(e)?e:void 0},wt=dt(Je,"Map"),ze=dt(Object,"create");var Yt=Object.prototype.hasOwnProperty;var Un=Object.prototype.hasOwnProperty;function Ct(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Ct.prototype.clear=function gn(){this.__data__=ze?ze(null):{},this.size=0},Ct.prototype.delete=function gs(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t},Ct.prototype.get=function mn(s){var t=this.__data__;if(ze){var e=t[s];return"__lodash_hash_undefined__"===e?void 0:e}return Yt.call(t,s)?t[s]:void 0},Ct.prototype.has=function vs(s){var t=this.__data__;return ze?void 0!==t[s]:Un.call(t,s)},Ct.prototype.set=function Ts(s,t){var e=this.__data__;return this.size+=this.has(s)?0:1,e[s]=ze&&void 0===t?"__lodash_hash_undefined__":t,this};const Fn=Ct,Ze=function ws(s,t){var e=s.__data__;return function ft(s){var t=typeof s;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==s:null===s}(t)?e["string"==typeof t?"string":"hash"]:e.map};function We(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}We.prototype.clear=function kt(){this.size=0,this.__data__={hash:new Fn,map:new(wt||me),string:new Fn}},We.prototype.delete=function Cs(s){var t=Ze(this,s).delete(s);return this.size-=t?1:0,t},We.prototype.get=function Ss(s){return Ze(this,s).get(s)},We.prototype.has=function Pn(s){return Ze(this,s).has(s)},We.prototype.set=function zn(s,t){var e=Ze(this,s),n=e.size;return e.set(s,t),this.size+=e.size==n?0:1,this};const Vt=We;function st(s){var t=this.__data__=new me(s);this.size=t.size}st.prototype.clear=function Le(){this.__data__=new me,this.size=0},st.prototype.delete=function rn(s){var t=this.__data__,e=t.delete(s);return this.size=t.size,e},st.prototype.get=function $n(s){return this.__data__.get(s)},st.prototype.has=function Pt(s){return this.__data__.has(s)},st.prototype.set=function Ns(s,t){var e=this.__data__;if(e instanceof me){var n=e.__data__;if(!wt||n.length<199)return n.push([s,t]),this.size=++e.size,this;e=this.__data__=new Vt(n)}return e.set(s,t),this.size=e.size,this};const Et=st;var it=function(){try{var s=dt(Object,"defineProperty");return s({},"",{}),s}catch{}}();const Bt=it,vn=function bn(s,t,e){"__proto__"==t&&Bt?Bt(s,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):s[t]=e},a=function Is(s,t,e){(void 0!==e&&!F(s[t],e)||void 0===e&&!(t in s))&&vn(s,t,e)};var b=function u(s){return function(t,e,n){for(var r=-1,l=Object(t),o=n(t),c=o.length;c--;){var h=o[s?c:++r];if(!1===e(l[h],h,l))break}return t}}();const se=b;var z="object"==typeof exports&&exports&&!exports.nodeType&&exports,ue=z&&"object"==typeof module&&module&&!module.nodeType&&module,Ie=ue&&ue.exports===z?Je.Buffer:void 0,_e=Ie?Ie.allocUnsafe:void 0;const Fe=function Re(s,t){if(t)return s.slice();var e=s.length,n=_e?_e(e):new s.constructor(e);return s.copy(n),n},Oe=Je.Uint8Array,rt=function ke(s){var t=new s.constructor(s.byteLength);return new Oe(t).set(new Oe(s)),t},St=function gt(s,t){var e=t?rt(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.length)},yn=function Zs(s,t){var e=-1,n=s.length;for(t||(t=Array(n));++e<n;)t[e]=s[e];return t};var xn=Object.create,uo=function(){function s(){}return function(t){if(!Ye(t))return{};if(xn)return xn(t);s.prototype=t;var e=new s;return s.prototype=void 0,e}}();const ho=uo,ur=function fo(s,t){return function(e){return s(t(e))}},mi=ur(Object.getPrototypeOf,Object);var go=Object.prototype;const _i=function mo(s){var t=s&&s.constructor;return s===("function"==typeof t&&t.prototype||go)},hr=function _o(s){return"function"!=typeof s.constructor||_i(s)?{}:ho(mi(s))},Dt=function bo(s){return null!=s&&"object"==typeof s},dr=function yo(s){return Dt(s)&&"[object Arguments]"==nt(s)};var fr=Object.prototype,xo=fr.hasOwnProperty,To=fr.propertyIsEnumerable,wo=dr(function(){return arguments}())?dr:function(s){return Dt(s)&&xo.call(s,"callee")&&!To.call(s,"callee")};const bi=wo,Tn=Array.isArray,pr=function So(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991},Gs=function Ao(s){return null!=s&&pr(s.length)&&!hn(s)};var gr="object"==typeof exports&&exports&&!exports.nodeType&&exports,mr=gr&&"object"==typeof module&&module&&!module.nodeType&&module,_r=mr&&mr.exports===gr?Je.Buffer:void 0;const Ls=(_r?_r.isBuffer:void 0)||function Lo(){return!1};var br=Function.prototype.toString,Uo=Object.prototype.hasOwnProperty,Fo=br.call(Object);var Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object Boolean]"]=Se["[object DataView]"]=Se["[object Date]"]=Se["[object Error]"]=Se["[object Function]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object WeakMap]"]=!1;const vi=function pa(s){return function(t){return s(t)}};var vr="object"==typeof exports&&exports&&!exports.nodeType&&exports,qs=vr&&"object"==typeof module&&module&&!module.nodeType&&module,yi=qs&&qs.exports===vr&&on.process;const Qn=function(){try{return qs&&qs.require&&qs.require("util").types||yi&&yi.binding&&yi.binding("util")}catch{}}();var yr=Qn&&Qn.isTypedArray;const xi=yr?vi(yr):function da(s){return Dt(s)&&pr(s.length)&&!!Se[nt(s)]},Ti=function ba(s,t){if(("constructor"!==t||"function"!=typeof s[t])&&"__proto__"!=t)return s[t]};var ya=Object.prototype.hasOwnProperty;const xr=function xa(s,t,e){var n=s[t];(!ya.call(s,t)||!F(n,e)||void 0===e&&!(t in s))&&vn(s,t,e)},Os=function Ta(s,t,e,n){var r=!e;e||(e={});for(var l=-1,o=t.length;++l<o;){var c=t[l],h=n?n(e[c],s[c],c,e,s):void 0;void 0===h&&(h=s[c]),r?vn(e,c,h):xr(e,c,h)}return e};var Sa=/^(?:0|[1-9]\d*)$/;const Tr=function Aa(s,t){var e=typeof s;return!!(t=t??9007199254740991)&&("number"==e||"symbol"!=e&&Sa.test(s))&&s>-1&&s%1==0&&s<t};var Ia=Object.prototype.hasOwnProperty;const wr=function La(s,t){var e=Tn(s),n=!e&&bi(s),r=!e&&!n&&Ls(s),l=!e&&!n&&!r&&xi(s),o=e||n||r||l,c=o?function wa(s,t){for(var e=-1,n=Array(s);++e<s;)n[e]=t(e);return n}(s.length,String):[],h=c.length;for(var p in s)(t||Ia.call(s,p))&&(!o||!("length"==p||r&&("offset"==p||"parent"==p)||l&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||Tr(p,h)))&&c.push(p);return c};var ka=Object.prototype.hasOwnProperty;const Da=function Ba(s){if(!Ye(s))return function qa(s){var t=[];if(null!=s)for(var e in Object(s))t.push(e);return t}(s);var t=_i(s),e=[];for(var n in s)"constructor"==n&&(t||!ka.call(s,n))||e.push(n);return e},Ms=function Ra(s){return Gs(s)?wr(s,!0):Da(s)},za=function Pa(s,t,e,n,r,l,o){var c=Ti(s,e),h=Ti(t,e),p=o.get(h);if(p)a(s,e,p);else{var y=l?l(c,h,e+"",s,t,o):void 0,L=void 0===y;if(L){var O=Tn(h),V=!O&&Ls(h),K=!O&&!V&&xi(h);y=h,O||V||K?Tn(c)?y=c:function No(s){return Dt(s)&&Gs(s)}(c)?y=yn(c):V?(L=!1,y=Fe(h,!0)):K?(L=!1,y=St(h,!0)):y=[]:function Po(s){if(!Dt(s)||"[object Object]"!=nt(s))return!1;var t=mi(s);if(null===t)return!0;var e=Uo.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&br.call(e)==Fo}(h)||bi(h)?(y=c,bi(c)?y=function Ua(s){return Os(s,Ms(s))}(c):(!Ye(c)||hn(c))&&(y=hr(h))):L=!1}L&&(o.set(h,y),r(y,h,n,l,o),o.delete(h)),a(s,e,y)}},ja=function Cr(s,t,e,n,r){s!==t&&se(t,function(l,o){if(r||(r=new Et),Ye(l))za(s,t,o,e,Cr,n,r);else{var c=n?n(Ti(s,o),l,o+"",s,t,r):void 0;void 0===c&&(c=l),a(s,o,c)}},Ms)},Er=function Ha(s){return s};var Sr=Math.max;const Ya=function Ka(s){return function(){return s}};var Va=Bt?function(s,t){return Bt(s,"toString",{configurable:!0,enumerable:!1,value:Ya(t),writable:!0})}:Er,ec=Date.now,nc=function tc(s){var t=0,e=0;return function(){var n=ec(),r=16-(n-e);if(e=n,r>0){if(++t>=800)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}(Va);const sc=nc,rc=function ic(s,t){return sc(function Ga(s,t,e){return t=Sr(void 0===t?s.length-1:t,0),function(){for(var n=arguments,r=-1,l=Sr(n.length-t,0),o=Array(l);++r<l;)o[r]=n[t+r];r=-1;for(var c=Array(t+1);++r<t;)c[r]=n[r];return c[t]=e(o),function Qa(s,t,e){switch(e.length){case 0:return s.call(t);case 1:return s.call(t,e[0]);case 2:return s.call(t,e[0],e[1]);case 3:return s.call(t,e[0],e[1],e[2])}return s.apply(t,e)}(s,this,c)}}(s,t,Er),s+"")};var cc=function ac(s){return rc(function(t,e){var n=-1,r=e.length,l=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(l=s.length>3&&"function"==typeof l?(r--,l):void 0,o&&function lc(s,t,e){if(!Ye(e))return!1;var n=typeof t;return!!("number"==n?Gs(e)&&Tr(t,e.length):"string"==n&&t in e)&&F(e[t],s)}(e[0],e[1],o)&&(l=r<3?void 0:l,r=1),t=Object(t);++n<r;){var c=e[n];c&&s(t,c,n,l)}return t})}(function(s,t,e){ja(s,t,e)});const Wt=cc,fc=ur(Object.keys,Object);var gc=Object.prototype.hasOwnProperty;const wi=function bc(s){return Gs(s)?wr(s):function mc(s){if(!_i(s))return fc(s);var t=[];for(var e in Object(s))gc.call(s,e)&&"constructor"!=e&&t.push(e);return t}(s)},Ar=function Ec(){return[]};var Ac=Object.prototype.propertyIsEnumerable,Nr=Object.getOwnPropertySymbols,Nc=Nr?function(s){return null==s?[]:(s=Object(s),function wc(s,t){for(var e=-1,n=null==s?0:s.length,r=0,l=[];++e<n;){var o=s[e];t(o,e,s)&&(l[r++]=o)}return l}(Nr(s),function(t){return Ac.call(s,t)}))}:Ar;const Ci=Nc,Ir=function qc(s,t){for(var e=-1,n=t.length,r=s.length;++e<n;)s[r+e]=t[e];return s};var Mc=Object.getOwnPropertySymbols?function(s){for(var t=[];s;)Ir(t,Ci(s)),s=mi(s);return t}:Ar;const Lr=Mc,qr=function Dc(s,t,e){var n=t(s);return Tn(s)?n:Ir(n,e(s))},Ei=function Rc(s){return qr(s,wi,Ci)},Fc=function Uc(s){return qr(s,Ms,Lr)},Si=dt(Je,"DataView"),Ai=dt(Je,"Promise"),Ni=dt(Je,"Set"),Ii=dt(Je,"WeakMap");var Or="[object Map]",Mr="[object Promise]",kr="[object Set]",Br="[object WeakMap]",Dr="[object DataView]",Zc=ht(Si),Gc=ht(wt),Jc=ht(Ai),Kc=ht(Ni),Yc=ht(Ii),wn=nt;(Si&&wn(new Si(new ArrayBuffer(1)))!=Dr||wt&&wn(new wt)!=Or||Ai&&wn(Ai.resolve())!=Mr||Ni&&wn(new Ni)!=kr||Ii&&wn(new Ii)!=Br)&&(wn=function(s){var t=nt(s),e="[object Object]"==t?s.constructor:void 0,n=e?ht(e):"";if(n)switch(n){case Zc:return Dr;case Gc:return Or;case Jc:return Mr;case Kc:return kr;case Yc:return Br}return t});const ks=wn;var $c=Object.prototype.hasOwnProperty;var nu=/\w*$/;var Rr=Qe?Qe.prototype:void 0,Ur=Rr?Rr.valueOf:void 0;const Au=function Su(s,t,e){var n=s.constructor;switch(t){case"[object ArrayBuffer]":return rt(s);case"[object Boolean]":case"[object Date]":return new n(+s);case"[object DataView]":return function eu(s,t){var e=t?rt(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.byteLength)}(s,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return St(s,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(s);case"[object RegExp]":return function su(s){var t=new s.constructor(s.source,nu.exec(s));return t.lastIndex=s.lastIndex,t}(s);case"[object Symbol]":return function ru(s){return Ur?Object(Ur.call(s)):{}}(s)}};var Fr=Qn&&Qn.isMap;const Ou=Fr?vi(Fr):function Iu(s){return Dt(s)&&"[object Map]"==ks(s)};var Pr=Qn&&Qn.isSet;const Ru=Pr?vi(Pr):function ku(s){return Dt(s)&&"[object Set]"==ks(s)};var zr="[object Arguments]",jr="[object Function]",Hr="[object Object]",Ce={};Ce[zr]=Ce["[object Array]"]=Ce["[object ArrayBuffer]"]=Ce["[object DataView]"]=Ce["[object Boolean]"]=Ce["[object Date]"]=Ce["[object Float32Array]"]=Ce["[object Float64Array]"]=Ce["[object Int8Array]"]=Ce["[object Int16Array]"]=Ce["[object Int32Array]"]=Ce["[object Map]"]=Ce["[object Number]"]=Ce[Hr]=Ce["[object RegExp]"]=Ce["[object Set]"]=Ce["[object String]"]=Ce["[object Symbol]"]=Ce["[object Uint8Array]"]=Ce["[object Uint8ClampedArray]"]=Ce["[object Uint16Array]"]=Ce["[object Uint32Array]"]=!0,Ce["[object Error]"]=Ce[jr]=Ce["[object WeakMap]"]=!1;const uh=function Js(s,t,e,n,r,l){var o,c=1&t,h=2&t,p=4&t;if(e&&(o=r?e(s,n,r,l):e(s)),void 0!==o)return o;if(!Ye(s))return s;var y=Tn(s);if(y){if(o=function Wc(s){var t=s.length,e=new s.constructor(t);return t&&"string"==typeof s[0]&&$c.call(s,"index")&&(e.index=s.index,e.input=s.input),e}(s),!c)return yn(s,o)}else{var L=ks(s),O=L==jr||"[object GeneratorFunction]"==L;if(Ls(s))return Fe(s,c);if(L==Hr||L==zr||O&&!r){if(o=h||O?{}:hr(s),!c)return h?function kc(s,t){return Os(s,Lr(s),t)}(s,function xc(s,t){return s&&Os(t,Ms(t),s)}(o,s)):function Ic(s,t){return Os(s,Ci(s),t)}(s,function vc(s,t){return s&&Os(t,wi(t),s)}(o,s))}else{if(!Ce[L])return r?s:{};o=Au(s,L,c)}}l||(l=new Et);var V=l.get(s);if(V)return V;l.set(s,o),Ru(s)?s.forEach(function(W){o.add(Js(W,t,e,W,s,l))}):Ou(s)&&s.forEach(function(W,ye){o.set(ye,Js(W,t,e,ye,s,l))});var Ae=y?void 0:(p?h?Fc:Ei:h?Ms:wi)(s);return function uc(s,t){for(var e=-1,n=null==s?0:s.length;++e<n&&!1!==t(s[e],e,s););}(Ae||s,function(W,ye){Ae&&(W=s[ye=W]),xr(o,ye,Js(W,t,e,ye,s,l))}),o},Cn=function fh(s){return uh(s,5)};var j=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(j||{});class At{constructor(t,e,n={}){this.attrName=t,this.keyName=e,this.scope=null!=n.scope?n.scope&j.LEVEL|j.TYPE&j.ATTRIBUTE:j.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Zn extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const Qr=class ar{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(t,e,n){const r=this.query(e);if(null==r)throw new Zn(`Unable to create ${e} blot`);const l=r,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:l.create(n),c=new l(t,o,n);return ar.blots.set(c.domNode,c),c}find(t,e=!1){return ar.find(t,e)}query(t,e=j.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&j.LEVEL&j.BLOCK?n=this.types.block:t&j.LEVEL&j.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(r=>(n=this.classes[r],!!n)),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&j.LEVEL&n.scope&&e&j.TYPE&n.scope?n:null}register(...t){return t.map(e=>{const n="blotName"in e,r="attrName"in e;if(!n&&!r)throw new Zn("Invalid definition");if(n&&"abstract"===e.blotName)throw new Zn("Cannot register abstract class");return this.types[n?e.blotName:r?e.attrName:void 0]=e,r?"string"==typeof e.keyName&&(this.attributes[e.keyName]=e):n&&(e.className&&(this.classes[e.className]=e),e.tagName&&(e.tagName=Array.isArray(e.tagName)?e.tagName.map(o=>o.toUpperCase()):e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(o=>{(null==this.tags[o]||null==e.className)&&(this.tags[o]=e)}))),e})}};Qr.blots=new WeakMap;let Bs=Qr;function Zr(s,t){return(s.getAttribute("class")||"").split(/\s+/).filter(e=>0===e.indexOf(`${t}-`))}class mt extends At{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){Zr(t,this.keyName).forEach(e=>{t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(Zr(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}function Li(s){const t=s.split("-"),e=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+e}class Xt extends At{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[Li(this.keyName)]=e,!0)}remove(t){t.style[Li(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Li(this.keyName)];return this.canAdd(t,e)?e:""}}class Ks{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Bs.find(this.domNode);if(null==t)return;const e=At.keys(this.domNode),n=mt.keys(this.domNode),r=Xt.keys(this.domNode);e.concat(n).concat(r).forEach(l=>{const o=t.scroll.query(l,j.ATTRIBUTE);o instanceof At&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Gr=class{constructor(t,e){this.scroll=t,this.domNode=e,Bs.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new Zn("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),Bs.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,r){const l=this.isolate(t,e);if(null!=this.scroll.query(n,j.BLOT)&&r)l.wrap(n,r);else if(null!=this.scroll.query(n,j.ATTRIBUTE)){const o=this.scroll.create(this.statics.scope);l.wrap(o),o.format(n,r)}}insertAt(t,e,n){const r=null==n?this.scroll.create("text",e):this.scroll.create(e,n),l=this.split(t);this.parent.insertBefore(r,l||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new Zn(`Cannot wrap ${t}`);return n.appendChild(this),n}};Gr.blotName="abstract";let Jr=Gr;const Kr=class extends Jr{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Kr.scope=j.INLINE_BLOT;let je=Kr;class ph{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),r=0;for(;n;){if(n===t)return r;r+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let r=n();for(;r;){const l=r.length();if(t<l||e&&t===l&&(null==r.next||0!==r.next.length()))return[r,t];t-=l,r=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[r,l]=this.find(t);let o=t-l;const c=this.iterator(r);let h=c();for(;h&&o<t+e;){const p=h.length();t>o?n(h,t-o,Math.min(e,o+p-t)):n(h,0,Math.min(p,t+e-o)),o+=p,h=c()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let r=n();for(;r;)e=t(e,r),r=n();return e}}function Yr(s,t){const e=t.find(s);if(e)return e;try{return t.create(s)}catch{const n=t.create(j.INLINE);return Array.from(s.childNodes).forEach(r=>{n.domNode.appendChild(r)}),s.parentNode&&s.parentNode.replaceChild(n.domNode,s),n.attach(),n}}const Vr=class sn extends Jr{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,sn.uiClass&&this.uiNode.classList.add(sn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new ph,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=Yr(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Zn)return;throw e}})}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(n,r,l)=>{n.deleteAt(r,l)})}descendant(t,e=0){const[n,r]=this.children.find(e);return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,r]:n instanceof sn?n.descendant(t,r):[null,-1]}descendants(t,e=0,n=Number.MAX_VALUE){let r=[],l=n;return this.children.forEachAt(e,n,(o,c,h)=>{(null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t)&&r.push(o),o instanceof sn&&(r=r.concat(o.descendants(t,c,l))),l-=h}),r}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(n=>e instanceof n)||(e.statics.scope===j.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof sn?e.unwrap():e.remove())})}formatAt(t,e,n,r){this.children.forEachAt(t,e,(l,o,c)=>{l.formatAt(o,c,n,r)})}insertAt(t,e,n){const[r,l]=this.children.find(t);if(r)r.insertAt(l,e,n);else{const o=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(o)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[n,r]=this.children.find(t,e),l=[[this,t]];return n instanceof sn?l.concat(n.path(r,e)):(null!=n&&l.push([n,r]),l)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return n instanceof sn&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(r,l,o)=>{const c=r.split(l,e);null!=c&&n.appendChild(c)}),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],r=[];t.forEach(l=>{l.target===this.domNode&&"childList"===l.type&&(n.push(...l.addedNodes),r.push(...l.removedNodes))}),r.forEach(l=>{if(null!=l.parentNode&&"IFRAME"!==l.tagName&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(l);null!=o&&(null==o.domNode.parentNode||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,o)=>l===o?0:l.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let o=null;null!=l.nextSibling&&(o=this.scroll.find(l.nextSibling));const c=Yr(l,this.scroll);(c.next!==o||null==c.next)&&(null!=c.parent&&c.parent.removeChild(this),this.insertBefore(c,o||void 0))}),this.enforceAllowedChildren()}};Vr.uiClass="";let _t=Vr;const Gn=class Vn extends _t{constructor(t,e){super(t,e),this.attributes=new Ks(this.domNode)}static create(t){return super.create(t)}static formats(t,e){const n=e.query(Vn.blotName);if(null==n||t.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}format(t,e){if(t!==this.statics.blotName||e){const n=this.scroll.query(t,j.INLINE);if(null==n)return;n instanceof At?this.attributes.attribute(n,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}else this.children.forEach(n=>{n instanceof Vn||(n=n.wrap(Vn.blotName,!0)),this.attributes.copy(n)}),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.formats()[n]||this.scroll.query(n,j.ATTRIBUTE)?this.isolate(t,e).format(n,r):super.formatAt(t,e,n,r)}optimize(t){super.optimize(t);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const n=this.next;n instanceof Vn&&n.prev===this&&function gh(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(s[e]!==t[e])return!1;return!0}(e,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&"attributes"===n.type)&&this.attributes.build()}wrap(t,e){const n=super.wrap(t,e);return n instanceof Vn&&this.attributes.move(n),n}};Gn.allowedChildren=[Gn,je],Gn.blotName="inline",Gn.scope=j.INLINE_BLOT,Gn.tagName="SPAN";let qi=Gn;const Jn=class cr extends _t{constructor(t,e){super(t,e),this.attributes=new Ks(this.domNode)}static create(t){return super.create(t)}static formats(t,e){const n=e.query(cr.blotName);if(null==n||t.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}format(t,e){const n=this.scroll.query(t,j.BLOCK);null!=n&&(n instanceof At?this.attributes.attribute(n,e):t!==this.statics.blotName||e?e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e):this.replaceWith(cr.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.scroll.query(n,j.BLOCK)?this.format(n,r):super.formatAt(t,e,n,r)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,j.INLINE))super.insertAt(t,e,n);else{const r=this.split(t);if(null==r)throw new Error("Attempt to insertAt after block boundaries");{const l=this.scroll.create(e,n);r.parent.insertBefore(l,r)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&"attributes"===n.type)&&this.attributes.build()}};Jn.blotName="block",Jn.scope=j.BLOCK_BLOT,Jn.tagName="P",Jn.allowedChildren=[qi,Jn,je];let Ds=Jn;const Oi=class extends _t{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,r){super.formatAt(t,e,n,r),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Oi.blotName="container",Oi.scope=j.BLOCK_BLOT;let Ys=Oi;class Xe extends je{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,r){0===t&&e===this.length()?this.format(n,r):super.formatAt(t,e,n,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const mh={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Kn=class extends _t{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,mh),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=j.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,r){this.update(),super.formatAt(t,e,n,r)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;r.length>0;)t.push(r.pop());const l=(h,p=!0)=>{null==h||h===this||null!=h.domNode.parentNode&&(n.has(h.domNode)||n.set(h.domNode,[]),p&&l(h.parent))},o=h=>{n.has(h.domNode)&&(h instanceof _t&&h.children.forEach(o),n.delete(h.domNode),h.optimize(e))};let c=t;for(let h=0;c.length>0;h+=1){if(h>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(p=>{const y=this.find(p.target,!0);null!=y&&(y.domNode===p.target&&("childList"===p.type?(l(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(L=>{const O=this.find(L,!1);l(O,!1),O instanceof _t&&O.children.forEach(V=>{l(V,!1)})})):"attributes"===p.type&&l(y.prev)),l(y))}),this.children.forEach(o),c=Array.from(this.observer.takeRecords()),r=c.slice();r.length>0;)t.push(r.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(r=>{const l=this.find(r.target,!0);return null==l?null:n.has(l.domNode)?(n.get(l.domNode).push(r),null):(n.set(l.domNode,[r]),l)}).forEach(r=>{null!=r&&r!==this&&n.has(r.domNode)&&r.update(n.get(r.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};Kn.blotName="scroll",Kn.defaultChild=Ds,Kn.allowedChildren=[Ds,Ys],Kn.scope=j.BLOCK_BLOT,Kn.tagName="DIV";let Mi=Kn;const ki=class co extends je{constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}static create(t){return document.createTextNode(t)}static value(t){return t.data}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof co&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(n=>"characterData"===n.type&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ki.blotName="text",ki.scope=j.INLINE_BLOT;let Vs=ki;var lt=w(2727),P=w.n(lt);function $s(s){var t=-1,e=null==s?0:s.length;for(this.__data__=new Vt;++t<e;)this.add(s[t])}$s.prototype.add=$s.prototype.push=function vh(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this},$s.prototype.has=function xh(s){return this.__data__.has(s)};const wh=$s,Eh=function Ch(s,t){for(var e=-1,n=null==s?0:s.length;++e<n;)if(t(s[e],e,s))return!0;return!1},Ah=function Sh(s,t){return s.has(t)},$r=function Lh(s,t,e,n,r,l){var o=1&e,c=s.length,h=t.length;if(c!=h&&!(o&&h>c))return!1;var p=l.get(s),y=l.get(t);if(p&&y)return p==t&&y==s;var L=-1,O=!0,V=2&e?new wh:void 0;for(l.set(s,t),l.set(t,s);++L<c;){var K=s[L],Ae=t[L];if(n)var W=o?n(Ae,K,L,t,s,l):n(K,Ae,L,s,t,l);if(void 0!==W){if(W)continue;O=!1;break}if(V){if(!Eh(t,function(ye,yt){if(!Ah(V,yt)&&(K===ye||r(K,ye,e,n,l)))return V.push(yt)})){O=!1;break}}else if(K!==Ae&&!r(K,Ae,e,n,l)){O=!1;break}}return l.delete(s),l.delete(t),O},Oh=function qh(s){var t=-1,e=Array(s.size);return s.forEach(function(n,r){e[++t]=[r,n]}),e},kh=function Mh(s){var t=-1,e=Array(s.size);return s.forEach(function(n){e[++t]=n}),e};var Wr=Qe?Qe.prototype:void 0,Bi=Wr?Wr.valueOf:void 0;var Wh=Object.prototype.hasOwnProperty;var Xr="[object Arguments]",el="[object Array]",Ws="[object Object]",tl=Object.prototype.hasOwnProperty;const id=function sd(s,t,e,n,r,l){var o=Tn(s),c=Tn(t),h=o?el:ks(s),p=c?el:ks(t),y=(h=h==Xr?Ws:h)==Ws,L=(p=p==Xr?Ws:p)==Ws,O=h==p;if(O&&Ls(s)){if(!Ls(t))return!1;o=!0,y=!1}if(O&&!y)return l||(l=new Et),o||xi(s)?$r(s,t,e,n,r,l):function Kh(s,t,e,n,r,l,o){switch(e){case"[object DataView]":if(s.byteLength!=t.byteLength||s.byteOffset!=t.byteOffset)return!1;s=s.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(s.byteLength!=t.byteLength||!l(new Oe(s),new Oe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return F(+s,+t);case"[object Error]":return s.name==t.name&&s.message==t.message;case"[object RegExp]":case"[object String]":return s==t+"";case"[object Map]":var c=Oh;case"[object Set]":if(c||(c=kh),s.size!=t.size&&!(1&n))return!1;var p=o.get(s);if(p)return p==t;n|=2,o.set(s,t);var y=$r(c(s),c(t),n,r,l,o);return o.delete(s),y;case"[object Symbol]":if(Bi)return Bi.call(s)==Bi.call(t)}return!1}(s,t,h,e,n,r,l);if(!(1&e)){var V=y&&tl.call(s,"__wrapped__"),K=L&&tl.call(t,"__wrapped__");if(V||K){var Ae=V?s.value():s,W=K?t.value():t;return l||(l=new Et),r(Ae,W,e,n,l)}}return!!O&&(l||(l=new Et),function Xh(s,t,e,n,r,l){var o=1&e,c=Ei(s),h=c.length;if(h!=Ei(t).length&&!o)return!1;for(var L=h;L--;){var O=c[L];if(!(o?O in t:Wh.call(t,O)))return!1}var V=l.get(s),K=l.get(t);if(V&&K)return V==t&&K==s;var Ae=!0;l.set(s,t),l.set(t,s);for(var W=o;++L<h;){var ye=s[O=c[L]],yt=t[O];if(n)var ao=o?n(yt,ye,O,t,s,l):n(ye,yt,O,s,t,l);if(!(void 0===ao?ye===yt||r(ye,yt,e,n,l):ao)){Ae=!1;break}W||(W="constructor"==O)}if(Ae&&!W){var pi=s.constructor,gi=t.constructor;pi!=gi&&"constructor"in s&&"constructor"in t&&!("function"==typeof pi&&pi instanceof pi&&"function"==typeof gi&&gi instanceof gi)&&(Ae=!1)}return l.delete(s),l.delete(t),Ae}(s,t,e,n,r,l))},rd=function nl(s,t,e,n,r){return s===t||(null==s||null==t||!Dt(s)&&!Dt(t)?s!=s&&t!=t:id(s,t,e,n,nl,r))},Di=function ld(s,t){return rd(s,t)},Rt=(()=>{class s extends Xe{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}return s.blotName="break",s.tagName="BR",s})();class bt extends Vs{}function Xs(s){return s.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]))}const en=(()=>{class s extends qi{static allowedChildren=[s,Rt,Xe,bt];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const r=s.order.indexOf(e),l=s.order.indexOf(n);return r>=0||l>=0?r-l:e===n?0:e<n?-1:1}formatAt(e,n,r,l){if(s.compare(this.statics.blotName,r)<0&&this.scroll.query(r,j.BLOT)){const o=this.isolate(e,n);l&&o.wrap(r,l)}else super.formatAt(e,n,r,l)}optimize(e){if(super.optimize(e),this.parent instanceof s&&s.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}return s})();let et=(()=>{class s extends Ds{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=il(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,r,l){n<=0||(this.scroll.query(r,j.BLOCK)?e+n===this.length()&&this.format(r,l):super.formatAt(e,Math.min(n,this.length()-e-1),r,l),this.cache={})}insertAt(e,n,r){if(null!=r)return super.insertAt(e,n,r),void(this.cache={});if(0===n.length)return;const l=n.split("\n"),o=l.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let c=this;l.reduce((h,p)=>(c=c.split(h,!0),c.insertAt(0,p),p.length),e+o.length)}insertBefore(e,n){const{head:r}=this.children;super.insertBefore(e,n),r instanceof Rt&&r.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){const l=this.clone();return 0===e?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const r=super.split(e,n);return this.cache={},r}}return s.blotName="block",s.tagName="P",s.defaultChild=Rt,s.allowedChildren=[Rt,en,Xe,bt],s})();class ot extends Xe{attach(){super.attach(),this.attributes=new Ks(this.domNode)}delta(){return(new(P())).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,j.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,r){this.format(n,r)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const r=e.split("\n"),l=r.pop(),o=r.map(h=>{const p=this.scroll.create(et.blotName);return p.insertAt(0,h),p}),c=this.split(t);o.forEach(h=>{this.parent.insertBefore(h,c)}),l&&this.parent.insertBefore(this.scroll.create("text",l),c)}}function il(s){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.descendants(je).reduce((e,n)=>0===n.length()?e:e.insert(n.value(),at(n,{},t)),new(P())).insert("\n",at(s))}function at(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==s||("formats"in s&&"function"==typeof s.formats&&(t={...t,...s.formats()},e&&delete t["code-token"]),null==s.parent||"scroll"===s.parent.statics.blotName||s.parent.statics.scope!==s.statics.scope)?t:at(s.parent,t,e)}ot.scope=j.BLOCK_BLOT;const ei=(()=>{class s extends Xe{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(s.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(e,n){if(0!==this.savedLength)return void super.format(e,n);let r=this,l=0;for(;null!=r&&r.statics.scope!==j.BLOCK_BLOT;)l+=r.offset(r.parent),r=r.parent;null!=r&&(this.savedLength=s.CONTENTS.length,r.optimize(),r.formatAt(l,s.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const e=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof bt?this.prev:null,r=n?n.length():0,l=this.next instanceof bt?this.next:null,o=l?l.text:"",{textNode:c}=this,h=c.data.split(s.CONTENTS).join("");let p;if(c.data=s.CONTENTS,n)p=n,(h||l)&&(n.insertAt(n.length(),h+o),l&&l.remove());else if(l)p=l,l.insertAt(0,h);else{const y=document.createTextNode(h);p=this.scroll.create(y),this.parent.insertBefore(p,this)}if(this.remove(),e){const y=(V,K)=>n&&V===n.domNode?K:V===c?r+K-1:l&&V===l.domNode?r+h.length+K:null,L=y(e.start.node,e.start.offset),O=y(e.end.node,e.end.offset);if(null!==L&&null!==O)return{startNode:p.domNode,startOffset:L,endNode:p.domNode,endOffset:O}}return null}update(e,n){if(e.some(r=>"characterData"===r.type&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if("A"===n.domNode.tagName){this.savedLength=s.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}return s})();var od=w(1472);const Ri=new WeakMap,Ui=["error","warn","log","info"];let Fi="warn";function rl(s){if(Fi&&Ui.indexOf(s)<=Ui.indexOf(Fi)){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];console[s](...e)}}function Pi(s){return Ui.reduce((t,e)=>(t[e]=rl.bind(console,e,s),t),{})}Pi.level=s=>{Fi=s},rl.level=Pi.level;const En=Pi,zi=En("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(s=>{document.addEventListener(s,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(r=>{const l=Ri.get(r);l&&l.emitter&&l.emitter.handleDOM(...e)})})});const U=(()=>class s extends od{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",zi.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zi.log.call(zi,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];(this.domListeners[e.type]||[]).forEach(o=>{let{node:c,handler:h}=o;(e.target===c||c.contains(e.target))&&h(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}})(),ji=En("quill:selection");class Sn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}class ad{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Sn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,U.sources.USER),1)}),this.emitter.on(U.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();null!=n&&n.start.node!==this.cursor.textNode&&this.emitter.once(U.events.SCROLL_UPDATE,(r,l)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=l.some(c=>"characterData"===c.type||"childList"===c.type||"attributes"===c.type&&c.target===this.root);this.update(o?U.sources.SILENT:r)}catch{}})}),this.emitter.on(U.events.SCROLL_OPTIMIZE,(n,r)=>{if(r.range){const{startNode:l,startOffset:o,endNode:c,endOffset:h}=r.range;this.setNativeRange(l,o,c,h),this.update(U.sources.SILENT)}}),this.update(U.sources.SILENT)}handleComposition(){this.emitter.on(U.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(U.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(U.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,j.BLOCK)){if(n.start.node!==this.cursor.textNode){const r=this.scroll.find(n.start.node,!1);if(null==r)return;if(r instanceof je){const l=r.split(n.start.offset);r.parent.insertBefore(this.cursor,l)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let r,[l,o]=this.scroll.leaf(t);if(null==l)return null;if(e>0&&o===l.length()){const[y]=this.scroll.leaf(t+1);if(y){const[L]=this.scroll.line(t),[O]=this.scroll.line(t+1);L===O&&(l=y,o=0)}}[r,o]=l.position(o,!0);const c=document.createRange();if(e>0)return c.setStart(r,o),[l,o]=this.scroll.leaf(t+e),null==l?null:([r,o]=l.position(o,!0),c.setEnd(r,o),c.getBoundingClientRect());let p,h="left";if(r instanceof Text){if(!r.data.length)return null;o<r.data.length?(c.setStart(r,o),c.setEnd(r,o+1)):(c.setStart(r,o-1),c.setEnd(r,o),h="right"),p=c.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;p=l.domNode.getBoundingClientRect(),o>0&&(h="right")}return{bottom:p.top+p.height,height:p.height,left:p[h],right:p[h],top:p.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return ji.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&Hi(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map(o=>{const[c,h]=o,p=this.scroll.find(c,!0),y=p.offset(this.scroll);return 0===h?y:p instanceof je?y+p.index(c,h):y+p.length()}),r=Math.min(Math.max(...n),this.scroll.length()-1),l=Math.min(r,...n);return new Sn(l,r-l)}normalizeNative(t){if(!Hi(this.root,t.startContainer)||!t.collapsed&&!Hi(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(n=>{let{node:r,offset:l}=n;for(;!(r instanceof Text)&&r.childNodes.length>0;)if(r.childNodes.length>l)r=r.childNodes[l],l=0;else{if(r.childNodes.length!==l)break;r=r.lastChild,l=r instanceof Text?r.data.length:r.childNodes.length>0?r.childNodes.length:r.childNodes.length+1}n.node=r,n.offset=l}),e}rangeToNative(t){const e=this.scroll.length(),n=(r,l)=>{r=Math.min(e-1,r);const[o,c]=this.scroll.leaf(r);return o?o.position(c,l):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(ji.info("setNativeRange",t,e,n,r),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(null==c||l||t!==c.startContainer||e!==c.startOffset||n!==c.endContainer||r!==c.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const h=document.createRange();h.setStart(t,e),h.setEnd(n,r),o.removeAllRanges(),o.addRange(h)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U.sources.API;if("string"==typeof e&&(n=e,e=!1),ji.info("setRange",t),null!=t){const r=this.rangeToNative(t);this.setNativeRange(...r,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.sources.USER;const e=this.lastRange,[n,r]=this.getRange();if(this.lastRange=n,this.lastNative=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!Di(e,this.lastRange)){if(!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const l=[U.events.SELECTION_CHANGE,Cn(this.lastRange),Cn(e),t];this.emitter.emit(U.events.EDITOR_CHANGE,...l),t!==U.sources.SILENT&&this.emitter.emit(...l)}}}function Hi(s,t){return s.contains(t)}const cd=/^[ -~]*$/;function Yn(s,t,e){if(0===s.length){const[V]=Qi(e.pop());return t<=0?`</li></${V}>`:`</li></${V}>${Yn([],t-1,e)}`}const[{child:n,offset:r,length:l,indent:o,type:c},...h]=s,[p,y]=Qi(c);if(o>t)return e.push(c),o===t+1?`<${p}><li${y}>${Rs(n,r,l)}${Yn(h,o,e)}`:`<${p}><li>${Yn(s,t+1,e)}`;if(o===t&&c===e[e.length-1])return`</li><li${y}>${Rs(n,r,l)}${Yn(h,o,e)}`;const[O]=Qi(e.pop());return`</li></${O}>${Yn(s,t-1,e)}`}function Rs(s,t,e){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in s&&"function"==typeof s.html)return s.html(t,e);if(s instanceof bt)return Xs(s.value().slice(t,t+e));if(s instanceof _t){if("list-container"===s.statics.blotName){const p=[];return s.children.forEachAt(t,e,(y,L,O)=>{const V="formats"in y&&"function"==typeof y.formats?y.formats():{};p.push({child:y,offset:L,length:O,indent:V.indent||0,type:V.list})}),Yn(p,-1,[])}const r=[];if(s.children.forEachAt(t,e,(p,y,L)=>{r.push(Rs(p,y,L))}),n||"list"===s.statics.blotName)return r.join("");const{outerHTML:l,innerHTML:o}=s.domNode,[c,h]=l.split(`>${o}<`);return"<table"===c?`<table style="border: 1px solid #000;">${r.join("")}<${h}`:`${c}>${r.join("")}<${h}`}return s.domNode instanceof Element?s.domNode.outerHTML:""}function hd(s,t){return Object.keys(t).reduce((e,n)=>{if(null==s[n])return e;const r=t[n];return e[n]=r===s[n]?r:Array.isArray(r)?r.indexOf(s[n])<0?r.concat([s[n]]):r:[r,s[n]],e},{})}function Qi(s){const t="ordered"===s?"ol":"ul";switch(s){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function ll(s){return s.reduce((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)},new(P()))}function ol(s,t){let{index:e,length:n}=s;return new Sn(e+t,n)}const Nt=(()=>class s{static DEFAULTS={};constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=e,this.options=n}})(),Zi=class pd extends Xe{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode("\ufeff"),this.rightGuard=document.createTextNode("\ufeff"),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let n,e=null;const r=t.data.split("\ufeff").join("");if(t===this.leftGuard)if(this.prev instanceof bt){const l=this.prev.length();this.prev.insertAt(l,r),e={startNode:this.prev.domNode,startOffset:l+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this),e={startNode:n,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof bt?(this.next.insertAt(0,r),e={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this.next),e={startNode:n,startOffset:r.length}));return t.data="\ufeff",e}update(t,e){t.forEach(n=>{if("characterData"===n.type&&(n.target===this.leftGuard||n.target===this.rightGuard)){const r=this.restore(n.target);r&&(e.range=r)}})}},ni=(()=>{class s{static DEFAULTS={modules:{}};static themes={default:s};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{null==this.modules[e]&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}return s})(),_d=s=>s.parentElement||s.getRootNode().host||null,bd=s=>{const t=s.getBoundingClientRect(),e="offsetWidth"in s&&Math.abs(t.width)/s.offsetWidth||1,n="offsetHeight"in s&&Math.abs(t.height)/s.offsetHeight||1;return{top:t.top,right:t.left+s.clientWidth*e,bottom:t.top+s.clientHeight*n,left:t.left}},si=s=>{const t=parseInt(s,10);return Number.isNaN(t)?0:t},al=(s,t,e,n,r,l)=>s<e&&t>n?0:s<e?-(e-s+r):t>n?t-s>n-e?s+r-e:t-n+l:0,ii=En("quill"),ri=new Bs;_t.uiClass="ql-ui";class x{static DEFAULTS={bounds:null,modules:{},placeholder:"",readOnly:!1,registry:ri,theme:"default"};static events=U.events;static sources=U.sources;static version="2.0.0-rc.2";static imports={delta:P(),parchment:Y,"core/module":Nt,"core/theme":ni};static debug(t){!0===t&&(t="log"),En.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ri.get(t)||ri.find(t,e)}static import(t){return null==this.imports[t]&&ii.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){const r="attrName"in t?t.attrName:t.blotName;"string"==typeof r?this.register(`formats/${r}`,t,e):Object.keys(t).forEach(l=>{this.register(l,t[l],e)})}else null!=this.imports[t]&&!n&&ii.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&ri.register(e),"function"==typeof e.register&&e.register(ri)}constructor(t){if(this.options=function yd(s,t){let e=Wt({container:s,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0}},t);if(e.theme&&e.theme!==x.DEFAULTS.theme){if(e.theme=x.import(`themes/${e.theme}`),null==e.theme)throw new Error(`Invalid theme ${e.theme}. Did you register it?`)}else e.theme=ni;const n=Cn(e.theme.DEFAULTS);[n,e].forEach(o=>{o.modules=o.modules||{},Object.keys(o.modules).forEach(c=>{!0===o.modules[c]&&(o.modules[c]={})})});const l=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((o,c)=>{const h=x.import(`modules/${c}`);return null==h?ii.error(`Cannot load ${c} module. Are you sure you registered it?`):o[c]=h.DEFAULTS||{},o},{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=Wt({},x.DEFAULTS,{modules:l},n,e),["bounds","container"].forEach(o=>{const c=e[o];"string"==typeof c&&(e[o]=document.querySelector(c))}),e.modules=Object.keys(e.modules).reduce((o,c)=>(e.modules[c]&&(o[c]=e.modules[c]),o),{}),e}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.container=this.options.container,null==this.container)return void ii.error("Invalid Quill container",t);this.options.debug&&x.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Ri.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new U;const r=Mi.blotName,l=this.options.registry.query(r);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${r}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new class ud{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=ll(t),r=new(P());return function dd(s){const t=[];return s.forEach(e=>{"string"==typeof e.insert?e.insert.split("\n").forEach((r,l)=>{l&&t.push({insert:"\n",attributes:e.attributes}),r&&t.push({insert:r,attributes:e.attributes})}):t.push(e)}),t}(n.ops.slice()).reduce((o,c)=>{const h=lt.Op.length(c);let p=c.attributes||{},y=!1,L=!1;if(null!=c.insert){if(r.retain(h),"string"==typeof c.insert){const K=c.insert;L=!K.endsWith("\n")&&(e<=o||!!this.scroll.descendant(ot,o)[0]),this.scroll.insertAt(o,K);const[Ae,W]=this.scroll.line(o);let ye=Wt({},at(Ae));if(Ae instanceof et){const[yt]=Ae.descendant(je,W);yt&&(ye=Wt(ye,at(yt)))}p=lt.AttributeMap.diff(ye,p)||{}}else if("object"==typeof c.insert){const K=Object.keys(c.insert)[0];if(null==K)return o;const Ae=null!=this.scroll.query(K,j.INLINE);if(Ae)(e<=o||this.scroll.descendant(ot,o)[0])&&(L=!0);else if(o>0){const[W,ye]=this.scroll.descendant(je,o-1);W instanceof bt?"\n"!==W.value()[ye]&&(y=!0):W instanceof Xe&&W.statics.scope===j.INLINE_BLOT&&(y=!0)}if(this.scroll.insertAt(o,K,c.insert[K]),Ae){const[W]=this.scroll.descendant(je,o);if(W){const ye=Wt({},at(W));p=lt.AttributeMap.diff(ye,p)||{}}}}e+=h}else if(r.push(c),null!==c.retain&&"object"==typeof c.retain){const K=Object.keys(c.retain)[0];if(null==K)return o;this.scroll.updateEmbedAt(o,K,c.retain[K])}Object.keys(p).forEach(K=>{this.scroll.formatAt(o,h,K,p[K])});const O=y?1:0,V=L?1:0;return e+=O+V,r.retain(O),r.delete(V),o+h+O+V},0),r.reduce((o,c)=>"number"==typeof c.delete?(this.scroll.deleteAt(o,c.delete),o):o+lt.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new(P())).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(l=>{this.scroll.lines(t,Math.max(e,1)).forEach(o=>{o.format(l,n[l])})}),this.scroll.optimize();const r=(new(P())).retain(t).retain(e,Cn(n));return this.update(r)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach(l=>{this.scroll.formatAt(t,e,l,n[l])});const r=(new(P())).retain(t).retain(e,Cn(n));return this.update(r)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new(P()))}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===e?this.scroll.path(t).forEach(c=>{const[h]=c;h instanceof et?n.push(h):h instanceof je&&r.push(h)}):(n=this.scroll.lines(t,e),r=this.scroll.descendants(je,t,e));const[l,o]=[n,r].map(c=>{const h=c.shift();if(null==h)return{};let p=at(h);for(;Object.keys(p).length>0;){const y=c.shift();if(null==y)return p;p=hd(at(y),p)}return p});return{...l,...o}}getHTML(t,e){const[n,r]=this.scroll.line(t);if(n){const l=n.length();return n.length()>=r+e?Rs(n,r,e,!(0===r&&e===l)):Rs(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(n=>"string"==typeof n.insert).map(n=>n.insert).join("")}insertContents(t,e){const n=ll(e),r=(new(P())).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(r)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new(P())).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach(r=>{this.scroll.formatAt(t,e.length,r,n[r])}),this.update((new(P())).retain(t).insert(e,Cn(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;return t?.statics.blotName===et.blotName&&!(t.children.length>1)&&t.children.head instanceof Rt}removeFormat(t,e){const n=this.getText(t,e),[r,l]=this.scroll.line(t+e);let o=0,c=new(P());null!=r&&(o=r.length()-l,c=r.delta().slice(l,l+o-1).insert("\n"));const p=this.getContents(t,e+o).diff((new(P())).insert(n).concat(c)),y=(new(P())).retain(t).concat(p);return this.applyDelta(y)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(cd)&&this.scroll.find(e[0].target)){const l=this.scroll.find(e[0].target),o=at(l),c=l.offset(this.scroll),h=e[0].oldValue.replace(ei.CONTENTS,""),p=(new(P())).insert(h),y=(new(P())).insert(l.value()),L=n&&{oldRange:ol(n.oldRange,-c),newRange:ol(n.newRange,-c)};t=(new(P())).retain(c).concat(p.diff(y,L)).reduce((V,K)=>K.insert?V.insert(K.insert,o):V.push(K),new(P())),this.delta=r.compose(t)}else this.delta=this.getDelta(),(!t||!Di(r.compose(t),this.delta))&&(t=r.diff(this.delta,n));return t}}(this.scroll),this.selection=new ad(this.scroll,this.emitter),this.composition=new class gd{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Zi)&&(this.emitter.emit(U.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(U.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(U.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(U.events.COMPOSITION_END,t),this.isComposing=!1}}(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(U.events.EDITOR_CHANGE,o=>{o===U.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(U.events.SCROLL_UPDATE,(o,c)=>{const h=this.selection.lastRange,[p]=this.selection.getRange(),y=h&&p?{oldRange:h,newRange:p}:void 0;vt.call(this,()=>this.editor.update(null,c,y),o)}),this.emitter.on(U.events.SCROLL_EMBED_UPDATE,(o,c)=>{const h=this.selection.lastRange,[p]=this.selection.getRange(),y=h&&p?{oldRange:h,newRange:p}:void 0;vt.call(this,()=>{const L=(new(P())).retain(o.offset(this)).retain({[o.statics.blotName]:c});return this.editor.update(L,[],y)},x.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:"\n"});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Ut(t,e,n),vt.call(this,()=>this.editor.deleteText(t,e),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){return vt.call(this,()=>{const r=this.getSelection(!0);let l=new(P());if(null==r)return l;if(this.scroll.query(t,j.BLOCK))l=this.editor.formatLine(r.index,r.length,{[t]:e});else{if(0===r.length)return this.selection.format(t,e),l;l=this.editor.formatText(r.index,r.length,{[t]:e})}return this.setSelection(r,U.sources.SILENT),l},arguments.length>2&&void 0!==arguments[2]?arguments[2]:U.sources.API)}formatLine(t,e,n,r,l){let o;return[t,e,o,l]=Ut(t,e,n,r,l),vt.call(this,()=>this.editor.formatLine(t,e,o),l,t,0)}formatText(t,e,n,r,l){let o;return[t,e,o,l]=Ut(t,e,n,r,l),vt.call(this,()=>this.editor.formatText(t,e,o),l,t,0)}getBounds(t){let n=null;if(n="number"==typeof t?this.selection.getBounds(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(t.index,t.length),!n)return null;const r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Ut(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof t?this.editor.getFormat(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ut(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ut(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){return vt.call(this,()=>this.editor.insertEmbed(t,e,n),arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.sources.API,t)}insertText(t,e,n,r,l){let o;return[t,,o,l]=Ut(t,0,n,r,l),vt.call(this,()=>this.editor.insertText(t,e,o),l,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(){const[t,e,,n]=Ut(...arguments);return vt.call(this,()=>this.editor.removeFormat(t,e),n,t)}scrollRectIntoView(t){((s,t)=>{const e=s.ownerDocument;let n=t,r=s;for(;r;){const l=r===e.body,o=l?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:bd(r),c=getComputedStyle(r),h=al(n.left,n.right,o.left,o.right,si(c.scrollPaddingLeft),si(c.scrollPaddingRight)),p=al(n.top,n.bottom,o.top,o.bottom,si(c.scrollPaddingTop),si(c.scrollPaddingBottom));if(h||p)if(l)e.defaultView?.scrollBy(h,p);else{const{scrollLeft:y,scrollTop:L}=r;p&&(r.scrollTop+=p),h&&(r.scrollLeft+=h);const O=r.scrollLeft-y,V=r.scrollTop-L;n={left:n.left-O,top:n.top-V,right:n.right-O,bottom:n.bottom-V}}r=l||"fixed"===c.position?null:_d(r)}})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){return vt.call(this,()=>{t=new(P())(t);const n=this.getLength(),r=this.editor.deleteText(0,n),l=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return r.compose(l).compose(o)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.sources.API)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||x.sources.API):([t,e,,n]=Ut(t,e,n),this.selection.setRange(new Sn(Math.max(0,t),e),n),n!==U.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.sources.API;const n=(new(P())).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){return vt.call(this,()=>(t=new(P())(t),this.editor.applyDelta(t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.sources.API,!0)}}function vt(s,t,e,n){if(!this.isEnabled()&&t===U.sources.USER&&!this.allowReadOnlyEdits)return new(P());let r=null==e?null:this.getSelection();const l=this.editor.delta,o=s();if(null!=r&&(!0===e&&(e=r.index),null==n?r=cl(r,o,t):0!==n&&(r=cl(r,e,n,t)),this.setSelection(r,U.sources.SILENT)),o.length()>0){const c=[U.events.TEXT_CHANGE,o,l,t];this.emitter.emit(U.events.EDITOR_CHANGE,...c),t!==U.sources.SILENT&&this.emitter.emit(...c)}return o}function Ut(s,t,e,n,r){let l={};return"number"==typeof s.index&&"number"==typeof s.length?"number"!=typeof t?(r=n,n=e,e=t,t=s.length,s=s.index):(t=s.length,s=s.index):"number"!=typeof t&&(r=n,n=e,e=t,t=0),"object"==typeof e?(l=e,r=n):"string"==typeof e&&(null!=n?l[e]=n:r=e),[s,t,l,r=r||U.sources.API]}function cl(s,t,e,n){const r="number"==typeof e?e:0;if(null==s)return null;let l,o;return[l,o]=[s.index,s.index+s.length].map(t&&"function"==typeof t.transformPosition?c=>t.transformPosition(c,n!==U.sources.USER):c=>c<t||c===t&&n===U.sources.USER?c:r>=0?c+r:Math.max(t,c+r)),new Sn(l,o-l)}const An=class xd extends Ys{};function ul(s){return s instanceof et||s instanceof ot}function hl(s){return"function"==typeof s.updateContent}function Gi(s,t,e){e.reduce((n,r)=>{const l=lt.Op.length(r);let o=r.attributes||{};if(null!=r.insert)if("string"==typeof r.insert){s.insertAt(n,r.insert);const[h]=s.descendant(je,n),p=at(h);o=lt.AttributeMap.diff(p,o)||{}}else if("object"==typeof r.insert){const c=Object.keys(r.insert)[0];if(null==c)return n;if(s.insertAt(n,c,r.insert[c]),null!=s.scroll.query(c,j.INLINE)){const[p]=s.descendant(je,n),y=at(p);o=lt.AttributeMap.diff(y,o)||{}}}return Object.keys(o).forEach(c=>{s.formatAt(n,l,c,o[c])}),n+l},t)}const wd=(()=>class s extends Mi{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=et;static allowedChildren=[et,ot,An];constructor(e,n,r){let{emitter:l}=r;super(e,n),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(U.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(U.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(U.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,l]=this.line(e),[o]=this.line(e+n);if(super.deleteAt(e,n),null!=o&&r!==o&&l>0){if(r instanceof ot||o instanceof ot)return void this.optimize();r.moveChildren(o,o.children.head instanceof Rt?null:o.children.head),r.remove()}this.optimize()}enable(){this.domNode.setAttribute("contenteditable",arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?"false":"true")}formatAt(e,n,r,l){super.formatAt(e,n,r,l),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(null==r||null==this.scroll.query(n,j.BLOCK)){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),null==r&&n.endsWith("\n")?l.insertAt(0,n.slice(0,-1),r):l.insertAt(0,n,r)}else{const l=this.scroll.create(n,r);this.appendChild(l)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===j.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat((new(P())).insert("\n"))),l=r.pop();if(null==l)return;this.batchStart();const o=r.shift();if(o){const p="block"===o.type&&(0===o.delta.length()||!this.descendant(ot,e)[0]&&e<this.length()),y="block"===o.type?o.delta:(new(P())).insert({[o.key]:o.value});Gi(this,e,y);const L="block"===o.type?1:0,O=e+y.length()+L;p&&this.insertAt(O-1,"\n");const V=at(this.line(e)[0]),K=lt.AttributeMap.diff(V,o.attributes)||{};Object.keys(K).forEach(Ae=>{this.formatAt(O-1,1,Ae,K[Ae])}),e=O}let[c,h]=this.children.find(e);r.length&&(c&&(c=c.split(h),h=0),r.forEach(p=>{if("block"===p.type)Gi(this.createBlock(p.attributes,c||void 0),0,p.delta);else{const y=this.create(p.key,p.value);this.insertBefore(y,c||void 0),Object.keys(p.attributes).forEach(L=>{y.format(L,p.attributes[L])})}})),"block"===l.type&&l.delta.length()&&Gi(this,c?c.offset(c.scroll)+h:this.length(),l.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,l]=n;return r instanceof je?[r,l]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(ul,e)}lines(){const r=(l,o,c)=>{let h=[],p=c;return l.children.forEachAt(o,c,(y,L,O)=>{ul(y)?h.push(y):y instanceof Ys&&(h=h.concat(r(y,L,p))),p-=O}),h};return r(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}optimize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(U.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch)return void(Array.isArray(e)&&(this.batch=this.batch.concat(e)));let n=U.sources.USER;"string"==typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter(r=>{let{target:l}=r;const o=this.find(l,!0);return o&&!hl(o)})).length>0&&this.emitter.emit(U.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(U.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[l]=this.descendant(o=>o instanceof ot,e);l&&l.statics.blotName===n&&hl(l)&&l.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new(P());return e.forEach(l=>{const o=l?.insert;if(o)if("string"==typeof o){const c=o.split("\n");c.slice(0,-1).forEach(p=>{r.insert(p,l.attributes),n.push({type:"block",delta:r,attributes:l.attributes??{}}),r=new(P())});const h=c[c.length-1];h&&r.insert(h,l.attributes)}else{const c=Object.keys(o)[0];if(!c)return;this.query(c,j.INLINE)?r.push(l):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new(P()),n.push({type:"blockEmbed",key:c,value:o[c],attributes:l.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const l={};Object.entries(e).forEach(h=>{let[p,y]=h;null!=this.query(p,j.BLOCK&j.BLOT)?r=p:l[p]=y});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,n||void 0);const c=o.length();return Object.entries(l).forEach(h=>{let[p,y]=h;o.formatAt(0,c,p,y)}),o}})(),Ji={scope:j.BLOCK,whitelist:["right","center","justify"]},Cd=new At("align","align",Ji),dl=new mt("align","ql-align",Ji),fl=new Xt("align","text-align",Ji);class pl extends Xt{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(r=>`00${parseInt(r,10).toString(16)}`.slice(-2)).join("")}`):e}}const Ed=new mt("color","ql-color",{scope:j.INLINE}),Ki=new pl("color","color",{scope:j.INLINE}),Sd=new mt("background","ql-bg",{scope:j.INLINE}),Yi=new pl("background","background-color",{scope:j.INLINE});class Nn extends An{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${Xs(this.code(t,e))}\n</pre>`}}let Ge=(()=>class s extends et{static TAB="  ";static register(){x.register(Nn)}})(),Ad=(()=>{class s extends en{}return s.blotName="code",s.tagName="CODE",s})();Ge.blotName="code-block",Ge.className="ql-code-block",Ge.tagName="DIV",Nn.blotName="code-block-container",Nn.className="ql-code-block-container",Nn.tagName="DIV",Nn.allowedChildren=[Ge],Ge.allowedChildren=[bt,Rt,ei],Ge.requiredContainer=Nn;const Vi={scope:j.BLOCK,whitelist:["rtl"]},gl=new At("direction","dir",Vi),ml=new mt("direction","ql-direction",Vi),_l=new Xt("direction","direction",Vi),bl={scope:j.INLINE,whitelist:["serif","monospace"]},vl=new mt("font","ql-font",bl),yl=new class Nd extends Xt{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",bl),xl=new mt("size","ql-size",{scope:j.INLINE,whitelist:["small","large","huge"]}),Tl=new Xt("size","font-size",{scope:j.INLINE,whitelist:["10px","18px","32px"]}),Id=En("quill:keyboard"),Ld=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class li extends Nt{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!e[n]!==t[n]&&null!==e[n])&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function Od(s){if("string"==typeof s||"number"==typeof s)s={key:s};else{if("object"!=typeof s)return null;s=Cn(s)}return s.shortKey&&(s[Ld]=s.shortKey,delete s.shortKey),s}(t);null!=r?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(r.key)?r.key:[r.key]).forEach(o=>{const c={...r,key:o,...e,...n};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})):Id.warn("Attempted to add invalid keyboard binding",r)}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing)return;const n=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(W=>li.match(t,W));if(0===n.length)return;const r=x.find(t.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(null==l||!this.quill.hasFocus())return;const[o,c]=this.quill.getLine(l.index),[h,p]=this.quill.getLeaf(l.index),[y,L]=0===l.length?[h,p]:this.quill.getLeaf(l.index+l.length),O=h instanceof Vs?h.value().slice(0,p):"",V=y instanceof Vs?y.value().slice(L):"",K={collapsed:0===l.length,empty:0===l.length&&o.length()<=1,format:this.quill.getFormat(l),line:o,offset:c,prefix:O,suffix:V,event:t};n.some(W=>{if(null!=W.collapsed&&W.collapsed!==K.collapsed||null!=W.empty&&W.empty!==K.empty||null!=W.offset&&W.offset!==K.offset)return!1;if(Array.isArray(W.format)){if(W.format.every(ye=>null==K.format[ye]))return!1}else if("object"==typeof W.format&&!Object.keys(W.format).every(ye=>!0===W.format[ye]?null!=K.format[ye]:!1===W.format[ye]?null==K.format[ye]:Di(W.format[ye],K.format[ye])))return!1;return!(null!=W.prefix&&!W.prefix.test(K.prefix)||null!=W.suffix&&!W.suffix.test(K.suffix))&&!0!==W.handler.call(this,l,K,W)})&&t.preventDefault()})}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let r={};const[l]=this.quill.getLine(t.index);let o=(new(P())).retain(t.index-n).delete(n);if(0===e.offset){const[c]=this.quill.getLine(t.index-1);if(c&&!("block"===c.statics.blotName&&c.length()<=1)){const p=l.formats(),y=this.quill.getFormat(t.index-1,1);if(r=lt.AttributeMap.diff(p,y)||{},Object.keys(r).length>0){const L=(new(P())).retain(t.index+l.length()-2).retain(1,r);o=o.compose(L)}}}this.quill.updateContents(o,x.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let r={};const[l]=this.quill.getLine(t.index);let o=(new(P())).retain(t.index).delete(n);if(e.offset>=l.length()-1){const[c]=this.quill.getLine(t.index+1);if(c){const h=l.formats(),p=this.quill.getFormat(t.index,1);r=lt.AttributeMap.diff(h,p)||{},Object.keys(r).length>0&&(o=o.retain(c.length()-1).retain(1,r))}}this.quill.updateContents(o,x.sources.USER),this.quill.focus()}handleDeleteRange(t){Wi({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce((l,o)=>(this.quill.scroll.query(o,j.BLOCK)&&!Array.isArray(e.format[o])&&(l[o]=e.format[o]),l),{}),r=(new(P())).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(r,x.sources.USER),this.quill.setSelection(t.index+1,x.sources.SILENT),this.quill.focus()}}const qd={bindings:{bold:$i("bold"),italic:$i("italic"),underline:$i("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(s,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","+1",x.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(s,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","-1",x.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(s,t){null!=t.format.indent?this.quill.format("indent","-1",x.sources.USER):null!=t.format.list&&this.quill.format("list",!1,x.sources.USER)}},"indent code-block":wl(!0),"outdent code-block":wl(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(s){this.quill.deleteText(s.index-1,1,x.sources.USER)}},tab:{key:"Tab",handler(s,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=(new(P())).retain(s.index).delete(s.length).insert("\t");return this.quill.updateContents(e,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index+1,x.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,x.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(s,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(s.index,s.length,e,x.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(s){const[t,e]=this.quill.getLine(s.index),n={...t.formats(),list:"checked"},r=(new(P())).retain(s.index).insert("\n",n).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,x.sources.USER),this.quill.setSelection(s.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(s,t){const[e,n]=this.quill.getLine(s.index),r=(new(P())).retain(s.index).insert("\n",t.format).retain(e.length()-n-1).retain(1,{header:null});this.quill.updateContents(r,x.sources.USER),this.quill.setSelection(s.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(s){const t=this.quill.getModule("table");if(t){const[e,n,r,l]=t.getTable(s),o=function Md(s,t,e,n){return null==t.prev&&null==t.next?null==e.prev&&null==e.next?0===n?-1:1:null==e.prev?-1:1:null==t.prev?-1:null==t.next?1:null}(0,n,r,l);if(null==o)return;let c=e.offset();if(o<0){const h=(new(P())).retain(c).insert("\n");this.quill.updateContents(h,x.sources.USER),this.quill.setSelection(s.index+1,s.length,x.sources.SILENT)}else if(o>0){c+=e.length();const h=(new(P())).retain(c).insert("\n");this.quill.updateContents(h,x.sources.USER),this.quill.setSelection(c,x.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(s,t){const{event:e,line:n}=t,r=n.offset(this.quill.scroll);this.quill.setSelection(e.shiftKey?r-1:r+n.length(),x.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(s,t){if(null==this.quill.scroll.query("list"))return!0;const{length:e}=t.prefix,[n,r]=this.quill.getLine(s.index);if(r>e)return!0;let l;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(s.index," ",x.sources.USER),this.quill.history.cutoff();const o=(new(P())).retain(s.index-r).delete(e+1).retain(n.length()-2-r).retain(1,{list:l});return this.quill.updateContents(o,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index-e,x.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(s){const[t,e]=this.quill.getLine(s.index);let n=2,r=t;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,n-=1,n<=0){const l=(new(P())).retain(s.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,x.sources.USER),this.quill.setSelection(s.index-1,x.sources.SILENT),!1}return!0}},"embed left":oi("ArrowLeft",!1),"embed left shift":oi("ArrowLeft",!0),"embed right":oi("ArrowRight",!1),"embed right shift":oi("ArrowRight",!0),"table down":Cl(!1),"table up":Cl(!0)}};function wl(s){return{key:"Tab",shiftKey:!s,format:{"code-block":!0},handler(t,e){let{event:n}=e;const r=this.quill.scroll.query("code-block"),{TAB:l}=r;if(0===t.length&&!n.shiftKey)return this.quill.insertText(t.index,l,x.sources.USER),void this.quill.setSelection(t.index+l.length,x.sources.SILENT);const o=0===t.length?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:c,length:h}=t;o.forEach((p,y)=>{s?(p.insertAt(0,l),0===y?c+=l.length:h+=l.length):p.domNode.textContent.startsWith(l)&&(p.deleteAt(0,l.length),0===y?c-=l.length:h-=l.length)}),this.quill.update(x.sources.USER),this.quill.setSelection(c,h,x.sources.SILENT)}}}function oi(s,t){return{key:s,shiftKey:t,altKey:null,["ArrowLeft"===s?"prefix":"suffix"]:/^$/,handler(n){let{index:r}=n;"ArrowRight"===s&&(r+=n.length+1);const[l]=this.quill.getLeaf(r);return!(l instanceof Xe&&("ArrowLeft"===s?t?this.quill.setSelection(n.index-1,n.length+1,x.sources.USER):this.quill.setSelection(n.index-1,x.sources.USER):t?this.quill.setSelection(n.index,n.length+1,x.sources.USER):this.quill.setSelection(n.index+n.length+1,x.sources.USER),1))}}}function $i(s){return{key:s[0],shortKey:!0,handler(t,e){this.quill.format(s,!e.format[s],x.sources.USER)}}}function Cl(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const n=s?"prev":"next",r=e.line,l=r.parent[n];if(null!=l){if("table-row"===l.statics.blotName){let o=l.children.head,c=r;for(;null!=c.prev;)c=c.prev,o=o.next;const h=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(h,0,x.sources.USER)}}else{const o=r.table()[n];null!=o&&this.quill.setSelection(s?o.offset(this.quill.scroll)+o.length()-1:o.offset(this.quill.scroll),0,x.sources.USER)}return!1}}}function Wi(s){let{quill:t,range:e}=s;const n=t.getLines(e);let r={};if(n.length>1){const l=n[0].formats(),o=n[n.length-1].formats();r=lt.AttributeMap.diff(o,l)||{}}t.deleteText(e,x.sources.USER),Object.keys(r).length>0&&t.formatLine(e.index,1,r,x.sources.USER),t.setSelection(e.index,x.sources.SILENT)}li.DEFAULTS=qd;const kd=/font-weight:\s*normal/,Bd=["P","OL","UL"],El=s=>s&&Bd.includes(s.tagName),Fd=/\bmso-list:[^;]*ignore/i,Pd=/\bmso-list:[^;]*\bl(\d+)/i,zd=/\bmso-list:[^;]*\blevel(\d+)/i,Zd=[function Qd(s){"urn:schemas-microsoft-com:office:word"===s.documentElement.getAttribute("xmlns:w")&&(s=>{const t=Array.from(s.querySelectorAll("[style*=mso-list]")),e=[],n=[];t.forEach(o=>{(o.getAttribute("style")||"").match(Fd)?e.push(o):n.push(o)}),e.forEach(o=>o.parentNode?.removeChild(o));const r=s.documentElement.innerHTML,l=n.map(o=>((s,t)=>{const e=s.getAttribute("style"),n=e?.match(Pd);if(!n)return null;const r=Number(n[1]),l=e?.match(zd),o=l?Number(l[1]):1,c=new RegExp(`@list l${r}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),h=t.match(c);return{id:r,indent:o,type:h&&"bullet"===h[1]?"bullet":"ordered",element:s}})(o,r)).filter(o=>o);for(;l.length;){const o=[];let c=l.shift();for(;c;)o.push(c),c=l.length&&l[0]?.element===c.element.nextElementSibling&&l[0].id===c.id?l.shift():null;const h=document.createElement("ul");o.forEach(L=>{const O=document.createElement("li");O.setAttribute("data-list",L.type),L.indent>1&&O.setAttribute("class","ql-indent-"+(L.indent-1)),O.innerHTML=L.element.innerHTML,h.appendChild(O)});const p=o[0]?.element,{parentNode:y}=p??{};p&&y?.replaceChild(h,p),o.slice(1).forEach(L=>{let{element:O}=L;y?.removeChild(O)})}})(s)},function Ud(s){s.querySelector('[id^="docs-internal-guid-"]')&&((s=>{Array.from(s.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(kd)).forEach(t=>{const e=s.createDocumentFragment();e.append(...t.childNodes),t.parentNode?.replaceChild(e,t)})})(s),(s=>{Array.from(s.querySelectorAll("br")).filter(t=>El(t.previousElementSibling)&&El(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})})(s))}],Jd=En("quill:clipboard"),Kd=[[Node.TEXT_NODE,function af(s,t,e){let n=s.data;if("O:P"===s.parentElement?.tagName)return t.insert(n.trim());if(!Al(s)){if(0===n.trim().length&&n.includes("\n")&&!function $d(s,t){return s.previousElementSibling&&s.nextElementSibling&&!tn(s.previousElementSibling,t)&&!tn(s.nextElementSibling,t)}(s,e))return t;const r=(l,o)=>{const c=o.replace(/[^\u00a0]/g,"");return c.length<1&&l?" ":c};n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,r.bind(r,!0)),(null==s.previousSibling&&null!=s.parentElement&&tn(s.parentElement,e)||s.previousSibling instanceof Element&&tn(s.previousSibling,e))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==s.nextSibling&&null!=s.parentElement&&tn(s.parentElement,e)||s.nextSibling instanceof Element&&tn(s.nextSibling,e))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}],[Node.TEXT_NODE,Nl],["br",function ef(s,t){return Us(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,Nl],[Node.ELEMENT_NODE,function Xd(s,t,e){const n=e.query(s);if(null==n)return t;if(n.prototype instanceof Xe){const r={},l=n.value(s);if(null!=l)return r[n.blotName]=l,(new(P())).insert(r,n.formats(s,e))}else if(n.prototype instanceof Ds&&!Us(t,"\n")&&t.insert("\n"),"blotName"in n&&"formats"in n&&"function"==typeof n.formats)return In(t,n.blotName,n.formats(s,e),e);return t}],[Node.ELEMENT_NODE,function Wd(s,t,e){const n=At.keys(s),r=mt.keys(s),l=Xt.keys(s),o={};return n.concat(r).concat(l).forEach(c=>{let h=e.query(c,j.ATTRIBUTE);null!=h&&(o[h.attrName]=h.value(s),o[h.attrName])||(h=Yd[c],null!=h&&(h.attrName===c||h.keyName===c)&&(o[h.attrName]=h.value(s)||void 0),h=Sl[c],null!=h&&(h.attrName===c||h.keyName===c)&&(h=Sl[c],o[h.attrName]=h.value(s)||void 0))}),Object.entries(o).reduce((c,h)=>{let[p,y]=h;return In(c,p,y,e)},t)}],[Node.ELEMENT_NODE,function lf(s,t,e){const n={},r=s.style||{};return"italic"===r.fontStyle&&(n.italic=!0),"underline"===r.textDecoration&&(n.underline=!0),"line-through"===r.textDecoration&&(n.strike=!0),(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(n.bold=!0),t=Object.entries(n).reduce((l,o)=>{let[c,h]=o;return In(l,c,h,e)},t),parseFloat(r.textIndent||0)>0?(new(P())).insert("\t").concat(t):t}],["li",function sf(s,t,e){const n=e.query(s);if(null==n||"list"!==n.blotName||!Us(t,"\n"))return t;let r=-1,l=s.parentNode;for(;null!=l;)["OL","UL"].includes(l.tagName)&&(r+=1),l=l.parentNode;return r<=0?t:t.reduce((o,c)=>c.attributes&&"number"==typeof c.attributes.indent?o.push(c):o.insert(c.insert,{indent:r,...c.attributes||{}}),new(P()))}],["ol, ul",function rf(s,t,e){return In(t,"list","OL"===s.tagName?"ordered":"bullet",e)}],["pre",function tf(s,t,e){const n=e.query("code-block");return In(t,"code-block",!n||!("formats"in n)||"function"!=typeof n.formats||n.formats(s,e),e)}],["tr",function of(s,t,e){const n="TABLE"===s.parentElement?.tagName?s.parentElement:s.parentElement?.parentElement;return null!=n?In(t,"table",Array.from(n.querySelectorAll("tr")).indexOf(s)+1,e):t}],["b",er("bold")],["i",er("italic")],["strike",er("strike")],["style",function nf(){return new(P())}]],Yd=[Cd,gl].reduce((s,t)=>(s[t.keyName]=t,s),{}),Sl=[fl,Yi,Ki,_l,yl,Tl].reduce((s,t)=>(s[t.keyName]=t,s),{});let Vd=(()=>{class s extends Nt{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Kd.concat(this.options.matchers).forEach(r=>{let[l,o]=r;this.addMatcher(l,o)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l[Ge.blotName])return(new(P())).insert(r||"",{[Ge.blotName]:l[Ge.blotName]});if(!n)return(new(P())).insert(r||"",l);const o=this.convertHTML(n);return Us(o,"\n")&&(null==o.ops[o.ops.length-1].attributes||l.table)?o.compose((new(P())).retain(o.length()-1).delete(1)):o}normalizeHTML(e){(s=>{s.documentElement&&Zd.forEach(t=>{t(s)})})(e)}convertHTML(e){const n=(new DOMParser).parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,l=new WeakMap,[o,c]=this.prepareMatching(r,l);return Xi(this.quill.scroll,r,o,c,l)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.sources.API;if("string"==typeof e){const l=this.convert({html:e,text:""});this.quill.setContents(l,n),this.quill.setSelection(0,x.sources.SILENT)}else{const l=this.convert({html:n,text:""});this.quill.updateContents((new(P())).retain(e).concat(l),r),this.quill.setSelection(e+l.length(),x.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(null==r)return;const{html:l,text:o}=this.onCopy(r,n);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",l),n&&Wi({range:r,quill:this.quill})}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(null==n)return;const r=e.clipboardData?.getData("text/html"),l=e.clipboardData?.getData("text/plain"),o=Array.from(e.clipboardData?.files||[]);if(!r&&o.length>0)this.quill.uploader.upload(n,o);else{if(r&&o.length>0){const c=(new DOMParser).parseFromString(r,"text/html");if(1===c.body.childElementCount&&"IMG"===c.body.firstElementChild?.tagName)return void this.quill.uploader.upload(n,o)}this.onPaste(n,{html:r,text:l})}}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:l}=n;const o=this.quill.getFormat(e.index),c=this.convert({text:r,html:l},o);Jd.log("onPaste",c,{text:r,html:l});const h=(new(P())).retain(e.index).delete(e.length).concat(c);this.quill.updateContents(h,x.sources.USER),this.quill.setSelection(h.length()-e.length,x.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],l=[];return this.matchers.forEach(o=>{const[c,h]=o;switch(c){case Node.TEXT_NODE:l.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(c)).forEach(p=>{n.has(p)?n.get(p)?.push(h):n.set(p,[h])})}}),[r,l]}}return s.DEFAULTS={matchers:[]},s})();function In(s,t,e,n){return n.query(t)?s.reduce((r,l)=>l.attributes&&l.attributes[t]?r.push(l):r.insert(l.insert,{...e?{[t]:e}:{},...l.attributes}),new(P())):s}function Us(s,t){let e="";for(let n=s.ops.length-1;n>=0&&e.length<t.length;--n){const r=s.ops[n];if("string"!=typeof r.insert)break;e=r.insert+e}return e.slice(-1*t.length)===t}function tn(s,t){if(!(s instanceof Element))return!1;const e=t.query(s);return!(e&&e.prototype instanceof Xe)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(s.tagName.toLowerCase())}const ai=new WeakMap;function Al(s){return null!=s&&(ai.has(s)||ai.set(s,"PRE"===s.tagName||Al(s.parentNode)),ai.get(s))}function Xi(s,t,e,n,r){return t.nodeType===t.TEXT_NODE?n.reduce((l,o)=>o(t,l,s),new(P())):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((l,o)=>{let c=Xi(s,o,e,n,r);return o.nodeType===t.ELEMENT_NODE&&(c=e.reduce((h,p)=>p(o,h,s),c),c=(r.get(o)||[]).reduce((h,p)=>p(o,h,s),c)),l.concat(c)},new(P())):new(P())}function er(s){return(t,e,n)=>In(e,s,!0,n)}function Nl(s,t,e){if(!Us(t,"\n")){if(tn(s,e))return t.insert("\n");if(t.length()>0&&s.nextSibling){let n=s.nextSibling;for(;null!=n;){if(tn(n,e))return t.insert("\n");const r=e.query(n);if(r&&r.prototype instanceof ot)return t.insert("\n");n=n.firstChild}}}return t}let cf=(()=>{class s extends Nt{lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(x.events.EDITOR_CHANGE,(r,l,o,c)=>{r===x.events.SELECTION_CHANGE?l&&c!==x.sources.SILENT&&(this.currentRange=l):r===x.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&c!==x.sources.USER?this.transform(l):this.record(l,o)),this.currentRange=tr(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{"historyUndo"===r.inputType?(this.undo(),r.preventDefault()):"historyRedo"===r.inputType&&(this.redo(),r.preventDefault())})}change(e,n){if(0===this.stack[e].length)return;const r=this.stack[e].pop();if(!r)return;const l=this.quill.getContents(),o=r.delta.invert(l);this.stack[n].push({delta:o,range:tr(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,x.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(0===e.ops.length)return;this.stack.redo=[];let r=e.invert(n),l=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),l=c.range)}else this.lastRecorded=o;0!==r.length()&&(this.stack.undo.push({delta:r,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Il(this.stack.undo,e),Il(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,x.sources.USER);else{const n=function hf(s,t){const e=t.reduce((r,l)=>r+(l.delete||0),0);let n=t.length()-e;return function uf(s,t){const e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(n=>null!=s.query(n,j.BLOCK)))}(s,t)&&(n-=1),n}(this.quill.scroll,e.delta);this.quill.setSelection(n,x.sources.USER)}}}return s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},s})();function Il(s,t){let e=t;for(let n=s.length-1;n>=0;n-=1){const r=s[n];s[n]={delta:e.transform(r.delta,!0),range:r.range&&tr(r.range,e)},e=r.delta.transform(e),0===s[n].delta.length()&&s.splice(n,1)}}function tr(s,t){if(!s)return s;const e=t.transformPosition(s.index);return{index:e,length:t.transformPosition(s.index+s.length)-e}}const df=(()=>{class s extends Nt{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{r.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(r.clientX,r.clientY);l=document.createRange(),l.setStart(c.offsetNode,c.offset),l.setEnd(c.offsetNode,c.offset)}const o=l&&e.selection.normalizeNative(l);if(o){const c=e.selection.normalizedToRange(o);r.dataTransfer?.files&&this.upload(c,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&r.push(l)}),r.length>0&&this.options.handler.call(this,e,r)}}return s.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){const n=e.map(r=>new Promise(l=>{const o=new FileReader;o.onload=c=>{l(c.target.result)},o.readAsDataURL(r)}));Promise.all(n).then(r=>{const l=r.reduce((o,c)=>o.insert({image:c}),(new(P())).retain(t.index).delete(t.length));this.quill.updateContents(l,U.sources.USER),this.quill.setSelection(t.index+r.length,U.sources.SILENT)})}},s})(),ff=["insertText","insertReplacementText"],_f=/Mac/i.test(navigator.platform);x.register({"blots/block":et,"blots/block/embed":ot,"blots/break":Rt,"blots/container":An,"blots/cursor":ei,"blots/embed":Zi,"blots/inline":en,"blots/scroll":wd,"blots/text":bt,"modules/clipboard":Vd,"modules/history":cf,"modules/keyboard":li,"modules/uploader":df,"modules/input":class pf extends Nt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(x.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Wi({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new(P())).retain(t.index).insert(e,n),x.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,x.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!ff.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function gf(s){return"string"==typeof s.data?s.data:s.dataTransfer?.types.includes("text/plain")?s.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const r=this.quill.selection.normalizeNative(e),l=r?this.quill.selection.normalizedToRange(r):null;l&&this.replaceText(l,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class yf extends Nt{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:r}=e;if(!(n instanceof _t&&n.uiNode))return!0;const l="rtl"===getComputedStyle(n.domNode).direction;return!!(l&&"ArrowRight"!==r.key||!l&&"ArrowLeft"!==r.key)||(this.quill.setSelection(t.index-1,t.length+(r.shiftKey?1:0),x.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&(s=>!!("ArrowLeft"===s.key||"ArrowRight"===s.key||"ArrowUp"===s.key||"ArrowDown"===s.key||"Home"===s.key||_f&&"a"===s.key&&!0===s.ctrlKey))(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof _t&&n.uiNode))return;const r=document.createRange();r.setStartAfter(n.uiNode),r.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(r)}}});const nr=x,wf=new class Tf extends mt{add(t,e){let n=0;if("+1"===e||"-1"===e){const r=this.value(t)||0;n="+1"===e?r+1:r-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:j.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Cf=(()=>class s extends et{static blotName="blockquote";static tagName="blockquote"})(),Ef=(()=>class s extends et{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}})();let sr=(()=>{class s extends An{}return s.blotName="list-container",s.tagName="OL",s})(),ir=(()=>{class s extends et{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){x.register(sr)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),l=o=>{if(!e.isEnabled())return;const c=this.statics.formats(n,e);"checked"===c?(this.format("list","unchecked"),o.preventDefault()):"unchecked"===c&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}return s.blotName="list",s.tagName="LI",s})();sr.allowedChildren=[ir],ir.requiredContainer=sr;const rr=(()=>class s extends en{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}})(),Sf=(()=>class s extends rr{static blotName="italic";static tagName=["EM","I"]})();let ci=(()=>class s extends en{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return Ll(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("href",this.constructor.sanitize(n)):super.format(e,n)}})();function Ll(s,t){const e=document.createElement("a");e.href=s;const n=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(n)>-1}const Af=(()=>class s extends en{static blotName="script";static tagName=["SUB","SUP"];static create(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):super.create(e)}static formats(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}})(),Nf=(()=>class s extends rr{static blotName="strike";static tagName=["S","STRIKE"]})(),If=(()=>class s extends en{static blotName="underline";static tagName="U"})(),Lf=(()=>class s extends Zi{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return"string"==typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}})(),ql=["alt","height","width"],qf=(()=>class s extends Xe{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return"string"==typeof e&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return ql.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static register(){/Firefox/i.test(navigator.userAgent)&&setTimeout(()=>{document.execCommand("enableObjectResizing",!1,!1)},1)}static sanitize(e){return Ll(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){ql.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}})(),Ol=["height","width"],Of=(()=>class s extends ot{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Ol.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return ci.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){Ol.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}})(),Fs=new mt("code-token","hljs",{scope:j.INLINE});let Ps=(()=>{class s extends en{static formats(e,n){for(;null!=e&&e!==n.domNode;){if(e.classList&&e.classList.contains(Ge.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Fs.add(this.domNode,r)}format(e,n){e!==s.blotName?super.format(e,n):n?Fs.add(this.domNode,n):(Fs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Fs.value(this.domNode)||this.unwrap()}}return s.blotName="code-token",s.className="ql-token",s})();class ct extends Ge{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Ps.blotName,!1),super.replaceWith(t,e)}}let ui=(()=>{class s extends Nn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===ct.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,l){r===ct.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,l)}highlight(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const l=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join("\n")}\n`,o=ct.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==l){if(l.trim().length>0||null==this.cachedText){const c=this.children.reduce((p,y)=>p.concat(il(y,!1)),new(P())),h=e(l,o);c.diff(h).reduce((p,y)=>{let{retain:L,attributes:O}=y;return L?(O&&Object.keys(O).forEach(V=>{[ct.blotName,Ps.blotName].includes(V)&&this.formatAt(p,L,V,O[V])}),p+L):p},0)}this.cachedText=l,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?ct.formats(r.domNode):"plain"}">\n${Xs(this.code(e,n))}\n</pre>`}optimize(e){if(super.optimize(e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const n=ct.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}return s.allowedChildren=[ct],s})();ct.requiredContainer=ui,ct.allowedChildren=[Ps,ei,bt,Rt];class Ml extends Nt{static register(){x.register(Ps,!0),x.register(ct,!0),x.register(ui,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,r)=>{let{key:l}=r;return n[l]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(x.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof ui))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:r,label:l}=n;const o=e.ownerDocument.createElement("option");o.textContent=l,o.setAttribute("value",r),e.appendChild(o)}),e.addEventListener("change",()=>{t.format(ct.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=ct.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(x.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(x.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(ui):[t]).forEach(l=>{l.highlight(this.highlightBlot,e)}),this.quill.update(x.sources.SILENT),null!=n&&this.quill.setSelection(n,x.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return Xs(t).split("\n").reduce((r,l,o)=>(0!==o&&r.insert("\n",{[Ge.blotName]:e}),r.insert(l)),new(P()));const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Ge.className),n.innerHTML=((s,t,e)=>{if("string"==typeof s.versionString){const n=s.versionString.split(".")[0];if(parseInt(n,10)>=11)return s.highlight(e,{language:t}).value}return s.highlight(t,e).value})(this.options.hljs,e,t),Xi(this.quill.scroll,n,[(r,l)=>{const o=Fs.value(r);return o?l.compose((new(P())).retain(l.length(),{[Ps.blotName]:o})):l}],[(r,l)=>r.data.split("\n").reduce((o,c,h)=>(0!==h&&o.insert("\n",{[Ge.blotName]:e}),o.insert(c)),l)],new WeakMap)}}Ml.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};let Ft=(()=>{class s extends et{static blotName="table";static tagName="TD";static create(e){const n=super.create();return n.setAttribute("data-row",e||or()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===s.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}return s})(),Ln=(()=>class s extends An{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),l=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===l.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(null==n.next)return;const r=n.formats(),l=n.next.formats();if(r.table!==l.table){const o=this.splitAfter(n);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}})(),nn=(()=>class s extends An{static blotName="table-body";static tagName="TBODY"})(),lr=(()=>{class s extends An{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(Ln),n=e.reduce((r,l)=>Math.max(l.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let l;null!=r.children.head&&(l=Ft.formats(r.children.head.domNode));const o=this.scroll.create(Ft.blotName,l);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(nn);null==n||null==n.children.head||n.children.forEach(r=>{const l=r.children.at(e);l?.remove()})}insertColumn(e){const[n]=this.descendant(nn);null==n||null==n.children.head||n.children.forEach(r=>{const l=r.children.at(e),o=Ft.formats(r.children.head.domNode),c=this.scroll.create(Ft.blotName,o);r.insertBefore(c,l)})}insertRow(e){const[n]=this.descendant(nn);if(null==n||null==n.children.head)return;const r=or(),l=this.scroll.create(Ln.blotName);n.children.head.children.forEach(()=>{const c=this.scroll.create(Ft.blotName,r);l.appendChild(c)});const o=n.children.at(e);n.insertBefore(l,o)}rows(){const e=this.children.head;return null==e?[]:e.children.map(n=>n)}}return s.allowedChildren=[nn],s})();function or(){return`row-${Math.random().toString(36).slice(2,6)}`}nn.requiredContainer=lr,nn.allowedChildren=[Ln],Ln.requiredContainer=nn,Ln.allowedChildren=[Ft],Ft.requiredContainer=Ln;const kl=En("quill:toolbar");let Bl=(()=>{class s extends Nt{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),function Df(s,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(r=>{if("string"==typeof r)Dl(n,r);else{const l=Object.keys(r)[0],o=r[l];Array.isArray(o)?function Rf(s,t,e){const n=document.createElement("select");n.classList.add(`ql-${t}`),e.forEach(r=>{const l=document.createElement("option");!1!==r?l.setAttribute("value",String(r)):l.setAttribute("selected","selected"),n.appendChild(l)}),s.appendChild(n)}(n,l,o):Dl(n,l,o)}}),s.appendChild(n)})}(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else this.container="string"==typeof this.options.container?document.querySelector(this.options.container):this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const l=this.options.handlers?.[r];l&&this.addHandler(r,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(x.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})):kl.error("Container required for toolbar",this.options)}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(l=>0===l.indexOf("ql-"));n&&(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null!=this.handlers[n]||null!=this.quill.scroll.query(n)?(e.addEventListener("SELECT"===e.tagName?"change":"click",l=>{let o;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];o=!h.hasAttribute("selected")&&(h.value||!1)}else o=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),l.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(null!=this.handlers[n])this.handlers[n].call(this,o);else if(this.quill.scroll.query(n).prototype instanceof Xe){if(o=prompt(`Enter ${n}`),!o)return;this.quill.updateContents((new(P())).retain(c.index).delete(c.length).insert({[n]:o}),x.sources.USER)}else this.quill.format(n,o,x.sources.USER);this.update(c)}),this.controls.push([n,e])):kl.warn("ignoring attaching to nonexistent format",n,e))}update(e){const n=null==e?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[l,o]=r;if("SELECT"===o.tagName){let c=null;if(null==e)c=null;else if(null==n[l])c=o.querySelector("option[selected]");else if(!Array.isArray(n[l])){let h=n[l];"string"==typeof h&&(h=h.replace(/"/g,'\\"')),c=o.querySelector(`option[value="${h}"]`)}null==c?(o.value="",o.selectedIndex=-1):c.selected=!0}else if(null==e)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const c=n[l],h=c===o.getAttribute("value")||null!=c&&c.toString()===o.getAttribute("value")||null==c&&!o.getAttribute("value");o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}else{const c=null!=n[l];o.classList.toggle("ql-active",c),o.setAttribute("aria-pressed",c.toString())}})}}return s.DEFAULTS={},s})();function Dl(s,t,e){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),null!=e?(n.value=e,n.setAttribute("aria-label",`${t}: ${e}`)):n.setAttribute("aria-label",t),s.appendChild(n)}Bl.DEFAULTS={container:null,handlers:{clean(){const s=this.quill.getSelection();if(null!=s)if(0===s.length){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{null!=this.quill.scroll.query(e,j.INLINE)&&this.quill.format(e,!1,x.sources.USER)})}else this.quill.removeFormat(s,x.sources.USER)},direction(s){const{align:t}=this.quill.getFormat();"rtl"===s&&null==t?this.quill.format("align","right",x.sources.USER):!s&&"right"===t&&this.quill.format("align",!1,x.sources.USER),this.quill.format("direction",s,x.sources.USER)},indent(s){const t=this.quill.getSelection(),e=this.quill.getFormat(t),n=parseInt(e.indent||0,10);if("+1"===s||"-1"===s){let r="+1"===s?1:-1;"rtl"===e.direction&&(r*=-1),this.quill.format("indent",n+r,x.sources.USER)}},link(s){!0===s&&(s=prompt("Enter link URL:")),this.quill.format("link",s,x.sources.USER)},list(s){const t=this.quill.getSelection(),e=this.quill.getFormat(t);this.quill.format("list","check"===s?"checked"!==e.list&&"unchecked"!==e.list&&"unchecked":s,x.sources.USER)}}};const Rl='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',zs={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Rl,"code-block":Rl,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let Ul=0;function Fl(s,t){s.setAttribute(t,`${"true"!==s.getAttribute(t)}`)}const hi=class Jf{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Fl(this.label,"aria-expanded"),Fl(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.selectItem(e,!0),r.preventDefault();break;case"Escape":this.escape(),r.preventDefault()}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Ul}`,Ul+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(n?.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},Pl=class Kf extends hi{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=r:n.style.fill=r)}},zl=class Yf extends hi{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=e[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},jl=class $f{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(s=>{const{overflowY:t}=getComputedStyle(s,null);return"visible"!==t&&"clip"!==t})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const r=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let o=0;return l.right>r.right&&(o=r.right-l.right,this.root.style.left=`${e+o}px`),l.left<r.left&&(o=r.left-l.left,this.root.style.left=`${e+o}px`),l.bottom>r.bottom&&(this.root.style.top=n-(t.bottom-t.top+(l.bottom-l.top))+"px",this.root.classList.add("ql-flip")),o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Wf=[!1,"center","right","justify"],Xf=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],ep=[!1,"serif","monospace"],tp=["1","2","3",!1],np=["small",!1,"large","huge"];class js extends ni{constructor(t,e){super(t,e);const n=r=>{document.body.contains(t.root)?(null!=this.tooltip&&!this.tooltip.root.contains(r.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach(l=>{l.container.contains(r.target)||l.close()})):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),null!=e[l]))if("direction"===l)n.innerHTML=e[l][""]+e[l].rtl;else if("string"==typeof e[l])n.innerHTML=e[l];else{const o=n.value||"";null!=o&&e[l][o]&&(n.innerHTML=e[l][o])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(r=>{if(r.classList.contains("ql-align")&&(null==r.querySelector("option")&&Hs(r,Wf),"object"==typeof e.align))return new zl(r,e.align);if(r.classList.contains("ql-background")||r.classList.contains("ql-color")){const l=r.classList.contains("ql-background")?"background":"color";return null==r.querySelector("option")&&Hs(r,Xf,"background"===l?"#ffffff":"#000000"),new Pl(r,e[l])}return null==r.querySelector("option")&&(r.classList.contains("ql-font")?Hs(r,ep):r.classList.contains("ql-header")?Hs(r,tp):r.classList.contains("ql-size")&&Hs(r,np)),new hi(r)}),this.quill.on(U.events.EDITOR_CHANGE,()=>{this.pickers.forEach(r=>{r.update()})})}}js.DEFAULTS=Wt({},ni.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let s=this.container.querySelector("input.ql-image[type=file]");null==s&&(s=document.createElement("input"),s.setAttribute("type","file"),s.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),s.classList.add("ql-image"),s.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,s.files),s.value=""}),this.container.appendChild(s)),s.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Hl extends jl{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,U.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,U.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function sp(s){let t=s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=s.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:s}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,U.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",U.sources.USER),this.quill.setSelection(n+2,U.sources.USER)}break}}this.textbox.value="",this.hide()}}function Hs(s,t){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(n=>{const r=document.createElement("option");n===e?r.setAttribute("selected","selected"):r.setAttribute("value",String(n)),s.appendChild(r)})}const ip=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class rp extends Hl{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(U.events.EDITOR_CHANGE,(n,r,l,o)=>{if(n===U.events.SELECTION_CHANGE)if(null!=r&&r.length>0&&o===U.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(r.index,r.length);if(1===c.length){const h=this.quill.getBounds(r);null!=h&&this.position(h)}else{const h=c[c.length-1],p=this.quill.getIndex(h),y=Math.min(h.length()-1,r.index+r.length-p),L=this.quill.getBounds(new Sn(p,y));null!=L&&this.position(L)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(U.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft=-1*e-n.offsetWidth/2+"px"),e}}class Ql extends js{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=ip),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new rp(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),zs),this.buildPickers(t.container.querySelectorAll("select"),zs))}}Ql.DEFAULTS=Wt({},js.DEFAULTS,{modules:{toolbar:{handlers:{link(s){s?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});const lp=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class op extends Hl{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(null!=this.linkRange){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,U.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(U.events.SELECTION_CHANGE,(t,e,n)=>{if(null!=t){if(0===t.length&&n===U.sources.USER){const[r,l]=this.quill.scroll.descendant(ci,t.index);if(null!=r){this.linkRange=new Sn(t.index-l,r.length());const o=ci.formats(r.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);return void(null!=c&&this.position(c))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class Zl extends js{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=lp),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),zs),this.buildPickers(t.container.querySelectorAll("select"),zs),this.tooltip=new op(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,n)=>{t.handlers.link.call(t,!n.format.link)}))}}Zl.DEFAULTS=Wt({},js.DEFAULTS,{modules:{toolbar:{handlers:{link(s){if(s){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1)}}}}});const ap=Zl;nr.register({"attributors/attribute/direction":gl,"attributors/class/align":dl,"attributors/class/background":Sd,"attributors/class/color":Ed,"attributors/class/direction":ml,"attributors/class/font":vl,"attributors/class/size":xl,"attributors/style/align":fl,"attributors/style/background":Yi,"attributors/style/color":Ki,"attributors/style/direction":_l,"attributors/style/font":yl,"attributors/style/size":Tl},!0),nr.register({"formats/align":dl,"formats/direction":ml,"formats/indent":wf,"formats/background":Yi,"formats/color":Ki,"formats/font":vl,"formats/size":xl,"formats/blockquote":Cf,"formats/code-block":Ge,"formats/header":Ef,"formats/list":ir,"formats/bold":rr,"formats/code":Ad,"formats/italic":Sf,"formats/link":ci,"formats/script":Af,"formats/strike":Nf,"formats/underline":If,"formats/formula":Lf,"formats/image":qf,"formats/video":Of,"modules/syntax":Ml,"modules/table":class kf extends Nt{static register(){x.register(Ft),x.register(Ln),x.register(nn),x.register(lr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(lr).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(x.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(x.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(x.sources.USER),this.quill.setSelection(e,x.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==Ft.blotName)return[null,null,null,-1];const r=e.parent;return[r.parent.parent,r,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,r,l]=this.getTable(e);if(null==l)return;const o=l.cellOffset();n.insertColumn(o+t),this.quill.update(x.sources.USER);let c=r.rowOffset();0===t&&(c+=1),this.quill.setSelection(e.index+c,e.length,x.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,r,l]=this.getTable(e);if(null==l)return;const o=r.rowOffset();n.insertRow(o+t),this.quill.update(x.sources.USER),t>0?this.quill.setSelection(e,x.sources.SILENT):this.quill.setSelection(e.index+r.children.length,e.length,x.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const r=new Array(t).fill(0).reduce(l=>{const o=new Array(e).fill("\n").join("");return l.insert(o,{table:or()})},(new(P())).retain(n.index));this.quill.updateContents(r,x.sources.USER),this.quill.setSelection(n.index,x.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(x.events.SCROLL_OPTIMIZE,t=>{t.some(e=>!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(this.quill.once(x.events.TEXT_CHANGE,(n,r,l)=>{l===x.sources.USER&&this.balanceTables()}),!0))})}},"modules/toolbar":Bl,"themes/bubble":Ql,"themes/snow":ap,"ui/icons":zs,"ui/picker":hi,"ui/icon-picker":zl,"ui/color-picker":Pl,"ui/tooltip":jl},!0);const cp=nr;function up(s,t){1&s&&i.GkF(0)}function hp(s,t){if(1&s&&(i.TgZ(0,"div",3),i.Hsn(1),i.YNc(2,up,1,0,"ng-container",4),i.qZA()),2&s){const e=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",e.headerTemplate)}}function dp(s,t){1&s&&(i.TgZ(0,"div",3)(1,"span",5)(2,"select",6)(3,"option",7),i._uU(4,"Heading"),i.qZA(),i.TgZ(5,"option",8),i._uU(6,"Subheading"),i.qZA(),i.TgZ(7,"option",9),i._uU(8,"Normal"),i.qZA()(),i.TgZ(9,"select",10)(10,"option",9),i._uU(11,"Sans Serif"),i.qZA(),i.TgZ(12,"option",11),i._uU(13,"Serif"),i.qZA(),i.TgZ(14,"option",12),i._uU(15,"Monospace"),i.qZA()()(),i.TgZ(16,"span",5),i._UZ(17,"button",13)(18,"button",14)(19,"button",15),i.qZA(),i.TgZ(20,"span",5),i._UZ(21,"select",16)(22,"select",17),i.qZA(),i.TgZ(23,"span",5),i._UZ(24,"button",18)(25,"button",19),i.TgZ(26,"select",20),i._UZ(27,"option",9),i.TgZ(28,"option",21),i._uU(29,"center"),i.qZA(),i.TgZ(30,"option",22),i._uU(31,"right"),i.qZA(),i.TgZ(32,"option",23),i._uU(33,"justify"),i.qZA()()(),i.TgZ(34,"span",5),i._UZ(35,"button",24)(36,"button",25)(37,"button",26),i.qZA(),i.TgZ(38,"span",5),i._UZ(39,"button",27),i.qZA()())}const fp=[[["p-header"]]],pp=["p-header"],gp={provide:pe.JU,useExisting:(0,i.Gpc)(()=>Gl),multi:!0};let Gl=(()=>{class s{el;style;styleClass;placeholder;formats;modules;bounds;scrollingContainer;debug;get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.quill&&(this._readonly?this.quill.disable():this.quill.enable())}onInit=new i.vpe;onTextChange=new i.vpe;onSelectionChange=new i.vpe;templates;toolbar;value;delayedCommand=null;_readonly=!1;onModelChange=()=>{};onModelTouched=()=>{};quill;headerTemplate;get isAttachedQuillEditorToDOM(){return this.quillElements?.editorElement?.isConnected}quillElements;constructor(e){this.el=e}ngAfterViewInit(){this.initQuillElements(),this.isAttachedQuillEditorToDOM&&this.initQuillEditor()}ngAfterViewChecked(){!this.quill&&this.isAttachedQuillEditorToDOM&&this.initQuillEditor(),this.delayedCommand&&this.isAttachedQuillEditorToDOM&&(this.delayedCommand(),this.delayedCommand=null)}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()&&(this.headerTemplate=e.template)})}writeValue(e){if(this.value=e,this.quill)if(e){const n=()=>{this.quill.setContents(this.quill.clipboard.convert(this.value))};this.isAttachedQuillEditorToDOM?n():this.delayedCommand=n}else{const n=()=>{this.quill.setText("")};this.isAttachedQuillEditorToDOM?n():this.delayedCommand=n}}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}getQuill(){return this.quill}initQuillEditor(){this.initQuillElements();const{toolbarElement:e,editorElement:n}=this.quillElements;let r={toolbar:e},l=this.modules?{...r,...this.modules}:r;this.quill=new cp(n,{modules:l,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer}),this.value&&this.quill.setContents(this.quill.clipboard.convert(this.value)),this.quill.on("text-change",(o,c,h)=>{if("user"===h){let p=X.p.findSingle(n,".ql-editor").innerHTML,y=this.quill.getText().trim();"<p><br></p>"===p&&(p=null),this.onTextChange.emit({htmlValue:p,textValue:y,delta:o,source:h}),this.onModelChange(p),this.onModelTouched()}}),this.quill.on("selection-change",(o,c,h)=>{this.onSelectionChange.emit({range:o,oldRange:c,source:h})}),this.onInit.emit({editor:this.quill})}initQuillElements(){this.quillElements||(this.quillElements={editorElement:X.p.findSingle(this.el.nativeElement,"div.p-editor-content"),toolbarElement:X.p.findSingle(this.el.nativeElement,"div.p-editor-toolbar")})}static \u0275fac=function(n){return new(n||s)(i.Y36(i.SBq))};static \u0275cmp=i.Xpm({type:s,selectors:[["p-editor"]],contentQueries:function(n,r,l){if(1&n&&(i.Suo(l,v.h4,5),i.Suo(l,v.jx,4)),2&n){let o;i.iGM(o=i.CRH())&&(r.toolbar=o.first),i.iGM(o=i.CRH())&&(r.templates=o)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onInit:"onInit",onTextChange:"onTextChange",onSelectionChange:"onSelectionChange"},features:[i._Bn([gp])],ngContentSelectors:pp,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(n,r){1&n&&(i.F$t(fp),i.TgZ(0,"div",0),i.YNc(1,hp,3,1,"div",1),i.YNc(2,dp,40,0,"div",1),i._UZ(3,"div",2),i.qZA()),2&n&&(i.Tol(r.styleClass),i.Q6J("ngClass","p-editor-container"),i.xp6(1),i.Q6J("ngIf",r.toolbar||r.headerTemplate),i.xp6(1),i.Q6J("ngIf",!r.toolbar&&!r.headerTemplate),i.xp6(1),i.Q6J("ngStyle",r.style))},dependencies:[B.mk,B.O5,B.tP,B.PC],styles:[".p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}\n"],encapsulation:2,changeDetection:0})}return s})(),mp=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez,v.m8]})}return s})();var Jl=w(3714),Kl=w(7213),Qs=w(9862),Yl=w(4713),Vl=w(2332);let $l=(()=>{class s extends Yl.s{pathId;ngOnInit(){this.pathId="url(#"+(0,Vl.Th)()+")"}static \u0275fac=function(){let e;return function(r){return(e||(e=i.n5z(s)))(r||s)}}();static \u0275cmp=i.Xpm({type:s,selectors:[["PlusIcon"]],standalone:!0,features:[i.qOj,i.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,r){1&n&&(i.O4$(),i.TgZ(0,"svg",0)(1,"g"),i._UZ(2,"path",1),i.qZA(),i.TgZ(3,"defs")(4,"clipPath",2),i._UZ(5,"rect",3),i.qZA()()()),2&n&&(i.Tol(r.getClassNames()),i.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),i.xp6(1),i.uIk("clip-path",r.pathId),i.xp6(3),i.Q6J("id",r.pathId))},encapsulation:2})}return s})();var di=w(7778);let Wl=(()=>{class s extends Yl.s{pathId;ngOnInit(){this.pathId="url(#"+(0,Vl.Th)()+")"}static \u0275fac=function(){let e;return function(r){return(e||(e=i.n5z(s)))(r||s)}}();static \u0275cmp=i.Xpm({type:s,selectors:[["UploadIcon"]],standalone:!0,features:[i.qOj,i.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,r){1&n&&(i.O4$(),i.TgZ(0,"svg",0)(1,"g"),i._UZ(2,"path",1),i.qZA(),i.TgZ(3,"defs")(4,"clipPath",2),i._UZ(5,"rect",3),i.qZA()()()),2&n&&(i.Tol(r.getClassNames()),i.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),i.xp6(1),i.uIk("clip-path",r.pathId),i.xp6(3),i.Q6J("id",r.pathId))},encapsulation:2})}return s})();var qn=w(6825),Xl=w(2591),eo=w(2736),to=w(3823),no=w(8468),fi=w(4480),_p=w(5592),bp=w(2832),vp=w(671);function Tp(s,t){if(1&s&&i._UZ(0,"span"),2&s){const e=i.oxw().$implicit;i.Tol("p-message-icon pi "+e.icon),i.uIk("data-pc-section","icon")}}function wp(s,t){1&s&&i._UZ(0,"CheckIcon"),2&s&&i.uIk("data-pc-section","icon")}function Cp(s,t){1&s&&i._UZ(0,"InfoCircleIcon"),2&s&&i.uIk("data-pc-section","icon")}function Ep(s,t){1&s&&i._UZ(0,"TimesCircleIcon"),2&s&&i.uIk("data-pc-section","icon")}function Sp(s,t){1&s&&i._UZ(0,"ExclamationTriangleIcon"),2&s&&i.uIk("data-pc-section","icon")}function Ap(s,t){if(1&s&&(i.TgZ(0,"span",10),i.ynx(1),i.YNc(2,wp,1,1,"CheckIcon",11),i.YNc(3,Cp,1,1,"InfoCircleIcon",11),i.YNc(4,Ep,1,1,"TimesCircleIcon",11),i.YNc(5,Sp,1,1,"ExclamationTriangleIcon",11),i.BQk(),i.qZA()),2&s){const e=i.oxw().$implicit;i.xp6(2),i.Q6J("ngIf","success"===e.severity),i.xp6(1),i.Q6J("ngIf","info"===e.severity),i.xp6(1),i.Q6J("ngIf","error"===e.severity),i.xp6(1),i.Q6J("ngIf","warn"===e.severity)}}function Np(s,t){if(1&s&&i._UZ(0,"span",14),2&s){const e=i.oxw(2).$implicit;i.Q6J("innerHTML",e.summary,i.oJD),i.uIk("data-pc-section","summary")}}function Ip(s,t){if(1&s&&i._UZ(0,"span",15),2&s){const e=i.oxw(2).$implicit;i.Q6J("innerHTML",e.detail,i.oJD),i.uIk("data-pc-section","detail")}}function Lp(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Np,1,2,"span",12),i.YNc(2,Ip,1,2,"span",13),i.BQk()),2&s){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",e.summary),i.xp6(1),i.Q6J("ngIf",e.detail)}}function qp(s,t){if(1&s&&(i.TgZ(0,"span",18),i._uU(1),i.qZA()),2&s){const e=i.oxw(2).$implicit;i.uIk("data-pc-section","summary"),i.xp6(1),i.Oqu(e.summary)}}function Op(s,t){if(1&s&&(i.TgZ(0,"span",19),i._uU(1),i.qZA()),2&s){const e=i.oxw(2).$implicit;i.uIk("data-pc-section","detail"),i.xp6(1),i.Oqu(e.detail)}}function Mp(s,t){if(1&s&&(i.YNc(0,qp,2,2,"span",16),i.YNc(1,Op,2,2,"span",17)),2&s){const e=i.oxw().$implicit;i.Q6J("ngIf",e.summary),i.xp6(1),i.Q6J("ngIf",e.detail)}}function kp(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",function(){i.CHM(e);const r=i.oxw().index,l=i.oxw(2);return i.KtG(l.removeMessage(r))}),i._UZ(1,"TimesIcon",21),i.qZA()}2&s&&(i.uIk("aria-label","Close")("data-pc-section","closebutton"),i.xp6(1),i.Q6J("styleClass","p-message-close-icon"),i.uIk("data-pc-section","closeicon"))}const Bp=function(s,t){return{showTransitionParams:s,hideTransitionParams:t}},Dp=function(s){return{value:"visible",params:s}};function Rp(s,t){if(1&s&&(i.TgZ(0,"div",4)(1,"div",5),i.YNc(2,Tp,1,3,"span",6),i.YNc(3,Ap,6,4,"span",7),i.YNc(4,Lp,3,2,"ng-container",1),i.YNc(5,Mp,2,2,"ng-template",null,8,i.W1O),i.YNc(7,kp,2,4,"button",9),i.qZA()()),2&s){const e=t.$implicit,n=i.MAs(6),r=i.oxw(2);i.Tol("p-message p-message-"+e.severity),i.Q6J("@messageAnimation",i.VKq(12,Dp,i.WLB(9,Bp,r.showTransitionOptions,r.hideTransitionOptions))),i.xp6(1),i.uIk("data-pc-section","wrapper"),i.xp6(1),i.Q6J("ngIf",e.icon),i.xp6(1),i.Q6J("ngIf",!e.icon),i.xp6(1),i.Q6J("ngIf",!r.escape)("ngIfElse",n),i.xp6(3),i.Q6J("ngIf",r.closable)}}function Up(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Rp,8,14,"div",3),i.BQk()),2&s){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.messages)}}function Fp(s,t){1&s&&i.GkF(0)}function Pp(s,t){if(1&s&&(i.TgZ(0,"div",22)(1,"div",5),i.YNc(2,Fp,1,0,"ng-container",23),i.qZA()()),2&s){const e=i.oxw();i.Q6J("ngClass","p-message p-message-"+e.severity),i.xp6(2),i.Q6J("ngTemplateOutlet",e.contentTemplate)}}let zp=(()=>{class s{messageService;el;cd;set value(e){this.messages=e,this.startMessageLifes(this.messages)}closable=!0;style;styleClass;enableService=!0;key;escape=!0;severity;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";valueChange=new i.vpe;templates;messages;messageSubscription;clearSubscription;timerSubscriptions=[];contentTemplate;constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){Array.isArray(e)||(e=[e]);const n=e.filter(r=>this.key===r.key);this.messages=this.messages?[...this.messages,...n]:[...n],this.startMessageLifes(n),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.messages&&this.messages.length>0)}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(e){this.messages=this.messages?.filter((n,r)=>r!==e),this.valueChange.emit(this.messages)}get icon(){const e=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(e=>e.unsubscribe())}startMessageLifes(e){e?.forEach(n=>n.life&&this.startMessageLife(n))}startMessageLife(e){const n=function xp(s=0,t,e=bp.P){let n=-1;return null!=t&&((0,vp.K)(t)?e=t:n=t),new _p.y(r=>{let l=function yp(s){return s instanceof Date&&!isNaN(s)}(s)?+s-e.now():s;l<0&&(l=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},l)})}(e.life).subscribe(()=>{this.messages=this.messages?.filter(r=>r!==e),this.timerSubscriptions=this.timerSubscriptions?.filter(r=>r!==n),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(n)}static \u0275fac=function(n){return new(n||s)(i.Y36(v.ez,8),i.Y36(i.SBq),i.Y36(i.sBO))};static \u0275cmp=i.Xpm({type:s,selectors:[["p-messages"]],contentQueries:function(n,r,l){if(1&n&&i.Suo(l,v.jx,4),2&n){let o;i.iGM(o=i.CRH())&&(r.templates=o)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:8,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"class",4,"ngIf"],["class","p-message-icon",4,"ngIf"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-message-icon"],[4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[3,"styleClass"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(n,r){if(1&n&&(i.TgZ(0,"div",0),i.YNc(1,Up,2,1,"ng-container",1),i.YNc(2,Pp,3,2,"ng-template",null,2,i.W1O),i.qZA()),2&n){const l=i.MAs(3);i.Tol(r.styleClass),i.Q6J("ngStyle",r.style),i.uIk("aria-atomic",!0)("aria-live","assertive")("data-pc-name","message"),i.xp6(1),i.Q6J("ngIf",!r.contentTemplate)("ngIfElse",l)}},dependencies:function(){return[B.mk,B.sg,B.O5,B.tP,B.PC,fi.H,Xl.n,to.u,no.x,eo.L,di.q]},styles:["@layer primeng{.p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center;flex:none}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}}\n"],encapsulation:2,data:{animation:[(0,qn.X$)("messageAnimation",[(0,qn.eR)(":enter",[(0,qn.oB)({opacity:0,transform:"translateY(-25%)"}),(0,qn.jt)("{{showTransitionParams}}")]),(0,qn.eR)(":leave",[(0,qn.jt)("{{hideTransitionParams}}",(0,qn.oB)({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return s})(),so=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez,fi.T,Xl.n,to.u,no.x,eo.L,di.q]})}return s})();function jp(s,t){if(1&s&&(i.TgZ(0,"div",5),i._uU(1),i.qZA()),2&s){const e=i.oxw(2);i.Udp("display",null!=e.value&&0!==e.value?"flex":"none"),i.uIk("data-pc-section","label"),i.xp6(1),i.AsE("",e.value,"",e.unit,"")}}function Hp(s,t){if(1&s&&(i.TgZ(0,"div",3),i.YNc(1,jp,2,5,"div",4),i.qZA()),2&s){const e=i.oxw();i.Udp("width",e.value+"%")("background",e.color),i.uIk("data-pc-section","value"),i.xp6(1),i.Q6J("ngIf",e.showValue)}}function Qp(s,t){if(1&s&&(i.TgZ(0,"div",6),i._UZ(1,"div",7),i.qZA()),2&s){const e=i.oxw();i.uIk("data-pc-section","container"),i.xp6(1),i.Udp("background",e.color),i.uIk("data-pc-section","value")}}const Zp=function(s,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":s,"p-progressbar-indeterminate":t}};let Gp=(()=>{class s{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;static \u0275fac=function(n){return new(n||s)};static \u0275cmp=i.Xpm({type:s,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i.YNc(1,Hp,2,6,"div",1),i.YNc(2,Qp,2,4,"div",2),i.qZA()),2&n&&(i.Tol(r.styleClass),i.Q6J("ngStyle",r.style)("ngClass",i.WLB(11,Zp,"determinate"===r.mode,"indeterminate"===r.mode)),i.uIk("aria-valuemin",0)("aria-valuenow",r.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),i.xp6(1),i.Q6J("ngIf","determinate"===r.mode),i.xp6(1),i.Q6J("ngIf","indeterminate"===r.mode))},dependencies:[B.mk,B.O5,B.PC],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return s})(),io=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez]})}return s})();var Jp=w(6593);const Kp=["advancedfileinput"],Yp=["basicfileinput"],Vp=["content"];function $p(s,t){if(1&s&&i._UZ(0,"span",18),2&s){const e=i.oxw(2);i.Tol(e.chooseIcon),i.Q6J("ngClass","p-button-icon p-button-icon-left"),i.uIk("aria-label",!0)("data-pc-section","chooseicon")}}function Wp(s,t){1&s&&i._UZ(0,"PlusIcon",21),2&s&&(i.Q6J("styleClass","p-button-icon p-button-icon-left"),i.uIk("aria-label",!0)("data-pc-section","chooseicon"))}function Xp(s,t){}function eg(s,t){1&s&&i.YNc(0,Xp,0,0,"ng-template")}function tg(s,t){if(1&s&&(i.TgZ(0,"span",22),i.YNc(1,eg,1,0,null,11),i.qZA()),2&s){const e=i.oxw(3);i.uIk("aria-label",!0)("data-pc-section","chooseicon"),i.xp6(1),i.Q6J("ngTemplateOutlet",e.chooseIconTemplate)}}function ng(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Wp,1,3,"PlusIcon",19),i.YNc(2,tg,2,3,"span",20),i.BQk()),2&s){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!e.chooseIconTemplate),i.xp6(1),i.Q6J("ngIf",e.chooseIconTemplate)}}function sg(s,t){if(1&s&&i._UZ(0,"span",25),2&s){const e=i.oxw(3);i.Q6J("ngClass",e.uploadIcon),i.uIk("aria-hidden",!0)}}function ig(s,t){1&s&&i._UZ(0,"UploadIcon",21),2&s&&i.Q6J("styleClass","p-button-icon p-button-icon-left")}function rg(s,t){}function lg(s,t){1&s&&i.YNc(0,rg,0,0,"ng-template")}function og(s,t){if(1&s&&(i.TgZ(0,"span",22),i.YNc(1,lg,1,0,null,11),i.qZA()),2&s){const e=i.oxw(4);i.uIk("aria-hidden",!0),i.xp6(1),i.Q6J("ngTemplateOutlet",e.uploadIconTemplate)}}function ag(s,t){if(1&s&&(i.ynx(0),i.YNc(1,ig,1,1,"UploadIcon",19),i.YNc(2,og,2,2,"span",20),i.BQk()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngIf",!e.uploadIconTemplate),i.xp6(1),i.Q6J("ngIf",e.uploadIconTemplate)}}function cg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"p-button",23),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw(2);return i.KtG(r.upload())}),i.YNc(1,sg,1,2,"span",24),i.YNc(2,ag,3,2,"ng-container",8),i.qZA()}if(2&s){const e=i.oxw(2);i.Q6J("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass",e.uploadStyleClass),i.xp6(1),i.Q6J("ngIf",e.uploadIcon),i.xp6(1),i.Q6J("ngIf",!e.uploadIcon)}}function ug(s,t){if(1&s&&i._UZ(0,"span",25),2&s){const e=i.oxw(3);i.Q6J("ngClass",e.cancelIcon)}}function hg(s,t){1&s&&i._UZ(0,"TimesIcon",21),2&s&&(i.Q6J("styleClass","p-button-icon p-button-icon-left"),i.uIk("aria-hidden",!0))}function dg(s,t){}function fg(s,t){1&s&&i.YNc(0,dg,0,0,"ng-template")}function pg(s,t){if(1&s&&(i.TgZ(0,"span",22),i.YNc(1,fg,1,0,null,11),i.qZA()),2&s){const e=i.oxw(4);i.uIk("aria-hidden",!0),i.xp6(1),i.Q6J("ngTemplateOutlet",e.cancelIconTemplate)}}function gg(s,t){if(1&s&&(i.ynx(0),i.YNc(1,hg,1,2,"TimesIcon",19),i.YNc(2,pg,2,2,"span",20),i.BQk()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngIf",!e.cancelIconTemplate),i.xp6(1),i.Q6J("ngIf",e.cancelIconTemplate)}}function mg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"p-button",23),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw(2);return i.KtG(r.clear())}),i.YNc(1,ug,1,1,"span",24),i.YNc(2,gg,3,2,"ng-container",8),i.qZA()}if(2&s){const e=i.oxw(2);i.Q6J("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass",e.cancelStyleClass),i.xp6(1),i.Q6J("ngIf",e.cancelIcon),i.xp6(1),i.Q6J("ngIf",!e.cancelIcon)}}function _g(s,t){1&s&&i.GkF(0)}function bg(s,t){if(1&s&&i._UZ(0,"p-progressBar",26),2&s){const e=i.oxw(2);i.Q6J("value",e.progress)("showValue",!1)}}function vg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"img",33),i.NdJ("error",function(r){i.CHM(e);const l=i.oxw(5);return i.KtG(l.imageError(r))}),i.qZA()}if(2&s){const e=i.oxw().$implicit,n=i.oxw(4);i.Q6J("src",e.objectURL,i.LSH)("width",n.previewWidth)}}function yg(s,t){1&s&&i._UZ(0,"TimesIcon")}function xg(s,t){}function Tg(s,t){1&s&&i.YNc(0,xg,0,0,"ng-template")}function wg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",29)(1,"div"),i.YNc(2,vg,1,2,"img",30),i.qZA(),i.TgZ(3,"div",31),i._uU(4),i.qZA(),i.TgZ(5,"div"),i._uU(6),i.qZA(),i.TgZ(7,"div")(8,"button",32),i.NdJ("click",function(r){const o=i.CHM(e).index,c=i.oxw(4);return i.KtG(c.remove(r,o))}),i.YNc(9,yg,1,0,"TimesIcon",8),i.YNc(10,Tg,1,0,null,11),i.qZA()()()}if(2&s){const e=t.$implicit,n=i.oxw(4);i.xp6(2),i.Q6J("ngIf",n.isImage(e)),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Oqu(n.formatSize(e.size)),i.xp6(2),i.Tol(n.removeStyleClass),i.Q6J("disabled",n.uploading),i.xp6(1),i.Q6J("ngIf",!n.cancelIconTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",n.cancelIconTemplate)}}function Cg(s,t){if(1&s&&(i.TgZ(0,"div"),i.YNc(1,wg,11,8,"div",28),i.qZA()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",e.files)}}function Eg(s,t){}function Sg(s,t){if(1&s&&(i.TgZ(0,"div"),i.YNc(1,Eg,0,0,"ng-template",34),i.qZA()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function Ag(s,t){if(1&s&&(i.TgZ(0,"div",27),i.YNc(1,Cg,2,1,"div",8),i.YNc(2,Sg,2,2,"div",8),i.qZA()),2&s){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!e.fileTemplate),i.xp6(1),i.Q6J("ngIf",e.fileTemplate)}}function Ng(s,t){1&s&&i.GkF(0)}const Ig=function(s,t){return{"p-focus":s,"p-disabled":t}},Lg=function(s){return{$implicit:s}};function qg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",2)(1,"div",3)(2,"span",4),i.NdJ("focus",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.onFocus())})("blur",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.onBlur())})("click",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.choose())})("keydown.enter",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.choose())}),i.TgZ(3,"input",5,6),i.NdJ("change",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onFileSelect(r))}),i.qZA(),i.YNc(5,$p,1,5,"span",7),i.YNc(6,ng,3,2,"ng-container",8),i.TgZ(7,"span",9),i._uU(8),i.qZA()(),i.YNc(9,cg,3,5,"p-button",10),i.YNc(10,mg,3,5,"p-button",10),i.YNc(11,_g,1,0,"ng-container",11),i.qZA(),i.TgZ(12,"div",12,13),i.NdJ("dragenter",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onDragEnter(r))})("dragleave",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onDragLeave(r))})("drop",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onDrop(r))}),i.YNc(14,bg,1,2,"p-progressBar",14),i._UZ(15,"p-messages",15),i.YNc(16,Ag,3,2,"div",16),i.YNc(17,Ng,1,0,"ng-container",17),i.qZA()()}if(2&s){const e=i.oxw();i.Tol(e.styleClass),i.Q6J("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),i.uIk("data-pc-name","fileupload")("data-pc-section","root"),i.xp6(1),i.uIk("data-pc-section","buttonbar"),i.xp6(1),i.Tol(e.chooseStyleClass),i.Q6J("ngClass",i.WLB(30,Ig,e.focus,e.disabled||e.isChooseDisabled())),i.uIk("data-pc-section","choosebutton"),i.xp6(1),i.Q6J("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),i.uIk("title","")("data-pc-section","input"),i.xp6(2),i.Q6J("ngIf",e.chooseIcon),i.xp6(1),i.Q6J("ngIf",!e.chooseIcon),i.xp6(1),i.uIk("data-pc-section","choosebuttonlabel"),i.xp6(1),i.Oqu(e.chooseButtonLabel),i.xp6(1),i.Q6J("ngIf",!e.auto&&e.showUploadButton),i.xp6(1),i.Q6J("ngIf",!e.auto&&e.showCancelButton),i.xp6(1),i.Q6J("ngTemplateOutlet",e.toolbarTemplate),i.xp6(1),i.uIk("data-pc-section","content"),i.xp6(2),i.Q6J("ngIf",e.hasFiles()),i.xp6(1),i.Q6J("value",e.msgs)("enableService",!1),i.xp6(1),i.Q6J("ngIf",e.hasFiles()),i.xp6(1),i.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",i.VKq(33,Lg,e.files))}}function Og(s,t){if(1&s&&i._UZ(0,"span",25),2&s){const e=i.oxw(3);i.Q6J("ngClass",e.uploadIcon)}}function Mg(s,t){1&s&&i._UZ(0,"UploadIcon",21),2&s&&i.Q6J("styleClass","p-button-icon p-button-icon-left")}function kg(s,t){}function Bg(s,t){1&s&&i.YNc(0,kg,0,0,"ng-template")}function Dg(s,t){if(1&s&&(i.TgZ(0,"span",22),i.YNc(1,Bg,1,0,null,11),i.qZA()),2&s){const e=i.oxw(4);i.xp6(1),i.Q6J("ngTemplateOutlet",e.uploadIconTemplate)}}function Rg(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Mg,1,1,"UploadIcon",19),i.YNc(2,Dg,2,1,"span",20),i.BQk()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngIf",!e.uploadIconTemplate),i.xp6(1),i.Q6J("ngIf",e.uploadIconTemplate)}}function Ug(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Og,1,1,"span",24),i.YNc(2,Rg,3,2,"ng-container",8),i.BQk()),2&s){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.uploadIcon),i.xp6(1),i.Q6J("ngIf",!e.uploadIcon)}}function Fg(s,t){if(1&s&&i._UZ(0,"span",42),2&s){const e=i.oxw(3);i.Q6J("ngClass",e.chooseIcon)}}function Pg(s,t){1&s&&i._UZ(0,"PlusIcon",21),2&s&&(i.Q6J("styleClass","p-button-icon p-button-icon-left pi"),i.uIk("aria-hidden",!0)("data-pc-section","uploadicon"))}function zg(s,t){}function jg(s,t){1&s&&i.YNc(0,zg,0,0,"ng-template")}function Hg(s,t){if(1&s&&(i.TgZ(0,"span",44),i.YNc(1,jg,1,0,null,11),i.qZA()),2&s){const e=i.oxw(4);i.uIk("aria-hidden",!0)("data-pc-section","uploadicon"),i.xp6(1),i.Q6J("ngTemplateOutlet",e.chooseIconTemplate)}}function Qg(s,t){if(1&s&&(i.ynx(0),i.YNc(1,Pg,1,3,"PlusIcon",19),i.YNc(2,Hg,2,3,"span",43),i.BQk()),2&s){const e=i.oxw(3);i.xp6(1),i.Q6J("ngIf",!e.chooseIconTemplate),i.xp6(1),i.Q6J("ngIf",e.chooseIconTemplate)}}function Zg(s,t){if(1&s&&(i.YNc(0,Fg,1,1,"span",41),i.YNc(1,Qg,3,2,"ng-container",8)),2&s){const e=i.oxw(2);i.Q6J("ngIf",e.chooseIcon),i.xp6(1),i.Q6J("ngIf",!e.chooseIcon)}}function Gg(s,t){if(1&s&&(i.TgZ(0,"span",9),i._uU(1),i.qZA()),2&s){const e=i.oxw(2);i.uIk("data-pc-section","label"),i.xp6(1),i.Oqu(e.basicButtonLabel)}}function Jg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"input",45,46),i.NdJ("change",function(r){i.CHM(e);const l=i.oxw(2);return i.KtG(l.onFileSelect(r))})("focus",function(){i.CHM(e);const r=i.oxw(2);return i.KtG(r.onFocus())})("blur",function(){i.CHM(e);const r=i.oxw(2);return i.KtG(r.onBlur())}),i.qZA()}if(2&s){const e=i.oxw(2);i.Q6J("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),i.uIk("data-pc-section","input")}}const Kg=function(s,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":s,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function Yg(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",35),i._UZ(1,"p-messages",15),i.TgZ(2,"span",36),i.NdJ("click",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.onBasicUploaderClick())})("keydown",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onBasicKeydown(r))}),i.YNc(3,Ug,3,2,"ng-container",37),i.YNc(4,Zg,2,2,"ng-template",null,38,i.W1O),i.YNc(6,Gg,2,2,"span",39),i.YNc(7,Jg,2,4,"input",40),i.qZA()()}if(2&s){const e=i.MAs(5),n=i.oxw();i.uIk("data-pc-name","fileupload"),i.xp6(1),i.Q6J("value",n.msgs)("enableService",!1),i.xp6(1),i.Tol(n.styleClass),i.Q6J("ngClass",i.l5B(12,Kg,!n.basicButtonLabel,n.hasFiles(),n.focus,n.disabled))("ngStyle",n.style),i.uIk("data-pc-section","choosebutton"),i.xp6(1),i.Q6J("ngIf",n.hasFiles()&&!n.auto)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",n.basicButtonLabel),i.xp6(1),i.Q6J("ngIf",!n.hasFiles())}}let Vg=(()=>{class s{document;platformId;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new i.vpe;onSend=new i.vpe;onUpload=new i.vpe;onError=new i.vpe;onClear=new i.vpe;onRemove=new i.vpe;onSelect=new i.vpe;onProgress=new i.vpe;uploadHandler=new i.vpe;onImageError=new i.vpe;templates;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;constructor(e,n,r,l,o,c,h,p,y){this.document=e,this.platformId=n,this.renderer=r,this.el=l,this.sanitizer=o,this.zone=c,this.http=h,this.cd=p,this.config=y}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template;break;case"chooseicon":this.chooseIconTemplate=e.template;break;case"uploadicon":this.uploadIconTemplate=e.template;break;case"cancelicon":this.cancelIconTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){(0,B.NF)(this.platformId)&&"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let l=n[r];this.isFileSelected(l)||this.validate(l)&&(this.isImage(l)&&(l.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if((0,B.NF)(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept?.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case Qs.dt.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case Qs.dt.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case Qs.dt.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.uploadedFileCount=0,this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1),this.checkFileLimit()}isFileLimitExceeded(){const n=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=n&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<n}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.msgs??=[],this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(X.p.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||X.p.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){X.p.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){const l=this.getTranslation(v.ws.FILE_SIZE_TYPES);if(0===e)return`0 ${l[0]}`;const o=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,o)).toFixed(3)} ${l[o]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(v.ws.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(v.ws.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(v.ws.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||s)(i.Y36(B.K0),i.Y36(i.Lbi),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(Jp.H7),i.Y36(i.R0b),i.Y36(Qs.eN),i.Y36(i.sBO),i.Y36(v.b4))};static \u0275cmp=i.Xpm({type:s,selectors:[["p-fileUpload"]],contentQueries:function(n,r,l){if(1&n&&i.Suo(l,v.jx,4),2&n){let o;i.iGM(o=i.CRH())&&(r.templates=o)}},viewQuery:function(n,r){if(1&n&&(i.Gf(Kp,5),i.Gf(Yp,5),i.Gf(Vp,5)),2&n){let l;i.iGM(l=i.CRH())&&(r.advancedFileInput=l.first),i.iGM(l=i.CRH())&&(r.basicFileInput=l.first),i.iGM(l=i.CRH())&&(r.content=l.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass","class",4,"ngIf"],[4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"label","disabled","styleClass","onClick"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width","error",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"disabled","click"],[3,"src","width","error"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","click","keydown"],[4,"ngIf","ngIfElse"],["chooseSection",""],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(n,r){1&n&&(i.YNc(0,qg,18,35,"div",0),i.YNc(1,Yg,8,17,"div",1)),2&n&&(i.Q6J("ngIf","advanced"===r.mode),i.xp6(1),i.Q6J("ngIf","basic"===r.mode))},dependencies:function(){return[B.mk,B.sg,B.O5,B.tP,B.PC,Ne.Hq,Ne.zx,Gp,zp,fi.H,$l,Wl,di.q]},styles:["@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}\n"],encapsulation:2,changeDetection:0})}return s})(),$g=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez,Qs.JF,v.m8,Ne.hJ,io,so,fi.T,$l,Wl,di.q,v.m8,Ne.hJ,io,so]})}return s})();var ro=w(4777),lo=w(8608);const Wg=["container"],Xg=["content"],em=["xBar"],tm=["yBar"];function nm(s,t){1&s&&i.GkF(0)}const sm=["*"];let im=(()=>{class s{platformId;el;zone;cd;document;renderer;style;styleClass;step=5;containerViewChild;contentViewChild;xBarViewChild;yBarViewChild;templates;scrollYRatio;scrollXRatio;timeoutFrame=e=>setTimeout(e,0);initialized=!1;lastPageY;lastPageX;isXBarClicked=!1;isYBarClicked=!1;contentTemplate;lastScrollLeft=0;lastScrollTop=0;orientation="vertical";timer;windowResizeListener;contentScrollListener;mouseEnterListener;xBarMouseDownListener;yBarMouseDownListener;documentMouseMoveListener;documentMouseUpListener;constructor(e,n,r,l,o,c){this.platformId=e,this.el=n,this.zone=r,this.cd=l,this.document=o,this.renderer=c}ngAfterViewInit(){(0,B.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.moveBar(),this.moveBar=this.moveBar.bind(this),this.onXBarMouseDown=this.onXBarMouseDown.bind(this),this.onYBarMouseDown=this.onYBarMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.windowResizeListener=this.renderer.listen(window,"resize",this.moveBar),this.contentScrollListener=this.renderer.listen(this.contentViewChild.nativeElement,"scroll",this.moveBar),this.mouseEnterListener=this.renderer.listen(this.contentViewChild.nativeElement,"mouseenter",this.moveBar),this.xBarMouseDownListener=this.renderer.listen(this.xBarViewChild.nativeElement,"mousedown",this.onXBarMouseDown),this.yBarMouseDownListener=this.renderer.listen(this.yBarViewChild.nativeElement,"mousedown",this.onYBarMouseDown),this.calculateContainerHeight(),this.initialized=!0})}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}calculateContainerHeight(){let e=this.containerViewChild.nativeElement,n=this.contentViewChild.nativeElement,r=this.xBarViewChild.nativeElement;const l=this.document.defaultView;let o=l.getComputedStyle(e),c=l.getComputedStyle(r),h=X.p.getHeight(e)-parseInt(c.height,10);"none"!=o["max-height"]&&0==h&&(e.style.height=n.offsetHeight+parseInt(c.height,10)>parseInt(o["max-height"],10)?o["max-height"]:n.offsetHeight+parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)+"px")}moveBar(){let e=this.containerViewChild.nativeElement,n=this.contentViewChild.nativeElement,r=this.xBarViewChild.nativeElement,l=n.scrollWidth,o=n.clientWidth,c=-1*(e.clientHeight-r.clientHeight);this.scrollXRatio=o/l;let h=this.yBarViewChild.nativeElement,p=n.scrollHeight,y=n.clientHeight,L=-1*(e.clientWidth-h.clientWidth);this.scrollYRatio=y/p,this.requestAnimationFrame(()=>{if(this.scrollXRatio>=1)r.setAttribute("data-p-scrollpanel-hidden","true"),X.p.addClass(r,"p-scrollpanel-hidden");else{r.setAttribute("data-p-scrollpanel-hidden","false"),X.p.removeClass(r,"p-scrollpanel-hidden");const O=Math.max(100*this.scrollXRatio,10);r.style.cssText="width:"+O+"%; left:"+n.scrollLeft*(100-O)/(l-o)+"%;bottom:"+c+"px;"}if(this.scrollYRatio>=1)h.setAttribute("data-p-scrollpanel-hidden","true"),X.p.addClass(h,"p-scrollpanel-hidden");else{h.setAttribute("data-p-scrollpanel-hidden","false"),X.p.removeClass(h,"p-scrollpanel-hidden");const O=Math.max(100*this.scrollYRatio,10);h.style.cssText="height:"+O+"%; top: calc("+n.scrollTop*(100-O)/(p-y)+"% - "+r.clientHeight+"px);right:"+L+"px;"}}),this.cd.markForCheck()}onScroll(e){this.lastScrollLeft!==e.target.scrollLeft?(this.lastScrollLeft=e.target.scrollLeft,this.orientation="horizontal"):this.lastScrollTop!==e.target.scrollTop&&(this.lastScrollTop=e.target.scrollTop,this.orientation="vertical"),this.moveBar()}onKeyDown(e){if("vertical"===this.orientation)switch(e.code){case"ArrowDown":this.setTimer("scrollTop",this.step),e.preventDefault();break;case"ArrowUp":this.setTimer("scrollTop",-1*this.step),e.preventDefault();break;case"ArrowLeft":case"ArrowRight":e.preventDefault()}else if("horizontal"===this.orientation)switch(e.code){case"ArrowRight":this.setTimer("scrollLeft",this.step),e.preventDefault();break;case"ArrowLeft":this.setTimer("scrollLeft",-1*this.step),e.preventDefault();break;case"ArrowDown":case"ArrowUp":e.preventDefault()}}onKeyUp(){this.clearTimer()}repeat(e,n){this.contentViewChild.nativeElement[e]+=n,this.moveBar()}setTimer(e,n){this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,n)},40)}clearTimer(){this.timer&&clearTimeout(this.timer)}bindDocumentMouseListeners(){this.documentMouseMoveListener||(this.documentMouseMoveListener=e=>{this.onDocumentMouseMove(e)},this.document.addEventListener("mousemove",this.documentMouseMoveListener)),this.documentMouseUpListener||(this.documentMouseUpListener=e=>{this.onDocumentMouseUp(e)},this.document.addEventListener("mouseup",this.documentMouseUpListener))}unbindDocumentMouseListeners(){this.documentMouseMoveListener&&(this.document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null),this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)}onYBarMouseDown(e){this.isYBarClicked=!0,this.yBarViewChild.nativeElement.focus(),this.lastPageY=e.pageY,this.yBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","true"),X.p.addClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","true"),X.p.addClass(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),e.preventDefault()}onXBarMouseDown(e){this.isXBarClicked=!0,this.xBarViewChild.nativeElement.focus(),this.lastPageX=e.pageX,this.xBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),X.p.addClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),X.p.addClass(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),e.preventDefault()}onDocumentMouseMove(e){this.isXBarClicked?this.onMouseMoveForXBar(e):(this.isYBarClicked||this.onMouseMoveForXBar(e),this.onMouseMoveForYBar(e))}onMouseMoveForXBar(e){let n=e.pageX-this.lastPageX;this.lastPageX=e.pageX,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollLeft+=n/this.scrollXRatio})}onMouseMoveForYBar(e){let n=e.pageY-this.lastPageY;this.lastPageY=e.pageY,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollTop+=n/this.scrollYRatio})}scrollTop(e){let n=this.contentViewChild.nativeElement.scrollHeight-this.contentViewChild.nativeElement.clientHeight;this.contentViewChild.nativeElement.scrollTop=e=e>n?n:e>0?e:0}onFocus(e){this.xBarViewChild.nativeElement.isSameNode(e.target)?this.orientation="horizontal":this.yBarViewChild.nativeElement.isSameNode(e.target)&&(this.orientation="vertical")}onBlur(){"horizontal"===this.orientation&&(this.orientation="vertical")}onDocumentMouseUp(e){this.yBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),X.p.removeClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.xBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),X.p.removeClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),X.p.removeClass(this.document.body,"p-scrollpanel-grabbed"),this.unbindDocumentMouseListeners(),this.isXBarClicked=!1,this.isYBarClicked=!1}requestAnimationFrame(e){(window.requestAnimationFrame||this.timeoutFrame)(e)}unbindListeners(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null),this.contentScrollListener&&(this.contentScrollListener(),this.contentScrollListener=null),this.mouseEnterListener&&(this.mouseEnterListener(),this.mouseEnterListener=null),this.xBarMouseDownListener&&(this.xBarMouseDownListener(),this.xBarMouseDownListener=null),this.yBarMouseDownListener&&(this.yBarMouseDownListener(),this.yBarMouseDownListener=null)}ngOnDestroy(){this.initialized&&this.unbindListeners()}refresh(){this.moveBar()}static \u0275fac=function(n){return new(n||s)(i.Y36(i.Lbi),i.Y36(i.SBq),i.Y36(i.R0b),i.Y36(i.sBO),i.Y36(B.K0),i.Y36(i.Qsj))};static \u0275cmp=i.Xpm({type:s,selectors:[["p-scrollPanel"]],contentQueries:function(n,r,l){if(1&n&&i.Suo(l,v.jx,4),2&n){let o;i.iGM(o=i.CRH())&&(r.templates=o)}},viewQuery:function(n,r){if(1&n&&(i.Gf(Wg,5),i.Gf(Xg,5),i.Gf(em,5),i.Gf(tm,5)),2&n){let l;i.iGM(l=i.CRH())&&(r.containerViewChild=l.first),i.iGM(l=i.CRH())&&(r.contentViewChild=l.first),i.iGM(l=i.CRH())&&(r.xBarViewChild=l.first),i.iGM(l=i.CRH())&&(r.yBarViewChild=l.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",step:"step"},ngContentSelectors:sm,decls:11,vars:14,consts:[[3,"ngClass","ngStyle"],["container",""],[1,"p-scrollpanel-wrapper"],[1,"p-scrollpanel-content",3,"mouseenter","scroll"],["content",""],[4,"ngTemplateOutlet"],["tabindex","0","role","scrollbar",1,"p-scrollpanel-bar","p-scrollpanel-bar-x",3,"mousedown","keydown","keyup","focus","blur"],["xBar",""],["tabindex","0","role","scrollbar",1,"p-scrollpanel-bar","p-scrollpanel-bar-y",3,"mousedown","keydown","keyup","focus"],["yBar",""]],template:function(n,r){1&n&&(i.F$t(),i.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3,4),i.NdJ("mouseenter",function(){return r.moveBar()})("scroll",function(o){return r.onScroll(o)}),i.Hsn(5),i.YNc(6,nm,1,0,"ng-container",5),i.qZA()(),i.TgZ(7,"div",6,7),i.NdJ("mousedown",function(o){return r.onXBarMouseDown(o)})("keydown",function(o){return r.onKeyDown(o)})("keyup",function(){return r.onKeyUp()})("focus",function(o){return r.onFocus(o)})("blur",function(){return r.onBlur()}),i.qZA(),i.TgZ(9,"div",8,9),i.NdJ("mousedown",function(o){return r.onYBarMouseDown(o)})("keydown",function(o){return r.onKeyDown(o)})("keyup",function(){return r.onKeyUp()})("focus",function(o){return r.onFocus(o)}),i.qZA()()),2&n&&(i.Tol(r.styleClass),i.Q6J("ngClass","p-scrollpanel p-component")("ngStyle",r.style),i.uIk("data-pc-name","scrollpanel"),i.xp6(2),i.uIk("data-pc-section","wrapper"),i.xp6(1),i.uIk("data-pc-section","content"),i.xp6(3),i.Q6J("ngTemplateOutlet",r.contentTemplate),i.xp6(1),i.uIk("aria-orientation","horizontal")("aria-valuenow",r.lastScrollLeft)("data-pc-section","barx"),i.xp6(2),i.uIk("aria-orientation","vertical")("aria-valuenow",r.lastScrollTop)("data-pc-section","bary"))},dependencies:[B.mk,B.tP,B.PC],styles:["@layer primeng{.p-scrollpanel-wrapper{overflow:hidden;width:100%;height:100%;position:relative;float:left}.p-scrollpanel-content{height:calc(100% + 18px);width:calc(100% + 18px);padding:0 18px 18px 0;position:relative;overflow:auto;box-sizing:border-box}.p-scrollpanel-bar{position:relative;background:#c1c1c1;border-radius:3px;cursor:pointer;opacity:0;transition:opacity .25s linear}.p-scrollpanel-bar-y{width:9px;top:0}.p-scrollpanel-bar-x{height:9px;bottom:0}.p-scrollpanel-hidden{visibility:hidden}.p-scrollpanel:hover .p-scrollpanel-bar,.p-scrollpanel:active .p-scrollpanel-bar{opacity:1}.p-scrollpanel-grabbed{-webkit-user-select:none;user-select:none}}\n"],encapsulation:2,changeDetection:0})}return s})(),rm=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=i.oAB({type:s});static \u0275inj=i.cJS({imports:[B.ez]})}return s})();var oo=w(5431);const lm=["editor"],om=["fileUpload"],am=["pdfView"];function cm(s,t){if(1&s&&i._UZ(0,"img",30),2&s){const e=i.oxw().$implicit,n=i.oxw(2);i.s9C("src",n.thumbnailBlobMap.get(e.id),i.LSH)}}const um=function(){return{overflow:"clip",padding:0}},hm=function(s){return{"border border-2 border-blue-400":s}};function dm(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",19)(1,"div",20),i.NdJ("click",function(){const l=i.CHM(e).index,o=i.oxw(2);return i.KtG(o.selectQuestion(l))}),i.TgZ(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24),i._UZ(6,"p-badge",25),i.qZA(),i.TgZ(7,"div",26)(8,"p-button",27),i.NdJ("click",function(){const l=i.CHM(e).index,o=i.oxw(2);return i.KtG(o.onQuestionDelete(l))}),i.qZA()()()()(),i.TgZ(9,"div",28),i.YNc(10,cm,1,1,"img",29),i.qZA()()()}if(2&s){const e=t.$implicit,n=t.index,r=i.oxw(2);i.xp6(1),i.Akn(i.DdM(9,um)),i.Q6J("ngClass",i.VKq(10,hm,r.selectedIndex===n)),i.xp6(5),i.Q6J("severity",n===r.selectedIndex?"info":"warning")("value",e.seqNo.toString()),i.xp6(2),i.Q6J("text",!0)("rounded",!0)("outlined",!0),i.xp6(2),i.Q6J("ngIf",r.thumbnailBlobMap.get(e.id))}}const fm=function(){return{height:"100vh",backgroundColor:"#e3e5e7",padding:"20px"}};function pm(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",13)(1,"p-scrollPanel")(2,"div",14)(3,"div",15),i.YNc(4,dm,11,12,"div",16),i.qZA()(),i.TgZ(5,"div",17)(6,"p-button",18),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.showAddQuestionDialog())}),i.qZA()()()()}if(2&s){const e=i.oxw();i.xp6(1),i.Akn(i.DdM(3,fm)),i.xp6(3),i.Q6J("ngForOf",e.questionDetails)}}const gm=function(){return{height:"80vh",width:"auto"}};function mm(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"p-editor",43,44),i.NdJ("ngModelChange",function(r){i.CHM(e);const l=i.oxw(2);return i.KtG(l.questionDetail.quesDesc=r)})("onTextChange",function(r){i.CHM(e);const l=i.MAs(1),o=i.oxw(2);return i.KtG(o.onTextChange(r,l))}),i.qZA()}if(2&s){const e=i.oxw(2);i.Akn(i.DdM(4,gm)),i.Q6J("ngModel",e.questionDetail.quesDesc)("readonly",!e.questionSelected)}}const _m=function(){return{width:"100%",height:"900px"}};function bm(s,t){if(1&s&&i._UZ(0,"pdf-viewer",45,46),2&s){const e=i.oxw(2);i.Akn(i.DdM(5,_m)),i.Q6J("src",e.pdfBlobMap.get(e.questionDetail.id))("render-text",!0)("original-size",!1)}}const vm=function(){return{backgroundColor:"transparent",color:"black"}};function ym(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34)(4,"span",35),i._uU(5,"Sequence No."),i.qZA(),i.TgZ(6,"input",36),i.NdJ("ngModelChange",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.questionDetail.seqNo=r)}),i.qZA()(),i.TgZ(7,"div",34)(8,"span",35),i._uU(9,"Marks"),i.qZA(),i.TgZ(10,"input",36),i.NdJ("ngModelChange",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.questionDetail.marks=r)}),i.qZA()()(),i.TgZ(11,"div",37)(12,"p-fileUpload",38,39),i.NdJ("onUpload",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onUpload(r))})("message",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.message())})("onSelect",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.onFileSelect(r))})("onError",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.fileError(r))}),i.qZA(),i.TgZ(14,"p-button",40),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.validateAndSave())}),i.qZA()()(),i.YNc(15,mm,2,5,"p-editor",41),i.YNc(16,bm,2,6,"pdf-viewer",42),i.qZA()}if(2&s){const e=i.oxw();i.xp6(6),i.Q6J("disabled",e.selectedIndex<0)("ngModel",e.questionDetail.seqNo),i.xp6(4),i.Q6J("disabled",e.selectedIndex<0)("ngModel",e.questionDetail.marks),i.xp6(2),i.Akn(i.DdM(12,vm)),i.Q6J("maxFileSize",3e7)("auto",!0)("multiple",!1),i.xp6(2),i.Q6J("raised",!0),i.xp6(1),i.Q6J("ngIf",!e.questionDetail.isFile),i.xp6(1),i.Q6J("ngIf",e.questionDetail.isFile)}}function xm(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"p-dialog",47),i.NdJ("visibleChange",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.newQuestionDialogVisible=r)}),i.TgZ(1,"div",48)(2,"input",49),i.NdJ("ngModelChange",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.inputMark=r)}),i.qZA(),i.TgZ(3,"p-button",50),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.addNewQuestion())}),i.qZA()()()}if(2&s){const e=i.oxw();i.Q6J("modal",!0)("visible",e.newQuestionDialogVisible),i.xp6(2),i.Q6J("ngModel",e.inputMark)}}function Tm(s,t){1&s&&(i.TgZ(0,"tr")(1,"th",57),i._uU(2,"Question Details"),i.qZA()()),2&s&&(i.xp6(1),i.Q6J("colSpan",2))}function wm(s,t){if(1&s&&(i.TgZ(0,"tr")(1,"td"),i._uU(2,"Exam Level"),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA()(),i.TgZ(5,"tr")(6,"td"),i._uU(7,"Year"),i.qZA(),i.TgZ(8,"td"),i._uU(9),i.qZA()(),i.TgZ(10,"tr")(11,"td"),i._uU(12,"Session"),i.qZA(),i.TgZ(13,"td"),i._uU(14),i.qZA()(),i.TgZ(15,"tr")(16,"td"),i._uU(17,"Subject"),i.qZA(),i.TgZ(18,"td"),i._uU(19),i.qZA()()),2&s){const e=i.oxw(2);i.xp6(4),i.Oqu(e.examLevelMap.get(e.questionInfo.examLevel)),i.xp6(5),i.Oqu(e.questionInfo.year),i.xp6(5),i.Oqu(e.questionInfo.session),i.xp6(5),i.Oqu(e.questionInfo.subjectName)}}const Cm=function(){return[1]};function Em(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"p-dialog",51),i.NdJ("visibleChange",function(r){i.CHM(e);const l=i.oxw();return i.KtG(l.questionDetailsDialogVisible=r)}),i.TgZ(1,"div",48)(2,"p-table",52),i.YNc(3,Tm,3,1,"ng-template",53),i.YNc(4,wm,20,4,"ng-template",54),i.qZA(),i.TgZ(5,"div",55)(6,"p-button",56),i.NdJ("onClick",function(){i.CHM(e);const r=i.oxw();return i.KtG(r.questionDetailsDialogVisible=!1)}),i.qZA()()()()}if(2&s){const e=i.oxw();i.Q6J("modal",!0)("visible",e.questionDetailsDialogVisible),i.xp6(2),i.Q6J("value",i.DdM(3,Cm))}}const Sm=function(){return{padding:"1px"}},Am=function(){return[25,75]},Nm=[{path:"",component:(()=>{class s extends $.H{constructor(e,n,r,l,o,c,h,p){super(),this.confirmationService=e,this.messageService=n,this.editQuestionService=r,this.createQuestionService=l,this.adminService=o,this.layoutService=c,this.activatedRoute=h,this.router=p,this.questionDetail=new H,this.questionMaster=new D,this.questionInfo=new S,this.questionDetails=[],this.selectedIndex=-1,this.questionSelected=!1,this.autoSave=!1,this.newQuestionDialogVisible=!1,this.pdfBlobMap=new Map,this.thumbnailBlobMap=new Map,this.firstTimeCall=!0,this.subjectMap=new Map,this.examLevelMap=new Map,this.questionDetailsDialogVisible=!1}ngOnInit(){this.fetchConfiguration(),this.layoutService.hideSideMenu(),this.activatedRoute.queryParams.subscribe(e=>{if(this.id=e.id,"true"===e.fullDelete){let r=new Z;r.isFullQuesDelete=!0,r.quesId=this.id,this.subscribers.deleteQuestionsubs=this.editQuestionService.deleteQuetion(r).subscribe(l=>{l.result&&this.messageService.add({severity:"info",summary:"Confirmed",detail:"Question Deleted"})})}this.id?this.fetchExistingQuestion(this.id):history.state.data&&(this.questionMaster=history.state.data,this.questionInfo=history.state.data,this.subscribers.searchQuesSubs=this.createQuestionService.searchQuestion(this.questionMaster).subscribe(r=>{r.result&&(r.data.isNew||this.router.navigate(["../edit-question"],{queryParams:{id:r.data.existingQues.id},relativeTo:this.activatedRoute}))}))})}onTextChange(e,n){}onQuestionDelete(e){this.confirmationService.confirm({message:"Are you sure that you want to delete this question? this can not be undone!",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{let n=new Z;n.isFullQuesDelete=!1,n.quesDetailsId=this.questionDetails[e].id,n.quesId=this.questionMaster.id,n.quesDetailsId||this.removeItemFromList(e),n.quesId&&(this.subscribers.deleteQuestionsubs=this.editQuestionService.deleteQuetion(n).subscribe(r=>{if(r.result)return this.messageService.add({severity:"info",summary:"Confirmed",detail:"Question Deleted"}),void this.removeItemFromList(e)}))},reject:n=>{}})}removeItemFromList(e){this.thumbnailBlobMap.get(this.questionDetails[e].id)&&this.thumbnailBlobMap.delete(this.questionDetails[e].id),this.pdfBlobMap.get(this.questionDetails[e].id)&&this.pdfBlobMap.delete(this.questionDetails[e].id),this.selectedIndex=-1,this.questionSelected=!1,this.questionDetail=new H,this.questionDetails.splice(e,1)}selectQuestion(e){this.questionSelected=!0,this.selectedIndex=e,this.questionDetail=this.questionDetails[e],this.questionDetail.isFile||setTimeout(()=>{this.editor.el.nativeElement.getElementsByClassName("ql-editor")[0].innerHTML=this.questionDetails[e].quesDesc},1)}generateFileBlobsFromApi(e,n){let r=new Map;r.set("filePath",n),this.editQuestionService.fetchByFileUrl(r).subscribe(l=>{var o=new Blob([l],{type:"application/pdf"});let c=URL.createObjectURL(o);this.pdfBlobMap.set(this.questionDetails[e].id,c),this.generatePdfThumbnails(e)})}validateAndSave(){this.messageService.clear(),this.validated()&&(!this.questionMaster.id&&this.firstTimeCall&&(this.firstTimeCall=!1,this.saveQuestion(this.questionMaster,this.selectedIndex)),!(this.selectedIndex<0)&&this.autoSave&&this.saveQuestion(this.questionMaster,this.selectedIndex))}validated(){if(this.selectedIndex<0){let e="",n="";return this.questionDetails.length?(e="Select Question",n="Please select a question from left pane"):(e="Add Question",n="Please add a question"),this.messageService.add({summary:e,detail:n,severity:"warn"}),!1}return this.hasDuplicate(this.questionDetails,"seqNo")?(this.messageService.add({summary:"Error",detail:"Duplicate sequnce found !",severity:"error"}),!1):!(this.questionDetail.marks<=0&&(this.messageService.add({summary:"Error",detail:"Input valid marks!",severity:"error"}),1))}saveQuestion(e,n,r,l){let o=new FormData;e.quesDetail=this.questionDetails[n],r&&(e.quesDetail.isFile=!0,e.quesDetail.quesDesc="",o.append("file",r));let c=JSON.stringify(e);o.append("data",c),this.saveStatus=this.questionDetails[n].seqNo+" - Saving ...",this.editQuestionService.addQuestion(o).subscribe(h=>{h.result&&(this.messageService.add({summary:"Saved",detail:"Sequence "+e.quesDetail.seqNo+" saved",severity:"success"}),this.saveStatus="saved",this.setupSavedData(h.data,n),this.autoSave=!0,this.firstTimeCall=!1)},h=>{this.questionMaster.id||(this.firstTimeCall=!0)})}showAddQuestionDialog(){this.inputMark=0,this.newQuestionDialogVisible=!0}addNewQuestion(){this.newQuestionDialogVisible=!0,this.inputMark&&(this.questionDetail=new H,this.questionDetail.quesDesc="<p></p>",this.questionDetail.marks=this.inputMark,this.questionDetail.seqNo=this.questionDetails.length+1,delete this.questionDetail.id,this.questionDetails.push(this.questionDetail),this.selectedIndex=this.questionDetails.length-1,this.newQuestionDialogVisible=!1,this.selectQuestion(this.selectedIndex))}fetchExistingQuestion(e){let n=new Map;n.set("questionId",e),this.subscribers.fetchExistingQuestionSubs=this.editQuestionService.fetchExistingQuestion(n).subscribe(r=>{r.result&&this.setupExistingQuestion(r.data)})}setupExistingQuestion(e){var n=this;return(0,he.Z)(function*(){n.questionInfo=e,n.questionMaster.id=e.id,n.questionMaster.examLevel=e.examLevel,n.questionMaster.session=e.session,n.questionMaster.year=e.year,n.questionMaster.subjectCode=e.subjectCode;for(let r=0;r<e.quesDetailsList.length;r++)n.questionDetails[r]=e.quesDetailsList[r],n.questionDetails[r].isFile?n.generateFileBlobsFromApi(r,n.questionDetails[r].fileUrl):(yield n.generateHtmlThumbnails(r),n.editor.el.nativeElement.getElementsByClassName("ql-editor")[0].innerHTML="");n.autoSave=!0})()}setupSavedData(e,n){this.questionMaster.id=e.id,this.questionDetails[n].id=e.quesDetailsList[0].id,this.questionDetails[n].isFile=e.quesDetailsList[0].isFile,this.questionDetails[n].filePath=e.quesDetailsList[0].filePath,this.questionDetails[n].fileUrl=e.quesDetailsList[0].fileUrl,this.questionDetails[n].isFile?this.generateFileBlobsFromApi(n,this.questionDetails[n].fileUrl):this.generateHtmlThumbnails(n)}generateHtmlThumbnails(e){var n=this;return(0,he.Z)(function*(){let r=n.editor.el.nativeElement.getElementsByClassName("ql-editor")[0];n.editor.el.nativeElement.getElementsByClassName("ql-editor")[0].innerHTML=n.questionDetails[e].quesDesc,n.questionDetails[e].quesDesc&&M()(r).then(l=>{let o=l.toDataURL("image/png");n.thumbnailBlobMap.set(n.questionDetails[e].id,o)})})()}generatePdfThumbnails(e){var n=this;return(0,he.Z)(function*(){try{const r=yield _()(n.pdfBlobMap.get(n.questionDetails[e].id),500);n.thumbnailBlobMap.set(n.questionDetails[e].id,r[0].thumbnail)}catch(r){console.error(r)}})()}onFileSelect(e){if(this.selectedIndex<0)return this.messageService.add({summary:"Question not selected",detail:"Please select a question to attach file",severity:"error"}),void this.fileUpload.clear();this.saveQuestion(this.questionMaster,this.selectedIndex,e.files[0]),this.fileUpload.clear()}onUpload(e){console.log(e)}hasDuplicate(e,n){return e.some((r,l)=>e.findIndex(o=>o[n]===r[n])!==l)}onBlurSequence(e){this.validateAndSave()}onBlurMarks(e){this.validateAndSave()}fileError(e){}message(){}fetchConfiguration(){this.subscribers.confSubs=this.adminService.fetchConfiguration().subscribe(e=>{e.result&&e.data.examLevelList.forEach(n=>{this.examLevelMap.set(n.code,n.name)})})}static#e=this.\u0275fac=function(n){return new(n||s)(i.Y36(v.YP),i.Y36(v.ez),i.Y36(k),i.Y36(le.q),i.Y36(ie.l),i.Y36(oe.P),i.Y36(xe.gz),i.Y36(xe.F0))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-edit-question"]],viewQuery:function(n,r){if(1&n&&(i.Gf(lm,5),i.Gf(om,5),i.Gf(am,5)),2&n){let l;i.iGM(l=i.CRH())&&(r.editor=l.first),i.iGM(l=i.CRH())&&(r.fileUpload=l.first),i.iGM(l=i.CRH())&&(r.pdfView=l.first)}},features:[i._Bn([]),i.qOj],decls:17,vars:11,consts:[[1,"col-12",2,"z-index","1"],[1,"card"],["id","preview",2,"width","600px","height","600px","z-index","-1","position","absolute","top","100px","left","100px"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","flex-grow-1"],[1,"flex","flex-row","gap-2"],["severity","secondary",3,"label","text","onClick"],[1,"flex","align-items-baseline","justify-content-center"],[3,"text","icon","onClick"],[3,"panelSizes"],["pTemplate",""],["header","Input Marks of Question",3,"modal","visible","visibleChange",4,"ngIf"],[3,"modal","visible","visibleChange",4,"ngIf"],["id","left-part",2,"width","100%"],[1,"flex","flex-column","justify-content-center"],[1,"flex","flex-column","align-items-center","justify-content-center"],["class","mb-5 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-content-center","p-2"],["icon","pi pi-plus","label","Add Question",3,"onClick"],[1,"mb-5","w-full"],[1,"card",3,"ngClass","click"],[1,"relative"],[1,"top-0","left-0","font-bold","align-items-center","justify-content-center","w-full"],[1,"flex","justify-content-between","align-items-start"],[1,"m-2"],[3,"severity","value"],[1,""],["icon","pi pi-times","severity","danger",3,"text","rounded","outlined","click"],[1,"h-20rem"],["style","width:100%; overflow:clip ","alt","thumbnail",3,"src",4,"ngIf"],["alt","thumbnail",2,"width","100%","overflow","clip",3,"src"],[1,"col"],[1,"flex","flex-row","justify-content-between","mb-1"],[1,"flex","flex-row"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["type","text","pInputText","",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-content-between","align-items-center","flex-row","gap-2"],["mode","basic","name","demo[]","accept",".pdf","chooseLabel","Attach File",3,"maxFileSize","auto","multiple","onUpload","message","onSelect","onError"],["fileUpload",""],["label","Save","severity","success","icon","pi pi-save",3,"raised","onClick"],[3,"ngModel","readonly","style","ngModelChange","onTextChange",4,"ngIf"],["style","width: 400px; height: 500px",3,"src","style","render-text","original-size",4,"ngIf"],[3,"ngModel","readonly","ngModelChange","onTextChange"],["editor",""],[2,"width","400px","height","500px",3,"src","render-text","original-size"],["pdfView",""],["header","Input Marks of Question",3,"modal","visible","visibleChange"],[1,"flex","flex-column","flex-wrap"],["pInputText","","placeholder","Question Mark",1,"mb-2",3,"ngModel","ngModelChange"],["label","Add Question",3,"onClick"],[3,"modal","visible","visibleChange"],["styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"flex","flex-grow-1","align-content-end","justify-content-end","mt-3"],["label","Close",3,"onClick"],[2,"text-align","center",3,"colSpan"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"div",2),i.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5"),i._uU(7,"Edit Question"),i.qZA(),i.TgZ(8,"p-button",6),i.NdJ("onClick",function(){return r.questionDetailsDialogVisible=!0}),i.qZA()()(),i.TgZ(9,"div",7)(10,"p-button",8),i.NdJ("onClick",function(){return r.layoutService.fullScreenToggle()}),i.qZA()()(),i.TgZ(11,"div")(12,"p-splitter",9),i.YNc(13,pm,7,4,"ng-template",10),i.YNc(14,ym,17,13,"ng-template",10),i.qZA()()()(),i.YNc(15,xm,4,3,"p-dialog",11),i.YNc(16,Em,7,4,"p-dialog",12)),2&n&&(i.xp6(8),i.Akn(i.DdM(9,Sm)),i.Q6J("label",r.questionInfo.subjectName)("text",!0),i.xp6(2),i.s9C("icon",r.layoutService.fullScreen?"fas fa-minimize":"fas fa-expand"),i.Q6J("text",!0),i.xp6(2),i.Q6J("panelSizes",i.DdM(10,Am)),i.xp6(3),i.Q6J("ngIf",r.newQuestionDialogVisible),i.xp6(1),i.Q6J("ngIf",r.questionDetailsDialogVisible))},dependencies:[pe.Fj,pe.JJ,pe.On,B.mk,B.sg,B.O5,Ne.zx,v.jx,I,Gl,Jl.o,Kl.V,Vg,ro.rQ,lo.Ct,im,oo.iA]})}return s})()}];var Im=w(4532);let Lm=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=i.oAB({type:s});static#n=this.\u0275inj=i.cJS({imports:[xe.Bz.forChild(Nm),pe.UX,pe.u5,B.ez,Ne.hJ,A,mp,Im.d,Jl.j,Kl.S,$g,ro.xC,lo.TX,rm,oo.U$]})}return s})()},6097:(Ee,ee,w)=>{"use strict";w.d(ee,{H:()=>H});var Y=w(9291),xe=w(305),he=w(95),$=w(5219);let H=(()=>{class D{constructor(){this.subscribers={},this.msgService=(0,Y.f3M)($.ez)}ngOnDestroy(){for(let S in this.subscribers){let T=this.subscribers[S];T instanceof xe.Lv&&T.unsubscribe()}}markFormGroupAsTouched(S){S.markAsTouched(),S.markAsDirty();for(const T in S.controls)S.controls[T]instanceof he.NI?(S.controls[T].markAsTouched(),S.controls[T].markAsDirty()):this.markFormGroupAsTouched(S.controls[T])}markFormGroupAsUnTouched(S){S.markAsUntouched(),S.markAsPristine();for(const T in S.controls)S.controls[T]instanceof he.NI?(S.controls[T].markAsUntouched(),S.controls[T].markAsPristine()):this.markFormGroupAsUnTouched(S.controls[T])}showRequiredErrorMessage(S,T){let M=null;return M=this.getRequiredMsg(S.controls,T,M),M&&this.msgService.add({summary:"Fill up mandatory field.",detail:M,severity:"error"}),M}getRequiredMsg(S,T,M){for(const m in S)"INVALID"===S[m].status&&(S[m].hasOwnProperty("controls")?M=this.getRequiredMsg(S[m].controls,T,M):T[m]&&(M?M+=", \n"+T[m]:M=T[m]));return M}static#e=this.\u0275fac=function(T){return new(T||D)};static#t=this.\u0275cmp=Y.Xpm({type:D,selectors:[["app-base-component"]],decls:2,vars:0,template:function(T,M){1&T&&(Y.TgZ(0,"p"),Y._uU(1,"base-component works!"),Y.qZA())}})}return D})()},1472:Ee=>{"use strict";var ee=Object.prototype.hasOwnProperty,w="~";function Y(){}function xe(D,Z,S){this.fn=D,this.context=Z,this.once=S||!1}function he(D,Z,S,T,M){if("function"!=typeof S)throw new TypeError("The listener must be a function");var m=new xe(S,T||D,M),_=w?w+Z:Z;return D._events[_]?D._events[_].fn?D._events[_]=[D._events[_],m]:D._events[_].push(m):(D._events[_]=m,D._eventsCount++),D}function $(D,Z){0==--D._eventsCount?D._events=new Y:delete D._events[Z]}function H(){this._events=new Y,this._eventsCount=0}Object.create&&(Y.prototype=Object.create(null),(new Y).__proto__||(w=!1)),H.prototype.eventNames=function(){var S,T,Z=[];if(0===this._eventsCount)return Z;for(T in S=this._events)ee.call(S,T)&&Z.push(w?T.slice(1):T);return Object.getOwnPropertySymbols?Z.concat(Object.getOwnPropertySymbols(S)):Z},H.prototype.listeners=function(Z){var T=this._events[w?w+Z:Z];if(!T)return[];if(T.fn)return[T.fn];for(var M=0,m=T.length,_=new Array(m);M<m;M++)_[M]=T[M].fn;return _},H.prototype.listenerCount=function(Z){var T=this._events[w?w+Z:Z];return T?T.fn?1:T.length:0},H.prototype.emit=function(Z,S,T,M,m,_){var i=w?w+Z:Z;if(!this._events[i])return!1;var Q,k,v=this._events[i],J=arguments.length;if(v.fn){switch(v.once&&this.removeListener(Z,v.fn,void 0,!0),J){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,S),!0;case 3:return v.fn.call(v.context,S,T),!0;case 4:return v.fn.call(v.context,S,T,M),!0;case 5:return v.fn.call(v.context,S,T,M,m),!0;case 6:return v.fn.call(v.context,S,T,M,m,_),!0}for(k=1,Q=new Array(J-1);k<J;k++)Q[k-1]=arguments[k];v.fn.apply(v.context,Q)}else{var ie,le=v.length;for(k=0;k<le;k++)switch(v[k].once&&this.removeListener(Z,v[k].fn,void 0,!0),J){case 1:v[k].fn.call(v[k].context);break;case 2:v[k].fn.call(v[k].context,S);break;case 3:v[k].fn.call(v[k].context,S,T);break;case 4:v[k].fn.call(v[k].context,S,T,M);break;default:if(!Q)for(ie=1,Q=new Array(J-1);ie<J;ie++)Q[ie-1]=arguments[ie];v[k].fn.apply(v[k].context,Q)}}return!0},H.prototype.on=function(Z,S,T){return he(this,Z,S,T,!1)},H.prototype.once=function(Z,S,T){return he(this,Z,S,T,!0)},H.prototype.removeListener=function(Z,S,T,M){var m=w?w+Z:Z;if(!this._events[m])return this;if(!S)return $(this,m),this;var _=this._events[m];if(_.fn)_.fn===S&&(!M||_.once)&&(!T||_.context===T)&&$(this,m);else{for(var i=0,v=[],J=_.length;i<J;i++)(_[i].fn!==S||M&&!_[i].once||T&&_[i].context!==T)&&v.push(_[i]);v.length?this._events[m]=1===v.length?v[0]:v:$(this,m)}return this},H.prototype.removeAllListeners=function(Z){var S;return Z?this._events[S=w?w+Z:Z]&&$(this,S):(this._events=new Y,this._eventsCount=0),this},H.prototype.off=H.prototype.removeListener,H.prototype.addListener=H.prototype.on,H.prefixed=w,H.EventEmitter=H,Ee.exports=H},5739:Ee=>{var ee=-1,w=1,Y=0;function xe(f,E,g,I,A){if(f===E)return f?[[Y,f]]:[];if(null!=g){var C=function X(f,E,g){var I="number"==typeof g?{index:g,length:0}:g.oldRange,A="number"==typeof g?null:g.newRange,C=f.length,N=E.length;if(0===I.length&&(null===A||0===A.length)){var R=I.index,F=f.slice(0,R),q=f.slice(R),te=A?A.index:null,ne=R+N-C;if(!(null!==te&&te!==ne||ne<0||ne>N)){var ae=E.slice(0,ne);if((ce=E.slice(ne))===q){var G=Math.min(R,ne);if((Te=F.slice(0,G))===(we=ae.slice(0,G)))return Ne(Te,F.slice(G),ae.slice(G),q)}}if(null===te||te===R){var ge=R,ce=(ae=E.slice(0,ge),E.slice(ge));if(ae===F){var ve=Math.min(C-ge,N-ge);if((de=q.slice(q.length-ve))===(me=ce.slice(ce.length-ve)))return Ne(F,q.slice(0,q.length-ve),ce.slice(0,ce.length-ve),de)}}}if(I.length>0&&A&&0===A.length){var Te=f.slice(0,I.index),de=f.slice(I.index+I.length);if(!(N<(G=Te.length)+(ve=de.length))){var we=E.slice(0,G),me=E.slice(N-ve);if(Te===we&&de===me)return Ne(Te,f.slice(G,C-ve),E.slice(G,N-ve),de)}}return null}(f,E,g);if(C)return C}var N=D(f,E),R=f.substring(0,N);N=S(f=f.substring(N),E=E.substring(N));var F=f.substring(f.length-N),q=function he(f,E){var g;if(!f)return[[w,E]];if(!E)return[[ee,f]];var I=f.length>E.length?f:E,A=f.length>E.length?E:f,C=I.indexOf(A);if(-1!==C)return g=[[w,I.substring(0,C)],[Y,A],[w,I.substring(C+A.length)]],f.length>E.length&&(g[0][0]=g[2][0]=ee),g;if(1===A.length)return[[ee,f],[w,E]];var N=function T(f,E){var g=f.length>E.length?f:E,I=f.length>E.length?E:f;if(g.length<4||2*I.length<g.length)return null;function A(ce,G,Te){for(var ge,ve,de,me,we=ce.substring(Te,Te+Math.floor(ce.length/4)),re=-1,be="";-1!==(re=G.indexOf(we,re+1));){var Le=D(ce.substring(Te),G.substring(re)),Be=S(ce.substring(0,Te),G.substring(0,re));be.length<Be+Le&&(be=G.substring(re-Be,re)+G.substring(re,re+Le),ge=ce.substring(0,Te-Be),ve=ce.substring(Te+Le),de=G.substring(0,re-Be),me=G.substring(re+Le))}return 2*be.length>=ce.length?[ge,ve,de,me,be]:null}var R,F,q,te,ne,C=A(g,I,Math.ceil(g.length/4)),N=A(g,I,Math.ceil(g.length/2));return C||N?(R=N?C&&C[4].length>N[4].length?C:N:C,f.length>E.length?(F=R[0],q=R[1],te=R[2],ne=R[3]):(te=R[0],ne=R[1],F=R[2],q=R[3]),[F,q,te,ne,R[4]]):null}(f,E);if(N){var F=N[1],te=N[3],ne=N[4],ae=xe(N[0],N[2]),ce=xe(F,te);return ae.concat([[Y,ne]],ce)}return function $(f,E){for(var g=f.length,I=E.length,A=Math.ceil((g+I)/2),C=A,N=2*A,R=new Array(N),F=new Array(N),q=0;q<N;q++)R[q]=-1,F[q]=-1;R[C+1]=0,F[C+1]=0;for(var te=g-I,ne=te%2!=0,ae=0,ce=0,G=0,Te=0,we=0;we<A;we++){for(var re=-we+ae;re<=we-ce;re+=2){for(var be=C+re,ve=(ge=re===-we||re!==we&&R[be-1]<R[be+1]?R[be+1]:R[be-1]+1)-re;ge<g&&ve<I&&f.charAt(ge)===E.charAt(ve);)ge++,ve++;if(R[be]=ge,ge>g)ce+=2;else if(ve>I)ae+=2;else if(ne&&(de=C+te-re)>=0&&de<N&&-1!==F[de]&&ge>=(me=g-F[de]))return H(f,E,ge,ve)}for(var Le=-we+G;Le<=we-Te;Le+=2){for(var me,de=C+Le,Be=(me=Le===-we||Le!==we&&F[de-1]<F[de+1]?F[de+1]:F[de-1]+1)-Le;me<g&&Be<I&&f.charAt(g-me-1)===E.charAt(I-Be-1);)me++,Be++;if(F[de]=me,me>g)Te+=2;else if(Be>I)G+=2;else if(!ne){var ge;if((be=C+te-Le)>=0&&be<N&&-1!==R[be])if(ve=C+(ge=R[be])-be,ge>=(me=g-me))return H(f,E,ge,ve)}}}return[[ee,f],[w,E]]}(f,E)}(f=f.substring(0,f.length-N),E=E.substring(0,E.length-N));return R&&q.unshift([Y,R]),F&&q.push([Y,F]),k(q,A),I&&function M(f){for(var E=!1,g=[],I=0,A=null,C=0,N=0,R=0,F=0,q=0;C<f.length;)f[C][0]==Y?(g[I++]=C,N=F,R=q,F=0,q=0,A=f[C][1]):(f[C][0]==w?F+=f[C][1].length:q+=f[C][1].length,A&&A.length<=Math.max(N,R)&&A.length<=Math.max(F,q)&&(f.splice(g[I-1],0,[ee,A]),f[g[I-1]+1][0]=w,I--,C=--I>0?g[I-1]:-1,N=0,R=0,F=0,q=0,A=null,E=!0)),C++;for(E&&k(f),function Q(f){function E(ce,G){if(!ce||!G)return 6;var Te=ce.charAt(ce.length-1),we=G.charAt(0),re=Te.match(m),be=we.match(m),ge=re&&Te.match(_),ve=be&&we.match(_),de=ge&&Te.match(i),me=ve&&we.match(i),Le=de&&ce.match(v),Be=me&&G.match(J);return Le||Be?5:de||me?4:re&&!ge&&ve?3:ge||ve?2:re||be?1:0}for(var g=1;g<f.length-1;){if(f[g-1][0]==Y&&f[g+1][0]==Y){var I=f[g-1][1],A=f[g][1],C=f[g+1][1],N=S(I,A);if(N){var R=A.substring(A.length-N);I=I.substring(0,I.length-N),A=R+A.substring(0,A.length-N),C=R+C}for(var F=I,q=A,te=C,ne=E(I,A)+E(A,C);A.charAt(0)===C.charAt(0);){I+=A.charAt(0),A=A.substring(1)+C.charAt(0),C=C.substring(1);var ae=E(I,A)+E(A,C);ae>=ne&&(ne=ae,F=I,q=A,te=C)}f[g-1][1]!=F&&(F?f[g-1][1]=F:(f.splice(g-1,1),g--),f[g][1]=q,te?f[g+1][1]=te:(f.splice(g+1,1),g--))}g++}}(f),C=1;C<f.length;){if(f[C-1][0]==ee&&f[C][0]==w){var te=f[C-1][1],ne=f[C][1],ae=Z(te,ne),ce=Z(ne,te);ae>=ce?(ae>=te.length/2||ae>=ne.length/2)&&(f.splice(C,0,[Y,ne.substring(0,ae)]),f[C-1][1]=te.substring(0,te.length-ae),f[C+1][1]=ne.substring(ae),C++):(ce>=te.length/2||ce>=ne.length/2)&&(f.splice(C,0,[Y,te.substring(0,ce)]),f[C-1][0]=w,f[C-1][1]=ne.substring(0,ne.length-ce),f[C+1][0]=ee,f[C+1][1]=te.substring(ce),C++),C++}C++}}(q),q}function H(f,E,g,I){var A=f.substring(0,g),C=E.substring(0,I),N=f.substring(g),R=E.substring(I),F=xe(A,C),q=xe(N,R);return F.concat(q)}function D(f,E){if(!f||!E||f.charAt(0)!==E.charAt(0))return 0;for(var g=0,I=Math.min(f.length,E.length),A=I,C=0;g<A;)f.substring(C,A)==E.substring(C,A)?C=g=A:I=A,A=Math.floor((I-g)/2+g);return le(f.charCodeAt(A-1))&&A--,A}function Z(f,E){var g=f.length,I=E.length;if(0==g||0==I)return 0;g>I?f=f.substring(g-I):g<I&&(E=E.substring(0,g));var A=Math.min(g,I);if(f==E)return A;for(var C=0,N=1;;){var R=f.substring(A-N),F=E.indexOf(R);if(-1==F)return C;N+=F,(0==F||f.substring(A-N)==E.substring(0,N))&&(C=N,N++)}}function S(f,E){if(!f||!E||f.slice(-1)!==E.slice(-1))return 0;for(var g=0,I=Math.min(f.length,E.length),A=I,C=0;g<A;)f.substring(f.length-A,f.length-C)==E.substring(E.length-A,E.length-C)?C=g=A:I=A,A=Math.floor((I-g)/2+g);return ie(f.charCodeAt(f.length-A))&&A--,A}var m=/[^a-zA-Z0-9]/,_=/\s/,i=/[\r\n]/,v=/\n\r?\n$/,J=/^\r?\n\r?\n/;function k(f,E){f.push([Y,""]);for(var R,g=0,I=0,A=0,C="",N="";g<f.length;)if(g<f.length-1&&!f[g][1])f.splice(g,1);else switch(f[g][0]){case w:A++,N+=f[g][1],g++;break;case ee:I++,C+=f[g][1],g++;break;case Y:var F=g-A-I-1;if(E){if(F>=0&&pe(f[F][1])){var q=f[F][1].slice(-1);if(f[F][1]=f[F][1].slice(0,-1),C=q+C,N=q+N,!f[F][1]){f.splice(F,1),g--;var te=F-1;f[te]&&f[te][0]===w&&(A++,N=f[te][1]+N,te--),f[te]&&f[te][0]===ee&&(I++,C=f[te][1]+C,te--),F=te}}oe(f[g][1])&&(q=f[g][1].charAt(0),f[g][1]=f[g][1].slice(1),C+=q,N+=q)}if(g<f.length-1&&!f[g][1]){f.splice(g,1);break}if(C.length>0||N.length>0){C.length>0&&N.length>0&&(0!==(R=D(N,C))&&(F>=0?f[F][1]+=N.substring(0,R):(f.splice(0,0,[Y,N.substring(0,R)]),g++),N=N.substring(R),C=C.substring(R)),0!==(R=S(N,C))&&(f[g][1]=N.substring(N.length-R)+f[g][1],N=N.substring(0,N.length-R),C=C.substring(0,C.length-R)));var ne=A+I;0===C.length&&0===N.length?(f.splice(g-ne,ne),g-=ne):0===C.length?(f.splice(g-ne,ne,[w,N]),g=g-ne+1):0===N.length?(f.splice(g-ne,ne,[ee,C]),g=g-ne+1):(f.splice(g-ne,ne,[ee,C],[w,N]),g=g-ne+2)}0!==g&&f[g-1][0]===Y?(f[g-1][1]+=f[g][1],f.splice(g,1)):g++,A=0,I=0,C="",N=""}""===f[f.length-1][1]&&f.pop();var ae=!1;for(g=1;g<f.length-1;)f[g-1][0]===Y&&f[g+1][0]===Y&&(f[g][1].substring(f[g][1].length-f[g-1][1].length)===f[g-1][1]?(f[g][1]=f[g-1][1]+f[g][1].substring(0,f[g][1].length-f[g-1][1].length),f[g+1][1]=f[g-1][1]+f[g+1][1],f.splice(g-1,1),ae=!0):f[g][1].substring(0,f[g+1][1].length)==f[g+1][1]&&(f[g-1][1]+=f[g+1][1],f[g][1]=f[g][1].substring(f[g+1][1].length)+f[g+1][1],f.splice(g+1,1),ae=!0)),g++;ae&&k(f,E)}function le(f){return f>=55296&&f<=56319}function ie(f){return f>=56320&&f<=57343}function oe(f){return ie(f.charCodeAt(0))}function pe(f){return le(f.charCodeAt(f.length-1))}function Ne(f,E,g,I){return pe(f)||oe(I)?null:function B(f){for(var E=[],g=0;g<f.length;g++)f[g][1].length>0&&E.push(f[g]);return E}([[Y,f],[ee,E],[w,g],[Y,I]])}function He(f,E,g,I){return xe(f,E,g,I,!0)}He.INSERT=w,He.DELETE=ee,He.EQUAL=Y,Ee.exports=He},5646:(Ee,ee,w)=>{Ee=w.nmd(Ee);var xe="__lodash_hash_undefined__",he=9007199254740991,$="[object Arguments]",D="[object Boolean]",Z="[object Date]",T="[object Function]",M="[object GeneratorFunction]",m="[object Map]",_="[object Number]",i="[object Object]",v="[object Promise]",J="[object RegExp]",Q="[object Set]",k="[object String]",le="[object Symbol]",ie="[object WeakMap]",oe="[object ArrayBuffer]",pe="[object DataView]",B="[object Float32Array]",Ne="[object Float64Array]",X="[object Int8Array]",He="[object Int16Array]",f="[object Int32Array]",E="[object Uint8Array]",g="[object Uint8ClampedArray]",I="[object Uint16Array]",A="[object Uint32Array]",N=/\w*$/,R=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,q={};q[$]=q["[object Array]"]=q[oe]=q[pe]=q[D]=q[Z]=q[B]=q[Ne]=q[X]=q[He]=q[f]=q[m]=q[_]=q[i]=q[J]=q[Q]=q[k]=q[le]=q[E]=q[g]=q[I]=q[A]=!0,q["[object Error]"]=q[T]=q[ie]=!1;var te="object"==typeof global&&global&&global.Object===Object&&global,ne="object"==typeof self&&self&&self.Object===Object&&self,ae=te||ne||Function("return this")(),ce=ee&&!ee.nodeType&&ee,G=ce&&Ee&&!Ee.nodeType&&Ee,Te=G&&G.exports===ce;function we(a,u){return a.set(u[0],u[1]),a}function re(a,u){return a.add(u),a}function ve(a,u,d,b){var se=-1,z=a?a.length:0;for(b&&z&&(d=a[++se]);++se<z;)d=u(d,a[se],se,a);return d}function Le(a){var u=!1;if(null!=a&&"function"!=typeof a.toString)try{u=!!(a+"")}catch{}return u}function Be(a){var u=-1,d=Array(a.size);return a.forEach(function(b,se){d[++u]=[se,b]}),d}function rn(a,u){return function(d){return a(u(d))}}function On(a){var u=-1,d=Array(a.size);return a.forEach(function(b){d[++u]=b}),d}var a,$n=Array.prototype,Wn=Function.prototype,Pt=Object.prototype,ln=ae["__core-js_shared__"],Mn=(a=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",on=Wn.toString,tt=Pt.hasOwnProperty,zt=Pt.toString,Je=RegExp("^"+on.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),It=Te?ae.Buffer:void 0,Qe=ae.Symbol,jt=ae.Uint8Array,Ke=rn(Object.getPrototypeOf,Object),kn=Object.create,xt=Pt.propertyIsEnumerable,Xn=$n.splice,an=Object.getOwnPropertySymbols,Ht=It?It.isBuffer:void 0,Bn=rn(Object.keys,Object),Qt=$e(ae,"DataView"),Lt=$e(ae,"Map"),Ve=$e(ae,"Promise"),Zt=$e(ae,"Set"),Gt=$e(ae,"WeakMap"),qt=$e(Object,"create"),nt=Ue(Qt),Ot=Ue(Lt),Ye=Ue(Ve),cn=Ue(Zt),un=Ue(Gt),Tt=Qe?Qe.prototype:void 0,Dn=Tt?Tt.valueOf:void 0;function ut(a){var u=-1,d=a?a.length:0;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function Me(a){var u=-1,d=a?a.length:0;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function De(a){var u=-1,d=a?a.length:0;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function Pe(a){this.__data__=new Me(a)}function wt(a,u,d){var b=a[u];(!tt.call(a,u)||!jn(b,d)||void 0===d&&!(u in a))&&(a[u]=d)}function Kt(a,u){for(var d=a.length;d--;)if(jn(a[d][0],u))return d;return-1}function gn(a,u,d,b,se,z,ue){var fe;if(b&&(fe=z?b(a,se,z,ue):b(a)),void 0!==fe)return fe;if(!it(a))return a;var Ie=Vt(a);if(Ie){if(fe=function ws(a){var u=a.length,d=a.constructor(u);return u&&"string"==typeof a[0]&&tt.call(a,"index")&&(d.index=a.index,d.input=a.input),d}(a),!u)return function Ts(a,u){var d=-1,b=a.length;for(u||(u=Array(b));++d<b;)u[d]=a[d];return u}(a,fe)}else{var _e=pt(a),Re=_e==T||_e==M;if(Hn(a))return function Yt(a,u){if(u)return a.slice();var d=new a.constructor(a.length);return a.copy(d),d}(a,u);if(_e==i||_e==$||Re&&!z){if(Le(a))return z?a:{};if(fe=function Ze(a){return"function"!=typeof a.constructor||Pn(a)?{}:function ps(a){return it(a)?kn(a):{}}(Ke(a))}(Re?{}:a),!u)return function Ct(a,u){return _n(a,ft(a),u)}(a,function ze(a,u){return a&&_n(u,bn(u),a)}(fe,a))}else{if(!q[_e])return z?a:{};fe=function Cs(a,u,d,b){var se=a.constructor;switch(u){case oe:return mn(a);case D:case Z:return new se(+a);case pe:return function Mt(a,u){var d=u?mn(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}(a,b);case B:case Ne:case X:case He:case f:case E:case g:case I:case A:return function xs(a,u){var d=u?mn(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}(a,b);case m:return function Rn(a,u,d){return ve(u?d(Be(a),!0):Be(a),we,new a.constructor)}(a,b,d);case _:case k:return new se(a);case J:return function Un(a){var u=new a.constructor(a.source,N.exec(a));return u.lastIndex=a.lastIndex,u}(a);case Q:return function vs(a,u,d){return ve(u?d(On(a),!0):On(a),re,new a.constructor)}(a,b,d);case le:return function ys(a){return Dn?Object(Dn.call(a)):{}}(a)}}(a,_e,gn,u)}}ue||(ue=new Pe);var Fe=ue.get(a);if(Fe)return Fe;if(ue.set(a,fe),!Ie)var qe=d?function Fn(a){return function gs(a,u,d){var b=u(a);return Vt(a)?b:function ge(a,u){for(var d=-1,b=u.length,se=a.length;++d<b;)a[se+d]=u[d];return a}(b,d(a))}(a,bn,ft)}(a):bn(a);return function be(a,u){for(var d=-1,b=a?a.length:0;++d<b&&!1!==u(a[d],d,a););}(qe||a,function(Oe,ke){qe&&(Oe=a[ke=Oe]),wt(fe,ke,gn(Oe,u,d,b,ke,a,ue))}),fe}function mn(a){var u=new a.constructor(a.byteLength);return new jt(u).set(new jt(a)),u}function _n(a,u,d,b){d||(d={});for(var se=-1,z=u.length;++se<z;){var ue=u[se],fe=b?b(d[ue],a[ue],ue,d,a):void 0;wt(d,ue,void 0===fe?a[ue]:fe)}return d}function kt(a,u){var d=a.__data__;return function Ss(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?d["string"==typeof u?"string":"hash"]:d.map}function $e(a,u){var d=function me(a,u){return a?.[u]}(a,u);return function _s(a){return!(!it(a)||function As(a){return!!Mn&&Mn in a}(a))&&(st(a)||Le(a)?Je:R).test(Ue(a))}(d)?d:void 0}ut.prototype.clear=function hn(){this.__data__=qt?qt(null):{}},ut.prototype.delete=function es(a){return this.has(a)&&delete this.__data__[a]},ut.prototype.get=function dn(a){var u=this.__data__;if(qt){var d=u[a];return d===xe?void 0:d}return tt.call(u,a)?u[a]:void 0},ut.prototype.has=function fn(a){var u=this.__data__;return qt?void 0!==u[a]:tt.call(u,a)},ut.prototype.set=function pn(a,u){return this.__data__[a]=qt&&void 0===u?xe:u,this},Me.prototype.clear=function ts(){this.__data__=[]},Me.prototype.delete=function ns(a){var u=this.__data__,d=Kt(u,a);return!(d<0||(d==u.length-1?u.pop():Xn.call(u,d,1),0))},Me.prototype.get=function ss(a){var u=this.__data__,d=Kt(u,a);return d<0?void 0:u[d][1]},Me.prototype.has=function ht(a){return Kt(this.__data__,a)>-1},Me.prototype.set=function is(a,u){var d=this.__data__,b=Kt(d,a);return b<0?d.push([a,u]):d[b][1]=u,this},De.prototype.clear=function rs(){this.__data__={hash:new ut,map:new(Lt||Me),string:new ut}},De.prototype.delete=function ls(a){return kt(this,a).delete(a)},De.prototype.get=function os(a){return kt(this,a).get(a)},De.prototype.has=function as(a){return kt(this,a).has(a)},De.prototype.set=function cs(a,u){return kt(this,a).set(a,u),this},Pe.prototype.clear=function us(){this.__data__=new Me},Pe.prototype.delete=function hs(a){return this.__data__.delete(a)},Pe.prototype.get=function ds(a){return this.__data__.get(a)},Pe.prototype.has=function fs(a){return this.__data__.has(a)},Pe.prototype.set=function dt(a,u){var d=this.__data__;if(d instanceof Me){var b=d.__data__;if(!Lt||b.length<199)return b.push([a,u]),this;d=this.__data__=new De(b)}return d.set(a,u),this};var ft=an?rn(an,Object):function vn(){return[]},pt=function ms(a){return zt.call(a)};function Es(a,u){return!!(u=u??he)&&("number"==typeof a||F.test(a))&&a>-1&&a%1==0&&a<u}function Pn(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||Pt)}function Ue(a){if(null!=a){try{return on.call(a)}catch{}try{return a+""}catch{}}return""}function jn(a,u){return a===u||a!=a&&u!=u}(Qt&&pt(new Qt(new ArrayBuffer(1)))!=pe||Lt&&pt(new Lt)!=m||Ve&&pt(Ve.resolve())!=v||Zt&&pt(new Zt)!=Q||Gt&&pt(new Gt)!=ie)&&(pt=function(a){var u=zt.call(a),d=u==i?a.constructor:void 0,b=d?Ue(d):void 0;if(b)switch(b){case nt:return pe;case Ot:return m;case Ye:return v;case cn:return Q;case un:return ie}return u});var Vt=Array.isArray;function $t(a){return null!=a&&function Et(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=he}(a.length)&&!st(a)}var Hn=Ht||function Is(){return!1};function st(a){var u=it(a)?zt.call(a):"";return u==T||u==M}function it(a){var u=typeof a;return!!a&&("object"==u||"function"==u)}function bn(a){return $t(a)?function Jt(a,u){var d=Vt(a)||function We(a){return function Ns(a){return function Bt(a){return!!a&&"object"==typeof a}(a)&&$t(a)}(a)&&tt.call(a,"callee")&&(!xt.call(a,"callee")||zt.call(a)==$)}(a)?function de(a,u){for(var d=-1,b=Array(a);++d<a;)b[d]=u(d);return b}(a.length,String):[],b=d.length,se=!!b;for(var z in a)(u||tt.call(a,z))&&(!se||"length"!=z&&!Es(z,b))&&d.push(z);return d}(a):function bs(a){if(!Pn(a))return Bn(a);var u=[];for(var d in Object(a))tt.call(a,d)&&"constructor"!=d&&u.push(d);return u}(a)}Ee.exports=function zn(a){return gn(a,!0,!0)}},2650:(Ee,ee,w)=>{Ee=w.nmd(Ee);var xe="__lodash_hash_undefined__",he=1,$=2,H=9007199254740991,D="[object Arguments]",Z="[object Array]",S="[object AsyncFunction]",T="[object Boolean]",M="[object Date]",m="[object Error]",_="[object Function]",i="[object GeneratorFunction]",v="[object Map]",J="[object Number]",Q="[object Null]",k="[object Object]",le="[object Promise]",ie="[object Proxy]",oe="[object RegExp]",pe="[object Set]",B="[object String]",X="[object Undefined]",He="[object WeakMap]",f="[object ArrayBuffer]",E="[object DataView]",ae=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,G={};G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G[D]=G[Z]=G[f]=G[T]=G[E]=G[M]=G[m]=G[_]=G[v]=G[J]=G[k]=G[oe]=G[pe]=G[B]=G[He]=!1;var Te="object"==typeof global&&global&&global.Object===Object&&global,we="object"==typeof self&&self&&self.Object===Object&&self,re=Te||we||Function("return this")(),be=ee&&!ee.nodeType&&ee,ge=be&&Ee&&!Ee.nodeType&&Ee,ve=ge&&ge.exports===be,de=ve&&Te.process,me=function(){try{return de&&de.binding&&de.binding("util")}catch{}}(),Le=me&&me.isTypedArray;function On(a,u){for(var d=-1,b=null==a?0:a.length;++d<b;)if(u(a[d],d,a))return!0;return!1}function Pt(a,u){return a.has(u)}function Mn(a){var u=-1,d=Array(a.size);return a.forEach(function(b,se){d[++u]=[se,b]}),d}function tt(a){var u=-1,d=Array(a.size);return a.forEach(function(b){d[++u]=b}),d}var a,zt=Array.prototype,It=Object.prototype,Qe=re["__core-js_shared__"],jt=Function.prototype.toString,Ke=It.hasOwnProperty,kn=(a=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",xt=It.toString,Xn=RegExp("^"+jt.call(Ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=ve?re.Buffer:void 0,Ht=re.Symbol,Bn=re.Uint8Array,Qt=It.propertyIsEnumerable,Lt=zt.splice,Ve=Ht?Ht.toStringTag:void 0,Zt=Object.getOwnPropertySymbols,Gt=an?an.isBuffer:void 0,qt=function on(a,u){return function(d){return a(u(d))}}(Object.keys,Object),nt=ft(re,"DataView"),Ot=ft(re,"Map"),Ye=ft(re,"Promise"),cn=ft(re,"Set"),un=ft(re,"WeakMap"),Tt=ft(Object,"create"),Dn=Ue(nt),ut=Ue(Ot),hn=Ue(Ye),es=Ue(cn),dn=Ue(un),fn=Ht?Ht.prototype:void 0,pn=fn?fn.valueOf:void 0;function Me(a){var u=-1,d=null==a?0:a.length;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function De(a){var u=-1,d=null==a?0:a.length;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function Pe(a){var u=-1,d=null==a?0:a.length;for(this.clear();++u<d;){var b=a[u];this.set(b[0],b[1])}}function Jt(a){var u=-1,d=null==a?0:a.length;for(this.__data__=new Pe;++u<d;)this.add(a[u])}function ze(a){var u=this.__data__=new De(a);this.size=u.size}function Yt(a,u){for(var d=a.length;d--;)if(zn(a[d][0],u))return d;return-1}function Mt(a){return null==a?void 0===a?X:Q:Ve&&Ve in Object(a)?function pt(a){var u=Ke.call(a,Ve),d=a[Ve];try{a[Ve]=void 0;var b=!0}catch{}var se=xt.call(a);return b&&(u?a[Ve]=d:delete a[Ve]),se}(a):function Pn(a){return xt.call(a)}(a)}function Rn(a){return it(a)&&Mt(a)==D}function Un(a,u,d,b,se){return a===u||(null==a||null==u||!it(a)&&!it(u)?a!=a&&u!=u:function vs(a,u,d,b,se,z){var ue=We(a),fe=We(u),Ie=ue?Z:Ze(a),_e=fe?Z:Ze(u),Re=(Ie=Ie==D?k:Ie)==k,Fe=(_e=_e==D?k:_e)==k,qe=Ie==_e;if(qe&&$t(a)){if(!$t(u))return!1;ue=!0,Re=!1}if(qe&&!Re)return z||(z=new ze),ue||Bt(a)?_n(a,u,d,b,se,z):function Ct(a,u,d,b,se,z,ue){switch(d){case E:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case f:return!(a.byteLength!=u.byteLength||!z(new Bn(a),new Bn(u)));case T:case M:case J:return zn(+a,+u);case m:return a.name==u.name&&a.message==u.message;case oe:case B:return a==u+"";case v:var fe=Mn;case pe:if(fe||(fe=tt),a.size!=u.size&&!(b&he))return!1;var _e=ue.get(a);if(_e)return _e==u;b|=$,ue.set(a,u);var Re=_n(fe(a),fe(u),b,se,z,ue);return ue.delete(a),Re;case"[object Symbol]":if(pn)return pn.call(a)==pn.call(u)}return!1}(a,u,Ie,d,b,se,z);if(!(d&he)){var Oe=Re&&Ke.call(a,"__wrapped__"),ke=Fe&&Ke.call(u,"__wrapped__");if(Oe||ke){var rt=Oe?a.value():a,gt=ke?u.value():u;return z||(z=new ze),se(rt,gt,d,b,z)}}return!!qe&&(z||(z=new ze),function Fn(a,u,d,b,se,z){var ue=d&he,fe=kt(a),Ie=fe.length;if(Ie!=kt(u).length&&!ue)return!1;for(var Fe=Ie;Fe--;){var qe=fe[Fe];if(!(ue?qe in u:Ke.call(u,qe)))return!1}var Oe=z.get(a);if(Oe&&z.get(u))return Oe==u;var ke=!0;z.set(a,u),z.set(u,a);for(var rt=ue;++Fe<Ie;){var gt=a[qe=fe[Fe]],St=u[qe];if(b)var Zs=ue?b(St,gt,qe,u,a,z):b(gt,St,qe,a,u,z);if(!(void 0===Zs?gt===St||se(gt,St,d,b,z):Zs)){ke=!1;break}rt||(rt="constructor"==qe)}if(ke&&!rt){var yn=a.constructor,xn=u.constructor;yn!=xn&&"constructor"in a&&"constructor"in u&&!("function"==typeof yn&&yn instanceof yn&&"function"==typeof xn&&xn instanceof xn)&&(ke=!1)}return z.delete(a),z.delete(u),ke}(a,u,d,b,se,z))}(a,u,d,b,Un,se))}function _n(a,u,d,b,se,z){var ue=d&he,fe=a.length,Ie=u.length;if(fe!=Ie&&!(ue&&Ie>fe))return!1;var _e=z.get(a);if(_e&&z.get(u))return _e==u;var Re=-1,Fe=!0,qe=d&$?new Jt:void 0;for(z.set(a,u),z.set(u,a);++Re<fe;){var Oe=a[Re],ke=u[Re];if(b)var rt=ue?b(ke,Oe,Re,u,a,z):b(Oe,ke,Re,a,u,z);if(void 0!==rt){if(rt)continue;Fe=!1;break}if(qe){if(!On(u,function(gt,St){if(!Pt(qe,St)&&(Oe===gt||se(Oe,gt,d,b,z)))return qe.push(St)})){Fe=!1;break}}else if(Oe!==ke&&!se(Oe,ke,d,b,z)){Fe=!1;break}}return z.delete(a),z.delete(u),Fe}function kt(a){return function mn(a,u,d){var b=u(a);return We(a)?b:function rn(a,u){for(var d=-1,b=u.length,se=a.length;++d<b;)a[se+d]=u[d];return a}(b,d(a))}(a,bn,ws)}function $e(a,u){var d=a.__data__;return function Es(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?d["string"==typeof u?"string":"hash"]:d.map}function ft(a,u){var d=function ln(a,u){return a?.[u]}(a,u);return function ys(a){return!(!Et(a)||function Ss(a){return!!kn&&kn in a}(a))&&(Hn(a)?Xn:ae).test(Ue(a))}(d)?d:void 0}Me.prototype.clear=function ts(){this.__data__=Tt?Tt(null):{},this.size=0},Me.prototype.delete=function ns(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},Me.prototype.get=function ss(a){var u=this.__data__;if(Tt){var d=u[a];return d===xe?void 0:d}return Ke.call(u,a)?u[a]:void 0},Me.prototype.has=function ht(a){var u=this.__data__;return Tt?void 0!==u[a]:Ke.call(u,a)},Me.prototype.set=function is(a,u){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=Tt&&void 0===u?xe:u,this},De.prototype.clear=function rs(){this.__data__=[],this.size=0},De.prototype.delete=function ls(a){var u=this.__data__,d=Yt(u,a);return!(d<0||(d==u.length-1?u.pop():Lt.call(u,d,1),--this.size,0))},De.prototype.get=function os(a){var u=this.__data__,d=Yt(u,a);return d<0?void 0:u[d][1]},De.prototype.has=function as(a){return Yt(this.__data__,a)>-1},De.prototype.set=function cs(a,u){var d=this.__data__,b=Yt(d,a);return b<0?(++this.size,d.push([a,u])):d[b][1]=u,this},Pe.prototype.clear=function us(){this.size=0,this.__data__={hash:new Me,map:new(Ot||De),string:new Me}},Pe.prototype.delete=function hs(a){var u=$e(this,a).delete(a);return this.size-=u?1:0,u},Pe.prototype.get=function ds(a){return $e(this,a).get(a)},Pe.prototype.has=function fs(a){return $e(this,a).has(a)},Pe.prototype.set=function dt(a,u){var d=$e(this,a),b=d.size;return d.set(a,u),this.size+=d.size==b?0:1,this},Jt.prototype.add=Jt.prototype.push=function wt(a){return this.__data__.set(a,xe),this},Jt.prototype.has=function Kt(a){return this.__data__.has(a)},ze.prototype.clear=function gn(){this.__data__=new De,this.size=0},ze.prototype.delete=function ps(a){var u=this.__data__,d=u.delete(a);return this.size=u.size,d},ze.prototype.get=function gs(a){return this.__data__.get(a)},ze.prototype.has=function ms(a){return this.__data__.has(a)},ze.prototype.set=function _s(a,u){var d=this.__data__;if(d instanceof De){var b=d.__data__;if(!Ot||b.length<199)return b.push([a,u]),this.size=++d.size,this;d=this.__data__=new Pe(b)}return d.set(a,u),this.size=d.size,this};var ws=Zt?function(a){return null==a?[]:(a=Object(a),function Be(a,u){for(var d=-1,b=null==a?0:a.length,se=0,z=[];++d<b;){var ue=a[d];u(ue,d,a)&&(z[se++]=ue)}return z}(Zt(a),function(u){return Qt.call(a,u)}))}:function vn(){return[]},Ze=Mt;function Cs(a,u){return!!(u=u??H)&&("number"==typeof a||ce.test(a))&&a>-1&&a%1==0&&a<u}function Ue(a){if(null!=a){try{return jt.call(a)}catch{}try{return a+""}catch{}}return""}function zn(a,u){return a===u||a!=a&&u!=u}(nt&&Ze(new nt(new ArrayBuffer(1)))!=E||Ot&&Ze(new Ot)!=v||Ye&&Ze(Ye.resolve())!=le||cn&&Ze(new cn)!=pe||un&&Ze(new un)!=He)&&(Ze=function(a){var u=Mt(a),d=u==k?a.constructor:void 0,b=d?Ue(d):"";if(b)switch(b){case Dn:return E;case ut:return v;case hn:return le;case es:return pe;case dn:return He}return u});var jn=Rn(function(){return arguments}())?Rn:function(a){return it(a)&&Ke.call(a,"callee")&&!Qt.call(a,"callee")},We=Array.isArray,$t=Gt||function Is(){return!1};function Hn(a){if(!Et(a))return!1;var u=Mt(a);return u==_||u==i||u==S||u==ie}function st(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=H}function Et(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function it(a){return null!=a&&"object"==typeof a}var Bt=Le?function Wn(a){return function(u){return a(u)}}(Le):function xs(a){return it(a)&&st(a.length)&&!!G[Mt(a)]};function bn(a){return function Vt(a){return null!=a&&st(a.length)&&!Hn(a)}(a)?function bs(a,u){var d=We(a),b=!d&&jn(a),se=!d&&!b&&$t(a),z=!d&&!b&&!se&&Bt(a),ue=d||b||se||z,fe=ue?function $n(a,u){for(var d=-1,b=Array(a);++d<a;)b[d]=u(d);return b}(a.length,String):[],Ie=fe.length;for(var _e in a)(u||Ke.call(a,_e))&&(!ue||!("length"==_e||se&&("offset"==_e||"parent"==_e)||z&&("buffer"==_e||"byteLength"==_e||"byteOffset"==_e)||Cs(_e,Ie)))&&fe.push(_e);return fe}(a):function Ts(a){if(!function As(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||It)}(a))return qt(a);var u=[];for(var d in Object(a))Ke.call(a,d)&&"constructor"!=d&&u.push(d);return u}(a)}Ee.exports=function Ns(a,u){return Un(a,u)}},6038:(Ee,ee,w)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});const Y=w(5646),xe=w(2650);var he,$;($=he||(he={})).compose=function H(T={},M={},m=!1){"object"!=typeof T&&(T={}),"object"!=typeof M&&(M={});let _=Y(M);m||(_=Object.keys(_).reduce((i,v)=>(null!=_[v]&&(i[v]=_[v]),i),{}));for(const i in T)void 0!==T[i]&&void 0===M[i]&&(_[i]=T[i]);return Object.keys(_).length>0?_:void 0},$.diff=function D(T={},M={}){"object"!=typeof T&&(T={}),"object"!=typeof M&&(M={});const m=Object.keys(T).concat(Object.keys(M)).reduce((_,i)=>(xe(T[i],M[i])||(_[i]=void 0===M[i]?null:M[i]),_),{});return Object.keys(m).length>0?m:void 0},$.invert=function Z(T={},M={}){T=T||{};const m=Object.keys(M).reduce((_,i)=>(M[i]!==T[i]&&void 0!==T[i]&&(_[i]=M[i]),_),{});return Object.keys(T).reduce((_,i)=>(T[i]!==M[i]&&void 0===M[i]&&(_[i]=null),_),m)},$.transform=function S(T,M,m=!1){if("object"!=typeof T)return M;if("object"!=typeof M)return;if(!m)return M;const _=Object.keys(M).reduce((i,v)=>(void 0===T[v]&&(i[v]=M[v]),i),{});return Object.keys(_).length>0?_:void 0},ee.default=he},2727:(Ee,ee,w)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.AttributeMap=ee.OpIterator=ee.Op=void 0;const Y=w(5739),xe=w(5646),he=w(2650),$=w(6038);ee.AttributeMap=$.default;const H=w(4411);ee.Op=H.default;const D=w(530);ee.OpIterator=D.default;const Z=String.fromCharCode(0),S=(M,m)=>{if("object"!=typeof M||null===M)throw new Error("cannot retain a "+typeof M);if("object"!=typeof m||null===m)throw new Error("cannot retain a "+typeof m);const _=Object.keys(M)[0];if(!_||_!==Object.keys(m)[0])throw new Error(`embed types not matched: ${_} != ${Object.keys(m)[0]}`);return[_,M[_],m[_]]};class T{constructor(m){this.ops=Array.isArray(m)?m:null!=m&&Array.isArray(m.ops)?m.ops:[]}static registerEmbed(m,_){this.handlers[m]=_}static unregisterEmbed(m){delete this.handlers[m]}static getHandler(m){const _=this.handlers[m];if(!_)throw new Error(`no handlers for embed type "${m}"`);return _}insert(m,_){const i={};return"string"==typeof m&&0===m.length?this:(i.insert=m,null!=_&&"object"==typeof _&&Object.keys(_).length>0&&(i.attributes=_),this.push(i))}delete(m){return m<=0?this:this.push({delete:m})}retain(m,_){if("number"==typeof m&&m<=0)return this;const i={retain:m};return null!=_&&"object"==typeof _&&Object.keys(_).length>0&&(i.attributes=_),this.push(i)}push(m){let _=this.ops.length,i=this.ops[_-1];if(m=xe(m),"object"==typeof i){if("number"==typeof m.delete&&"number"==typeof i.delete)return this.ops[_-1]={delete:i.delete+m.delete},this;if("number"==typeof i.delete&&null!=m.insert&&(_-=1,i=this.ops[_-1],"object"!=typeof i))return this.ops.unshift(m),this;if(he(m.attributes,i.attributes)){if("string"==typeof m.insert&&"string"==typeof i.insert)return this.ops[_-1]={insert:i.insert+m.insert},"object"==typeof m.attributes&&(this.ops[_-1].attributes=m.attributes),this;if("number"==typeof m.retain&&"number"==typeof i.retain)return this.ops[_-1]={retain:i.retain+m.retain},"object"==typeof m.attributes&&(this.ops[_-1].attributes=m.attributes),this}}return _===this.ops.length?this.ops.push(m):this.ops.splice(_,0,m),this}chop(){const m=this.ops[this.ops.length-1];return m&&"number"==typeof m.retain&&!m.attributes&&this.ops.pop(),this}filter(m){return this.ops.filter(m)}forEach(m){this.ops.forEach(m)}map(m){return this.ops.map(m)}partition(m){const _=[],i=[];return this.forEach(v=>{(m(v)?_:i).push(v)}),[_,i]}reduce(m,_){return this.ops.reduce(m,_)}changeLength(){return this.reduce((m,_)=>_.insert?m+H.default.length(_):_.delete?m-_.delete:m,0)}length(){return this.reduce((m,_)=>m+H.default.length(_),0)}slice(m=0,_=1/0){const i=[],v=new D.default(this.ops);let J=0;for(;J<_&&v.hasNext();){let Q;J<m?Q=v.next(m-J):(Q=v.next(_-J),i.push(Q)),J+=H.default.length(Q)}return new T(i)}compose(m){const _=new D.default(this.ops),i=new D.default(m.ops),v=[],J=i.peek();if(null!=J&&"number"==typeof J.retain&&null==J.attributes){let k=J.retain;for(;"insert"===_.peekType()&&_.peekLength()<=k;)k-=_.peekLength(),v.push(_.next());J.retain-k>0&&i.next(J.retain-k)}const Q=new T(v);for(;_.hasNext()||i.hasNext();)if("insert"===i.peekType())Q.push(i.next());else if("delete"===_.peekType())Q.push(_.next());else{const k=Math.min(_.peekLength(),i.peekLength()),le=_.next(k),ie=i.next(k);if(ie.retain){const oe={};if("number"==typeof le.retain)oe.retain="number"==typeof ie.retain?k:ie.retain;else if("number"==typeof ie.retain)null==le.retain?oe.insert=le.insert:oe.retain=le.retain;else{const B=null==le.retain?"insert":"retain",[Ne,X,He]=S(le[B],ie.retain),f=T.getHandler(Ne);oe[B]={[Ne]:f.compose(X,He,"retain"===B)}}const pe=$.default.compose(le.attributes,ie.attributes,"number"==typeof le.retain);if(pe&&(oe.attributes=pe),Q.push(oe),!i.hasNext()&&he(Q.ops[Q.ops.length-1],oe)){const B=new T(_.rest());return Q.concat(B).chop()}}else"number"==typeof ie.delete&&("number"==typeof le.retain||"object"==typeof le.retain&&null!==le.retain)&&Q.push(ie)}return Q.chop()}concat(m){const _=new T(this.ops.slice());return m.ops.length>0&&(_.push(m.ops[0]),_.ops=_.ops.concat(m.ops.slice(1))),_}diff(m,_){if(this.ops===m.ops)return new T;const i=[this,m].map(le=>le.map(ie=>{if(null!=ie.insert)return"string"==typeof ie.insert?ie.insert:Z;throw new Error("diff() called "+(le===m?"on":"with")+" non-document")}).join("")),v=new T,J=Y(i[0],i[1],_,!0),Q=new D.default(this.ops),k=new D.default(m.ops);return J.forEach(le=>{let ie=le[1].length;for(;ie>0;){let oe=0;switch(le[0]){case Y.INSERT:oe=Math.min(k.peekLength(),ie),v.push(k.next(oe));break;case Y.DELETE:oe=Math.min(ie,Q.peekLength()),Q.next(oe),v.delete(oe);break;case Y.EQUAL:oe=Math.min(Q.peekLength(),k.peekLength(),ie);const pe=Q.next(oe),B=k.next(oe);he(pe.insert,B.insert)?v.retain(oe,$.default.diff(pe.attributes,B.attributes)):v.push(B).delete(oe)}ie-=oe}}),v.chop()}eachLine(m,_="\n"){const i=new D.default(this.ops);let v=new T,J=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const Q=i.peek(),k=H.default.length(Q)-i.peekLength(),le="string"==typeof Q.insert?Q.insert.indexOf(_,k)-k:-1;if(le<0)v.push(i.next());else if(le>0)v.push(i.next(le));else{if(!1===m(v,i.next(1).attributes||{},J))return;J+=1,v=new T}}v.length()>0&&m(v,{},J)}invert(m){const _=new T;return this.reduce((i,v)=>{if(v.insert)_.delete(H.default.length(v));else{if("number"==typeof v.retain&&null==v.attributes)return _.retain(v.retain),i+v.retain;if(v.delete||"number"==typeof v.retain){const J=v.delete||v.retain;return m.slice(i,i+J).forEach(k=>{v.delete?_.push(k):v.retain&&v.attributes&&_.retain(H.default.length(k),$.default.invert(v.attributes,k.attributes))}),i+J}if("object"==typeof v.retain&&null!==v.retain){const J=m.slice(i,i+1),Q=new D.default(J.ops).next(),[k,le,ie]=S(v.retain,Q.insert),oe=T.getHandler(k);return _.retain({[k]:oe.invert(le,ie)},$.default.invert(v.attributes,Q.attributes)),i+1}}return i},0),_.chop()}transform(m,_=!1){if(_=!!_,"number"==typeof m)return this.transformPosition(m,_);const i=m,v=new D.default(this.ops),J=new D.default(i.ops),Q=new T;for(;v.hasNext()||J.hasNext();)if("insert"!==v.peekType()||!_&&"insert"===J.peekType())if("insert"===J.peekType())Q.push(J.next());else{const k=Math.min(v.peekLength(),J.peekLength()),le=v.next(k),ie=J.next(k);if(le.delete)continue;if(ie.delete)Q.push(ie);else{const oe=le.retain,pe=ie.retain;let B="object"==typeof pe&&null!==pe?pe:k;if("object"==typeof oe&&null!==oe&&"object"==typeof pe&&null!==pe){const Ne=Object.keys(oe)[0];if(Ne===Object.keys(pe)[0]){const X=T.getHandler(Ne);X&&(B={[Ne]:X.transform(oe[Ne],pe[Ne],_)})}}Q.retain(B,$.default.transform(le.attributes,ie.attributes,_))}}else Q.retain(H.default.length(v.next()));return Q.chop()}transformPosition(m,_=!1){_=!!_;const i=new D.default(this.ops);let v=0;for(;i.hasNext()&&v<=m;){const J=i.peekLength(),Q=i.peekType();i.next(),"delete"!==Q?("insert"===Q&&(v<m||!_)&&(m+=J),v+=J):m-=Math.min(J,m-v)}return m}}T.Op=H.default,T.OpIterator=D.default,T.AttributeMap=$.default,T.handlers={},ee.default=T,Ee.exports=T,Ee.exports.default=T},4411:(Ee,ee)=>{"use strict";var w;Object.defineProperty(ee,"__esModule",{value:!0}),(w||(w={})).length=function xe(he){return"number"==typeof he.delete?he.delete:"number"==typeof he.retain?he.retain:"object"==typeof he.retain&&null!==he.retain?1:"string"==typeof he.insert?he.insert.length:1},ee.default=w},530:(Ee,ee,w)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});const Y=w(4411);ee.default=class xe{constructor($){this.ops=$,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next($){$||($=1/0);const H=this.ops[this.index];if(H){const D=this.offset,Z=Y.default.length(H);if($>=Z-D?($=Z-D,this.index+=1,this.offset=0):this.offset+=$,"number"==typeof H.delete)return{delete:$};{const S={};return H.attributes&&(S.attributes=H.attributes),"number"==typeof H.retain?S.retain=$:"object"==typeof H.retain&&null!==H.retain?S.retain=H.retain:S.insert="string"==typeof H.insert?H.insert.substr(D,$):H.insert,S}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Y.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const $=this.ops[this.index];return $?"number"==typeof $.delete?"delete":"number"==typeof $.retain||"object"==typeof $.retain&&null!==$.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const $=this.offset,H=this.index,D=this.next(),Z=this.ops.slice(this.index);return this.offset=$,this.index=H,[D].concat(Z)}}return[]}}}}]);